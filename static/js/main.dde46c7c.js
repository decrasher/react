/*! For license information please see main.dde46c7c.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,u,s=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(s[l]=o[l]);if(t){u=t(o);for(var f=0;f<u.length;f++)r.call(o,u[f])&&(s[u[f]]=o[u[f]])}}return s}},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var u=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)u.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function y(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=60103,x=60106,I=60107,E=60108,T=60114,S=60109,C=60110,A=60112,N=60113,R=60120,D=60115,P=60116,O=60121,L=60128,M=60129,F=60130,U=60131;if("function"===typeof Symbol&&Symbol.for){var V=Symbol.for;_=V("react.element"),x=V("react.portal"),I=V("react.fragment"),E=V("react.strict_mode"),T=V("react.profiler"),S=V("react.provider"),C=V("react.context"),A=V("react.forward_ref"),N=V("react.suspense"),R=V("react.suspense_list"),D=V("react.memo"),P=V("react.lazy"),O=V("react.block"),V("react.scope"),L=V("react.opaque.id"),M=V("react.debug_trace_mode"),F=V("react.offscreen"),U=V("react.legacy_hidden")}var j,q="function"===typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=q&&e[q]||e["@@iterator"])?e:null}function z(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var G=!1;function K(e,t){if(!e||G)return"";G=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var r=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){r=s}e.call(t.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"===typeof s.stack){for(var i=s.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=u);break}}}finally{G=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function W(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=K(e.type,!1);case 11:return e=K(e.type.render,!1);case 22:return e=K(e.type._render,!1);case 1:return e=K(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case x:return"Portal";case T:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case D:return H(e.type);case O:return H(e._render);case P:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ue(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,ye,me=(ye=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ye(e,t)}))}:ye);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function _e(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var xe=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,Ae=null;function Ne(e){if(e=ri(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Se(e.stateNode,e.type,t))}}function Re(e){Ce?Ae?Ae.push(e):Ae=[e]:Ce=e}function De(){if(Ce){var e=Ce,t=Ae;if(Ae=Ce=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Pe(e,t){return e(t)}function Oe(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var Me=Pe,Fe=!1,Ue=!1;function Ve(){null===Ce&&null===Ae||(Le(),De())}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var qe=!1;if(f)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){qe=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch(ye){qe=!1}function ze(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Ge=!1,Ke=null,We=!1,He=null,Qe={onError:function(e){Ge=!0,Ke=e}};function Ye(e,t,n,r,i,a,o,u,s){Ge=!1,Ke=null,ze.apply(Qe,arguments)}function $e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Xe(e){if($e(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Xe(i),e;if(a===r)return Xe(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],ut=null,st=null,ct=null,lt=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":ut=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function yt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=ni(e.target);if(null!==t){var n=$e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Je(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function wt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==ut&&gt(ut)&&(ut=null),null!==st&&gt(st)&&(st=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ft.forEach(kt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,wt)))}function _t(e){function t(t){return bt(t,e)}if(0<ot.length){bt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ut&&bt(ut,e),null!==st&&bt(st,e),null!==ct&&bt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)mt(n),null===n.blockedOn&&ht.shift()}function xt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var It={animationend:xt("Animation","AnimationEnd"),animationiteration:xt("Animation","AnimationIteration"),animationstart:xt("Animation","AnimationStart"),transitionend:xt("Transition","TransitionEnd")},Et={},Tt={};function St(e){if(Et[e])return Et[e];if(!It[e])return e;var t,n=It[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return Et[e]=n[t];return e}f&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete It.animationend.animation,delete It.animationiteration.animation,delete It.animationstart.animation),"TransitionEvent"in window||delete It.transitionend.transition);var Ct=St("animationend"),At=St("animationiteration"),Nt=St("animationstart"),Rt=St("transitionend"),Dt=new Map,Pt=new Map,Ot=["abort","abort",Ct,"animationEnd",At,"animationIteration",Nt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Rt,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Pt.set(r,t),Dt.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Mt=8;function Ft(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Ut(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==a)r=a,i=Mt=15;else if(0!==(a=134217727&n)){var s=a&~o;0!==s?(r=Ft(s),i=Mt):0!==(u&=a)&&(r=Ft(u),i=Mt)}else 0!==(a=n&~o)?(r=Ft(a),i=Mt):0!==u&&(r=Ft(u),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Gt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ft(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Gt(t)),r|=e[n],t&=~i;return r}function Vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function jt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=qt(24&~t))?jt(10,t):e;case 10:return 0===(e=qt(192&~t))?jt(8,t):e;case 8:return 0===(e=qt(3584&~t))&&(0===(e=qt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=qt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function qt(e){return e&-e}function Bt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Gt(t)]=n}var Gt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Kt(e)/Wt|0)|0},Kt=Math.log,Wt=Math.LN2;var Ht=a.unstable_UserBlockingPriority,Qt=a.unstable_runWithPriority,Yt=!0;function $t(e,t,n,r){Fe||Le();var i=Xt,a=Fe;Fe=!0;try{Oe(i,e,t,n,r)}finally{(Fe=a)||Ve()}}function Jt(e,t,n,r){Qt(Ht,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){var i;if(Yt)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ut=yt(ut,e,t,n,r,i),!0;case"dragenter":return st=yt(st,e,t,n,r,i),!0;case"mouseover":return ct=yt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,yt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,yt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Te(r);if(null!==(i=ni(i))){var a=$e(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Je(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function un(){return!1}function sn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:un,this.isPropagationStopped=un,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(hn),pn=i({},hn,{view:0,detail:0}),vn=sn(pn),yn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=sn(yn),gn=sn(i({},yn,{dataTransfer:0})),kn=sn(i({},pn,{relatedTarget:0})),wn=sn(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=sn(bn),xn=sn(i({},hn,{data:0})),In={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function Cn(){return Sn}var An=i({},pn,{key:function(e){if(e.key){var t=In[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=sn(An),Rn=sn(i({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=sn(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Pn=sn(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=i({},yn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=sn(On),Mn=[9,13,27,32],Fn=f&&"CompositionEvent"in window,Un=null;f&&"documentMode"in document&&(Un=document.documentMode);var Vn=f&&"TextEvent"in window&&!Un,jn=f&&(!Fn||Un&&8<Un&&11>=Un),qn=String.fromCharCode(32),Bn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Kn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Qn(e,t,n,r){Re(r),0<(t=Fr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,$n=null;function Jn(e){Ar(e,0)}function Xn(e){if(J(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Yn&&(Yn.detachEvent("onpropertychange",ar),$n=Yn=null)}function ar(e){if("value"===e.propertyName&&Xn($n)){var t=[];if(Qn(t,$n,e,Te(e)),e=Jn,Fe)e(t);else{Fe=!0;try{Pe(e,t)}finally{Fe=!1,Ve()}}}}function or(e,t,n){"focusin"===e?(ir(),$n=n,(Yn=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function ur(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn($n)}function sr(e,t){if("click"===e)return Xn(t)}function cr(e,t){if("input"===e||"change"===e)return Xn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function yr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,kr=null,wr=null,br=null,_r=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==kr||kr!==X(r)||("selectionStart"in(r=kr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&hr(br,r)||(br=r,0<(r=Fr(wr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Ot,2);for(var Ir="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<Ir.length;Er++)Pt.set(Ir[Er],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,u,s,c){if(Ye.apply(this,arguments),Ge){if(!Ge)throw Error(o(198));var l=Ke;Ge=!1,Ke=null,We||(We=!0,He=l)}}(r,t,void 0,e),e.currentTarget=null}function Ar(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}}}if(We)throw e=He,We=!1,He=null,e}function Nr(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Or(t,e,2,!1),n.add(r))}var Rr="_reactListening"+Math.random().toString(36).slice(2);function Dr(e){e[Rr]||(e[Rr]=!0,u.forEach((function(t){Sr.has(t)||Pr(t,!1,e,null),Pr(t,!0,e,null)})))}function Pr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(i|=4),Or(a,e,i,t),o.add(u))}function Or(e,t,n,r){var i=Pt.get(t);switch(void 0===i?2:i){case 0:i=$t;break;case 1:i=Jt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!qe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=ni(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}!function(e,t,n){if(Ue)return e(t,n);Ue=!0;try{Me(e,t,n)}finally{Ue=!1,Ve()}}((function(){var r=a,i=Te(n),o=[];e:{var u=Dt.get(e);if(void 0!==u){var s=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":s=Nn;break;case"focusin":c="focus",s=kn;break;case"focusout":c="blur",s=kn;break;case"beforeblur":case"afterblur":s=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Dn;break;case Ct:case At:case Nt:s=wn;break;case Rt:s=Pn;break;case"scroll":s=vn;break;case"wheel":s=Ln;break;case"copy":case"cut":case"paste":s=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Rn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=je(p,h))&&l.push(Mr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=$e(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=mn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Rn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:ii(s),d=null==c?u:ii(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,ni(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Ur(d))p++;for(d=0,v=h;v;v=Ur(v))d++;for(;0<p-d;)l=Ur(l),p--;for(;0<d-p;)h=Ur(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Ur(l),h=Ur(h)}l=null}else l=null;null!==s&&Vr(o,u,s,l,!1),null!==c&&null!==f&&Vr(o,f,c,l,!0)}if("select"===(s=(u=r?ii(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Zn;else if(Hn(u))if(er)y=cr;else{y=ur;var m=or}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=sr);switch(y&&(y=y(e,r))?Qn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ie(u,"number",u.value)),m=r?ii(r):window,e){case"focusin":(Hn(m)||"true"===m.contentEditable)&&(kr=m,wr=r,br=null);break;case"focusout":br=wr=kr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,xr(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":xr(o,n,i)}var g;if(Fn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Kn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(jn&&"ko"!==n.locale&&(Kn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Kn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Kn=!0)),0<(m=Fr(r,k)).length&&(k=new xn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Gn(n))&&(k.data=g))),(g=Vn?function(e,t){switch(e){case"compositionend":return Gn(t);case"keypress":return 32!==t.which?null:(Bn=!0,qn);case"textInput":return(e=t.data)===qn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Kn)return"compositionend"===e||!Fn&&zn(e,t)?(e=rn(),nn=tn=en=null,Kn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ar(o,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=je(e,n))&&r.unshift(Mr(e,a,i)),null!=(a=je(e,t))&&r.push(Mr(e,a,i))),e=e.return}return r}function Ur(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Vr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=je(n,a))&&o.unshift(Mr(n,s,u)):i||null!=(s=je(n,a))&&o.push(Mr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function jr(){}var qr=null,Br=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Gr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Kr="function"===typeof setTimeout?setTimeout:void 0,Wr="function"===typeof clearTimeout?clearTimeout:void 0;function Hr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var $r=0;var Jr=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Jr,Zr="__reactProps$"+Jr,ei="__reactContainer$"+Jr,ti="__reactEvents$"+Jr;function ni(e){var t=e[Xr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Xr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Yr(e);null!==e;){if(n=e[Xr])return n;e=Yr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Xr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var ui=[],si=-1;function ci(e){return{current:e}}function li(e){0>si||(e.current=ui[si],ui[si]=null,si--)}function fi(e,t){si++,ui[si]=e.current,e.current=t}var hi={},di=ci(hi),pi=ci(!1),vi=hi;function yi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==hi)throw Error(o(168));fi(di,t),fi(pi,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,H(t)||"Unknown",a));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,vi=di.current,fi(di,e),fi(pi,pi.current),!0}function _i(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=wi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),fi(di,e)):li(pi),fi(pi,n)}var xi=null,Ii=null,Ei=a.unstable_runWithPriority,Ti=a.unstable_scheduleCallback,Si=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ai=a.unstable_requestPaint,Ni=a.unstable_now,Ri=a.unstable_getCurrentPriorityLevel,Di=a.unstable_ImmediatePriority,Pi=a.unstable_UserBlockingPriority,Oi=a.unstable_NormalPriority,Li=a.unstable_LowPriority,Mi=a.unstable_IdlePriority,Fi={},Ui=void 0!==Ai?Ai:function(){},Vi=null,ji=null,qi=!1,Bi=Ni(),zi=1e4>Bi?Ni:function(){return Ni()-Bi};function Gi(){switch(Ri()){case Di:return 99;case Pi:return 98;case Oi:return 97;case Li:return 96;case Mi:return 95;default:throw Error(o(332))}}function Ki(e){switch(e){case 99:return Di;case 98:return Pi;case 97:return Oi;case 96:return Li;case 95:return Mi;default:throw Error(o(332))}}function Wi(e,t){return e=Ki(e),Ei(e,t)}function Hi(e,t,n){return e=Ki(e),Ti(e,t,n)}function Qi(){if(null!==ji){var e=ji;ji=null,Si(e)}Yi()}function Yi(){if(!qi&&null!==Vi){qi=!0;var e=0;try{var t=Vi;Wi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Vi=null}catch(n){throw null!==Vi&&(Vi=Vi.slice(e+1)),Ti(Di,Qi),n}finally{qi=!1}}}var $i=b.ReactCurrentBatchConfig;function Ji(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Xi=ci(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=Xi.current;li(Xi),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(o(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var ua=!1;function sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;ua=!1;var o=a.firstBaseUpdate,u=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var c=s,l=c.next;c.next=null,null===u?o=l:u.next=l,u=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==u&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,u=0,f=l=c=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(s=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,s);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(s="function"===typeof(p=v.payload)?p.call(d,h,s):p)||void 0===s)break e;h=i({},h,s);break e;case 2:ua=!0}}null!==o.callback&&(e.flags|=32,null===(s=a.effects)?a.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,u|=s;if(null===(o=o.next)){if(null===(s=a.shared.pending))break;o=s.next,s.next=null,a.lastBaseUpdate=s,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,qu|=u,e.lanes=u,e.memoizedState=h}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ya(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ma={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hs(),r=ds(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),ps(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ka(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=mi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?yi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function ba(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,sa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=mi(t)?vi:di.current,i.context=yi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ya(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ma.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var _a=Array.isArray;function xa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ia(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ea(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ws(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function u(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=$s(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=xa(e,t,n),r.return=e,r):((r=Hs(n.type,n.key,n.props,null,e.mode,r)).ref=xa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Js(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Qs(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=$s(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Hs(t.type,t.key,t.props,null,e.mode,n)).ref=xa(e,null,t),n.return=e,n;case x:return(t=Js(t,e.mode,n)).return=e,t}if(_a(t)||B(t))return(t=Qs(t,e.mode,n,null)).return=e,t;Ia(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?n.type===I?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null}if(_a(n)||B(n))return null!==i?null:f(e,t,n,r,null);Ia(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return e=e.get(null===r.key?n:r.key)||null,r.type===I?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(_a(r)||B(r))return f(t,e=e.get(n)||null,r,i,null);Ia(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),c}function y(i,u,s,c){var l=B(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=a(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===I&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case _:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===I){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=xa(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===I?((r=Qs(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Hs(a.type,a.key,a.props,null,e.mode,s)).ref=xa(e,r,a),s.return=e,e=s)}return u(e);case x:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Js(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=$s(a,e.mode,s)).return=e,e=r),u(e);if(_a(a))return v(e,r,a,s);if(B(a))return y(e,r,a,s);if(l&&Ia(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,H(e.type)||"Component"))}return n(e,r)}}var Ta=Ea(!0),Sa=Ea(!1),Ca={},Aa=ci(Ca),Na=ci(Ca),Ra=ci(Ca);function Da(e){if(e===Ca)throw Error(o(174));return e}function Pa(e,t){switch(fi(Ra,t),fi(Na,e),fi(Aa,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Aa),fi(Aa,t)}function Oa(){li(Aa),li(Na),li(Ra)}function La(e){Da(Ra.current);var t=Da(Aa.current),n=pe(t,e.type);t!==n&&(fi(Na,e),fi(Aa,n))}function Ma(e){Na.current===e&&(li(Aa),li(Na))}var Fa=ci(0);function Ua(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Va=null,ja=null,qa=!1;function Ba(e,t){var n=Gs(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ga(e){if(qa){var t=ja;if(t){var n=t;if(!za(e,t)){if(!(t=Qr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,qa=!1,void(Va=e);Ba(Va,n)}Va=e,ja=Qr(t.firstChild)}else e.flags=-1025&e.flags|2,qa=!1,Va=e}}function Ka(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Va=e}function Wa(e){if(e!==Va)return!1;if(!qa)return Ka(e),qa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Gr(t,e.memoizedProps))for(t=ja;t;)Ba(e,t),t=Qr(t.nextSibling);if(Ka(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ja=Qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ja=null}}else ja=Va?Qr(e.stateNode.nextSibling):null;return!0}function Ha(){ja=Va=null,qa=!1}var Qa=[];function Ya(){for(var e=0;e<Qa.length;e++)Qa[e]._workInProgressVersionPrimary=null;Qa.length=0}var $a=b.ReactCurrentDispatcher,Ja=b.ReactCurrentBatchConfig,Xa=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Xa=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$a.current=null===e||null===e.memoizedState?Po:Oo,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,$a.current=Lo,e=n(r,i)}while(ro)}if($a.current=Do,t=null!==eo&&null!==eo.next,Xa=0,to=eo=Za=null,no=!1,t)throw Error(o(300));return e}function uo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function so(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.lane;if((Xa&l)===l)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,Za.lanes|=l,qu|=l}c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,lr(r,t.memoizedState)||(Fo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);lr(a,t.memoizedState)||(Fo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Xa&e)===e)&&(t._workInProgressVersionPrimary=r,Qa.push(t))),e)return n(t._source);throw Qa.push(t),Error(o(350))}function po(e,t,n,r){var i=Pu;if(null===i)throw Error(o(349));var a=t._getVersion,u=a(t._source),s=$a.current,c=s.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var y=Za;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(u,e)){e=n(t._source),lr(f,e)||(l(e),e=ds(y),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var s=31-Gt(o),c=1<<s;r[s]|=e,o&=~c}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=ds(y);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=Ro.bind(null,Za,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function vo(e,t,n){return po(so(),e,t,n)}function yo(e){var t=uo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Ro.bind(null,Za,e),[t.memoizedState,e]}function mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},uo().memoizedState=e}function ko(){return so().memoizedState}function wo(e,t,n,r){var i=uo();Za.flags|=e,i.memoizedState=mo(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var i=so();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void mo(t,n,a,r)}Za.flags|=e,i.memoizedState=mo(1|t,n,a,r)}function _o(e,t){return wo(516,4,e,t)}function xo(e,t){return bo(516,4,e,t)}function Io(e,t){return bo(4,2,e,t)}function Eo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,Eo.bind(null,t,e),n)}function So(){}function Co(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ao(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function No(e,t){var n=Gi();Wi(98>n?98:n,(function(){e(!0)})),Wi(97<n?97:n,(function(){var n=Ja.transition;Ja.transition=1;try{e(!1),t()}finally{Ja.transition=n}}))}function Ro(e,t,n){var r=hs(),i=ds(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,s=o(u,n);if(a.eagerReducer=o,a.eagerState=s,lr(s,u))return}catch(c){}ps(e,i,r)}}var Do={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Po={readContext:oa,useCallback:function(e,t){return uo().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:_o,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=uo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=uo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ro.bind(null,Za,e),[r.memoizedState,e]},useRef:go,useState:yo,useDebugValue:So,useDeferredValue:function(e){var t=yo(e),n=t[0],r=t[1];return _o((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=yo(!1),t=e[0];return go(e=No.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=uo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(qa){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+($r++).toString(36))),Error(o(355))})),n=yo(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,mo(5,(function(){n("r:"+($r++).toString(36))}),void 0,null)),t}return yo(t="r:"+($r++).toString(36)),t},unstable_isNewReconciler:!1},Oo={readContext:oa,useCallback:Co,useContext:oa,useEffect:xo,useImperativeHandle:To,useLayoutEffect:Io,useMemo:Ao,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:So,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return xo((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:Co,useContext:oa,useEffect:xo,useImperativeHandle:To,useLayoutEffect:Io,useMemo:Ao,useReducer:fo,useRef:ko,useState:function(){return fo(co)},useDebugValue:So,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return xo((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Mo=b.ReactCurrentOwner,Fo=!1;function Uo(e,t,n,r){t.child=null===e?Sa(t,null,n,r):Ta(t,e.child,n,r)}function Vo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Uo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function jo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Ks(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Hs(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,qo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?au(e,t,a):(t.flags|=1,(e=Ws(o,r)).ref=t.ref,e.return=t,t.child=e)}function qo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Fo=!1,0===(a&i))return t.lanes=e.lanes,au(e,t,a);0!==(16384&e.flags)&&(Fo=!0)}return Go(e,t,n,r,a)}function Bo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},_s(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},_s(t,e),null;t.memoizedState={baseLanes:0},_s(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,_s(t,r);return Uo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Go(e,t,n,r,i){var a=mi(n)?vi:di.current;return a=yi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Uo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Ko(e,t,n,r,i){if(mi(n)){var a=!0;bi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),ba(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=yi(t,c=mi(n)?vi:di.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&wa(t,o,r,c),ua=!1;var h=t.memoizedState;o.state=h,da(t,r,o,i),s=t.memoizedState,u!==r||h!==s||pi.current||ua?("function"===typeof l&&(ya(t,n,l,r),s=t.memoizedState),(u=ua||ga(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Ji(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=oa(s):s=yi(t,s=mi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&wa(t,o,r,s),ua=!1,h=t.memoizedState,o.state=h,da(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||pi.current||ua?("function"===typeof d&&(ya(t,n,d,r),p=t.memoizedState),(c=ua||ga(t,n,c,r,h,p,s))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Wo(e,t,n,r,a,i)}function Wo(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&_i(t,n,!1),au(e,t,a);r=t.stateNode,Mo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ta(t,e.child,null,a),t.child=Ta(t,null,u,a)):Uo(e,t,u,a),t.memoizedState=r.state,i&&_i(t,n,!0),t.child}function Ho(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Pa(e,t.containerInfo)}var Qo,Yo,$o,Jo={dehydrated:null,retryLane:0};function Xo(e,t,n){var r,i=t.pendingProps,a=Fa.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(Fa,1&a),null===e?(void 0!==i.fallback&&Ga(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,t.lanes=33554432,e):((n=Ys({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=tu(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Jo,i):(n=eu(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Ys(t,i,0,null),n=Qs(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function eu(e,t,n,r){var i=e.child;return e=i.sibling,n=Ws(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function tu(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Ws(o,u),null!==e?r=Ws(e,r):(r=Qs(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function nu(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function ru(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function iu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Uo(e,t,r.children,n),0!==(2&(r=Fa.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nu(e,n);else if(19===e.tag)nu(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Fa,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ua(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ru(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ua(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ru(t,!0,n,null,a,t.lastEffect);break;case"together":ru(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function au(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),qu|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ws(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ws(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ou(e,t){if(!qa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function uu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mi(t.type)&&gi(),null;case 3:return Oa(),li(pi),li(di),Ya(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Wa(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ma(t);var a=Da(Ra.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Da(Aa.current),Wa(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[Xr]=t,r[Zr]=u,n){case"dialog":Nr("cancel",r),Nr("close",r);break;case"iframe":case"object":case"embed":Nr("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Nr(Tr[e],r);break;case"source":Nr("error",r);break;case"img":case"image":case"link":Nr("error",r),Nr("load",r);break;case"details":Nr("toggle",r);break;case"input":ee(r,u),Nr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Nr("invalid",r);break;case"textarea":se(r,u),Nr("invalid",r)}for(var c in Ie(n,u),e=null,u)u.hasOwnProperty(c)&&(a=u[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):s.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Nr("scroll",r));switch(n){case"input":$(r),re(r,u,!0);break;case"textarea":$(r),le(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=jr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Xr]=t,e[Zr]=r,Qo(e,t),t.stateNode=e,c=Ee(n,r),n){case"dialog":Nr("cancel",e),Nr("close",e),a=r;break;case"iframe":case"object":case"embed":Nr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Tr.length;a++)Nr(Tr[a],e);a=r;break;case"source":Nr("error",e),a=r;break;case"img":case"image":case"link":Nr("error",e),Nr("load",e),a=r;break;case"details":Nr("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Nr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Nr("invalid",e);break;case"textarea":se(e,r),a=ue(e,r),Nr("invalid",e);break;default:a=r}Ie(n,a);var l=a;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?_e(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&me(e,f):"children"===u?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?null!=f&&"onScroll"===u&&Nr("scroll",e):null!=f&&w(e,u,f,c))}switch(n){case"input":$(e),re(e,r,!1);break;case"textarea":$(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?oe(e,!!r.multiple,u,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=jr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)$o(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Da(Ra.current),Da(Aa.current),Wa(t)?(r=t.stateNode,n=t.memoizedProps,r[Xr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Xr]=t,t.stateNode=r)}return null;case 13:return li(Fa),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Wa(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Fa.current)?0===Uu&&(Uu=3):(0!==Uu&&3!==Uu||(Uu=4),null===Pu||0===(134217727&qu)&&0===(134217727&Bu)||gs(Pu,Lu))),(r||n)&&(t.flags|=4),null);case 4:return Oa(),null===e&&Dr(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Fa),null===(r=t.memoizedState))return null;if(u=0!==(64&t.flags),null===(c=r.rendering))if(u)ou(r,!1);else{if(0!==Uu||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Ua(e))){for(t.flags|=64,ou(r,!1),null!==(u=c.updateQueue)&&(t.updateQueue=u,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(u=n).flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Fa,1&Fa.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Wu&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432)}else{if(!u)if(null!==(e=Ua(c))){if(t.flags|=64,u=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ou(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!qa)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Wu&&1073741824!==n&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Fa.current,fi(Fa,u?1&t|2:1&t),n):null;case 23:case 24:return xs(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function su(e){switch(e.tag){case 1:mi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Oa(),li(pi),li(di),Ya(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ma(e),null;case 13:return li(Fa),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Fa),null;case 4:return Oa(),null;case 10:return ra(e),null;case 23:case 24:return xs(),null;default:return null}}function cu(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function lu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Yo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Da(Aa.current);var o,u=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),u=[];break;case"option":a=ae(e,a),r=ae(e,r),u=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),u=[];break;case"textarea":a=ue(e,a),r=ue(e,r),u=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=jr)}for(f in Ie(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(s.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(u||(u=[]),u.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(u=u||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(u=u||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(s.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Nr("scroll",e),u||c===l||(u=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(u=u||[]).push(f,l))}n&&(u=u||[]).push("style",n);var f=u;(t.updateQueue=f)&&(t.flags|=4)}},$o=function(e,t,n,r){n!==r&&(t.flags|=4)};var fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$u||($u=!0,Ju=r),lu(0,t)},n}function du(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return lu(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Xu?Xu=new Set([this]):Xu.add(this),lu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var pu="function"===typeof WeakSet?WeakSet:Set;function vu(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){js(e,n)}else t.current=null}function yu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ji(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Hr(t.stateNode.containerInfo))}throw Error(o(163))}function mu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fs(n,e),Ms(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ji(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&_t(n)))))}throw Error(o(163))}function gu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ku(e,t){if(Ii&&"function"===typeof Ii.onCommitFiberUnmount)try{Ii.onCommitFiberUnmount(xi,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fs(t,n);else{r=t;try{i()}catch(a){js(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vu(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){js(t,a)}break;case 5:vu(t);break;case 4:Eu(e,t)}}function wu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function bu(e){return 5===e.tag||3===e.tag||4===e.tag}function _u(e){e:{for(var t=e.return;null!==t;){if(bu(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||bu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?xu(e,n,t):Iu(e,n,t)}function xu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=jr));else if(4!==r&&null!==(e=e.child))for(xu(e,t,n),e=e.sibling;null!==e;)xu(e,t,n),e=e.sibling}function Iu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Iu(e,t,n),e=e.sibling;null!==e;)Iu(e,t,n),e=e.sibling}function Eu(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var u=e,s=i,c=s;;)if(ku(u,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(u=n,s=i.stateNode,8===u.nodeType?u.parentNode.removeChild(s):u.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ku(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Tu(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ee(e,i),t=Ee(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?_e(n,s):"dangerouslySetInnerHTML"===u?me(n,s):"children"===u?ge(n,s):w(n,u,s,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,_t(n.containerInfo)));case 13:return null!==t.memoizedState&&(Ku=zi(),gu(t.child,!0)),void Su(t);case 19:return void Su(t);case 23:case 24:return void gu(t,null!==t.memoizedState)}throw Error(o(163))}function Su(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new pu),t.forEach((function(t){var r=Bs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cu(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Au=Math.ceil,Nu=b.ReactCurrentDispatcher,Ru=b.ReactCurrentOwner,Du=0,Pu=null,Ou=null,Lu=0,Mu=0,Fu=ci(0),Uu=0,Vu=null,ju=0,qu=0,Bu=0,zu=0,Gu=null,Ku=0,Wu=1/0;function Hu(){Wu=zi()+500}var Qu,Yu=null,$u=!1,Ju=null,Xu=null,Zu=!1,es=null,ts=90,ns=[],rs=[],is=null,as=0,os=null,us=-1,ss=0,cs=0,ls=null,fs=!1;function hs(){return 0!==(48&Du)?zi():-1!==us?us:us=zi()}function ds(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Gi()?1:2;if(0===ss&&(ss=ju),0!==$i.transition){0!==cs&&(cs=null!==Gu?Gu.pendingLanes:0),e=ss;var t=4186112&~cs;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Gi(),0!==(4&Du)&&98===e?e=jt(12,ss):e=jt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ss),e}function ps(e,t,n){if(50<as)throw as=0,os=null,Error(o(185));if(null===(e=vs(e,t)))return null;zt(e,t,n),e===Pu&&(Bu|=t,4===Uu&&gs(e,Lu));var r=Gi();1===t?0!==(8&Du)&&0===(48&Du)?ks(e):(ys(e,n),0===Du&&(Hu(),Qi())):(0===(4&Du)||98!==r&&99!==r||(null===is?is=new Set([e]):is.add(e)),ys(e,n)),Gu=e}function vs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ys(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var s=31-Gt(u),c=1<<s,l=a[s];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ft(c);var f=Mt;a[s]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);u&=~c}if(r=Ut(e,e===Pu?Lu:0),t=Mt,0===r)null!==n&&(n!==Fi&&Si(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fi&&Si(n)}15===t?(n=ks.bind(null,e),null===Vi?(Vi=[n],ji=Ti(Di,Yi)):Vi.push(n),n=Fi):14===t?n=Hi(99,ks.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Hi(n,ms.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function ms(e){if(us=-1,cs=ss=0,0!==(48&Du))throw Error(o(327));var t=e.callbackNode;if(Ls()&&e.callbackNode!==t)return null;var n=Ut(e,e===Pu?Lu:0);if(0===n)return null;var r=n,i=Du;Du|=16;var a=Ts();for(Pu===e&&Lu===r||(Hu(),Is(e,r));;)try{As();break}catch(s){Es(e,s)}if(na(),Nu.current=a,Du=i,null!==Ou?r=0:(Pu=null,Lu=0,r=Uu),0!==(ju&Bu))Is(e,0);else if(0!==r){if(2===r&&(Du|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(n=Vt(e))&&(r=Ss(e,n))),1===r)throw t=Vu,Is(e,0),gs(e,n),ys(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Ds(e);break;case 3:if(gs(e,n),(62914560&n)===n&&10<(r=Ku+500-zi())){if(0!==Ut(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Kr(Ds.bind(null,e),r);break}Ds(e);break;case 4:if(gs(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var u=31-Gt(n);a=1<<u,(u=r[u])>i&&(i=u),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Au(n/1960))-n)){e.timeoutHandle=Kr(Ds.bind(null,e),n);break}Ds(e);break;default:throw Error(o(329))}}return ys(e,zi()),e.callbackNode===t?ms.bind(null,e):null}function gs(e,t){for(t&=~zu,t&=~Bu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Gt(t),r=1<<n;e[n]=-1,t&=~r}}function ks(e){if(0!==(48&Du))throw Error(o(327));if(Ls(),e===Pu&&0!==(e.expiredLanes&Lu)){var t=Lu,n=Ss(e,t);0!==(ju&Bu)&&(n=Ss(e,t=Ut(e,t)))}else n=Ss(e,t=Ut(e,0));if(0!==e.tag&&2===n&&(Du|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(t=Vt(e))&&(n=Ss(e,t))),1===n)throw n=Vu,Is(e,0),gs(e,t),ys(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ds(e),ys(e,zi()),null}function ws(e,t){var n=Du;Du|=1;try{return e(t)}finally{0===(Du=n)&&(Hu(),Qi())}}function bs(e,t){var n=Du;Du&=-2,Du|=8;try{return e(t)}finally{0===(Du=n)&&(Hu(),Qi())}}function _s(e,t){fi(Fu,Mu),Mu|=t,ju|=t}function xs(){Mu=Fu.current,li(Fu)}function Is(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Wr(n)),null!==Ou)for(n=Ou.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Oa(),li(pi),li(di),Ya();break;case 5:Ma(r);break;case 4:Oa();break;case 13:case 19:li(Fa);break;case 10:ra(r);break;case 23:case 24:xs()}n=n.return}Pu=e,Ou=Ws(e.current,null),Lu=Mu=ju=t,Uu=0,Vu=null,zu=Bu=qu=0}function Es(e,t){for(;;){var n=Ou;try{if(na(),$a.current=Do,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Xa=0,to=eo=Za=null,ro=!1,Ru.current=null,null===n||null===n.return){Uu=1,Vu=t,Ou=null;break}e:{var a=e,o=n.return,u=n,s=t;if(t=Lu,u.flags|=2048,u.firstEffect=u.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&u.mode)){var l=u.alternate;l?(u.updateQueue=l.updateQueue,u.memoizedState=l.memoizedState,u.lanes=l.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=0!==(1&Fa.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var y=h.updateQueue;if(null===y){var m=new Set;m.add(c),h.updateQueue=m}else y.add(c);if(0===(2&h.mode)){if(h.flags|=64,u.flags|=16384,u.flags&=-2981,1===u.tag)if(null===u.alternate)u.tag=17;else{var g=la(-1,1);g.tag=2,fa(u,g)}u.lanes|=1;break e}s=void 0,u=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fu,s=new Set,k.set(c,s)):void 0===(s=k.get(c))&&(s=new Set,k.set(c,s)),!s.has(u)){s.add(u);var w=qs.bind(null,a,c,u);c.then(w,w)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);s=Error((H(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Uu&&(Uu=2),s=cu(s,u),h=o;do{switch(h.tag){case 3:a=s,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hu(0,a,t));break e;case 1:a=s;var b=h.type,_=h.stateNode;if(0===(64&h.flags)&&("function"===typeof b.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Xu||!Xu.has(_)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,du(h,a,t));break e}}h=h.return}while(null!==h)}Rs(n)}catch(x){t=x,Ou===n&&null!==n&&(Ou=n=n.return);continue}break}}function Ts(){var e=Nu.current;return Nu.current=Do,null===e?Do:e}function Ss(e,t){var n=Du;Du|=16;var r=Ts();for(Pu===e&&Lu===t||Is(e,t);;)try{Cs();break}catch(i){Es(e,i)}if(na(),Du=n,Nu.current=r,null!==Ou)throw Error(o(261));return Pu=null,Lu=0,Uu}function Cs(){for(;null!==Ou;)Ns(Ou)}function As(){for(;null!==Ou&&!Ci();)Ns(Ou)}function Ns(e){var t=Qu(e.alternate,e,Mu);e.memoizedProps=e.pendingProps,null===t?Rs(e):Ou=t,Ru.current=null}function Rs(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=uu(n,t,Mu)))return void(Ou=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Mu)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=su(t)))return n.flags&=2047,void(Ou=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ou=t);Ou=t=e}while(null!==t);0===Uu&&(Uu=5)}function Ds(e){var t=Gi();return Wi(99,Ps.bind(null,e,t)),null}function Ps(e,t){do{Ls()}while(null!==es);if(0!==(48&Du))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var u=e.eventTimes,s=e.expirationTimes;0<a;){var c=31-Gt(a),l=1<<c;i[c]=0,u[c]=-1,s[c]=-1,a&=~l}if(null!==is&&0===(24&r)&&is.has(e)&&is.delete(e),e===Pu&&(Ou=Pu=null,Lu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Du,Du|=32,Ru.current=null,qr=Yt,mr(u=yr())){if("selectionStart"in u)s={start:u.selectionStart,end:u.selectionEnd};else e:if(s=(s=u.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch(T){s=null;break e}var f=0,h=-1,d=-1,p=0,v=0,y=u,m=null;t:for(;;){for(var g;y!==s||0!==a&&3!==y.nodeType||(h=f+a),y!==c||0!==l&&3!==y.nodeType||(d=f+l),3===y.nodeType&&(f+=y.nodeValue.length),null!==(g=y.firstChild);)m=y,y=g;for(;;){if(y===u)break t;if(m===s&&++p===a&&(h=f),m===c&&++v===l&&(d=f),null!==(g=y.nextSibling))break;m=(y=m).parentNode}y=g}s=-1===h||-1===d?null:{start:h,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;Br={focusedElem:u,selectionRange:s},Yt=!1,ls=null,fs=!1,Yu=r;do{try{Os()}catch(T){if(null===Yu)throw Error(o(330));js(Yu,T),Yu=Yu.nextEffect}}while(null!==Yu);ls=null,Yu=r;do{try{for(u=e;null!==Yu;){var k=Yu.flags;if(16&k&&ge(Yu.stateNode,""),128&k){var w=Yu.alternate;if(null!==w){var b=w.ref;null!==b&&("function"===typeof b?b(null):b.current=null)}}switch(1038&k){case 2:_u(Yu),Yu.flags&=-3;break;case 6:_u(Yu),Yu.flags&=-3,Tu(Yu.alternate,Yu);break;case 1024:Yu.flags&=-1025;break;case 1028:Yu.flags&=-1025,Tu(Yu.alternate,Yu);break;case 4:Tu(Yu.alternate,Yu);break;case 8:Eu(u,s=Yu);var _=s.alternate;wu(s),null!==_&&wu(_)}Yu=Yu.nextEffect}}catch(T){if(null===Yu)throw Error(o(330));js(Yu,T),Yu=Yu.nextEffect}}while(null!==Yu);if(b=Br,w=yr(),k=b.focusedElem,u=b.selectionRange,w!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==u&&mr(k)&&(w=u.start,void 0===(b=u.end)&&(b=w),"selectionStart"in k?(k.selectionStart=w,k.selectionEnd=Math.min(b,k.value.length)):(b=(w=k.ownerDocument||document)&&w.defaultView||window).getSelection&&(b=b.getSelection(),s=k.textContent.length,_=Math.min(u.start,s),u=void 0===u.end?_:Math.min(u.end,s),!b.extend&&_>u&&(s=u,u=_,_=s),s=pr(k,_),a=pr(k,u),s&&a&&(1!==b.rangeCount||b.anchorNode!==s.node||b.anchorOffset!==s.offset||b.focusNode!==a.node||b.focusOffset!==a.offset)&&((w=w.createRange()).setStart(s.node,s.offset),b.removeAllRanges(),_>u?(b.addRange(w),b.extend(a.node,a.offset)):(w.setEnd(a.node,a.offset),b.addRange(w))))),w=[];for(b=k;b=b.parentNode;)1===b.nodeType&&w.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<w.length;k++)(b=w[k]).element.scrollLeft=b.left,b.element.scrollTop=b.top}Yt=!!qr,Br=qr=null,e.current=n,Yu=r;do{try{for(k=e;null!==Yu;){var x=Yu.flags;if(36&x&&mu(k,Yu.alternate,Yu),128&x){w=void 0;var I=Yu.ref;if(null!==I){var E=Yu.stateNode;Yu.tag,w=E,"function"===typeof I?I(w):I.current=w}}Yu=Yu.nextEffect}}catch(T){if(null===Yu)throw Error(o(330));js(Yu,T),Yu=Yu.nextEffect}}while(null!==Yu);Yu=null,Ui(),Du=i}else e.current=n;if(Zu)Zu=!1,es=e,ts=t;else for(Yu=r;null!==Yu;)t=Yu.nextEffect,Yu.nextEffect=null,8&Yu.flags&&((x=Yu).sibling=null,x.stateNode=null),Yu=t;if(0===(r=e.pendingLanes)&&(Xu=null),1===r?e===os?as++:(as=0,os=e):as=0,n=n.stateNode,Ii&&"function"===typeof Ii.onCommitFiberRoot)try{Ii.onCommitFiberRoot(xi,n,void 0,64===(64&n.current.flags))}catch(T){}if(ys(e,zi()),$u)throw $u=!1,e=Ju,Ju=null,e;return 0!==(8&Du)||Qi(),null}function Os(){for(;null!==Yu;){var e=Yu.alternate;fs||null===ls||(0!==(8&Yu.flags)?et(Yu,ls)&&(fs=!0):13===Yu.tag&&Cu(e,Yu)&&et(Yu,ls)&&(fs=!0));var t=Yu.flags;0!==(256&t)&&yu(e,Yu),0===(512&t)||Zu||(Zu=!0,Hi(97,(function(){return Ls(),null}))),Yu=Yu.nextEffect}}function Ls(){if(90!==ts){var e=97<ts?97:ts;return ts=90,Wi(e,Us)}return!1}function Ms(e,t){ns.push(t,e),Zu||(Zu=!0,Hi(97,(function(){return Ls(),null})))}function Fs(e,t){rs.push(t,e),Zu||(Zu=!0,Hi(97,(function(){return Ls(),null})))}function Us(){if(null===es)return!1;var e=es;if(es=null,0!==(48&Du))throw Error(o(331));var t=Du;Du|=32;var n=rs;rs=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],u=i.destroy;if(i.destroy=void 0,"function"===typeof u)try{u()}catch(c){if(null===a)throw Error(o(330));js(a,c)}}for(n=ns,ns=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var s=i.create;i.destroy=s()}catch(c){if(null===a)throw Error(o(330));js(a,c)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Du=t,Qi(),!0}function Vs(e,t,n){fa(e,t=hu(0,t=cu(n,t),1)),t=hs(),null!==(e=vs(e,1))&&(zt(e,1,t),ys(e,t))}function js(e,t){if(3===e.tag)Vs(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Vs(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r))){var i=du(n,e=cu(t,e),1);if(fa(n,i),i=hs(),null!==(n=vs(n,1)))zt(n,1,i),ys(n,i);else if("function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function qs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hs(),e.pingedLanes|=e.suspendedLanes&n,Pu===e&&(Lu&n)===n&&(4===Uu||3===Uu&&(62914560&Lu)===Lu&&500>zi()-Ku?Is(e,0):zu|=n),ys(e,t)}function Bs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Gi()?1:2:(0===ss&&(ss=ju),0===(t=qt(62914560&~ss))&&(t=4194304))),n=hs(),null!==(e=vs(e,t))&&(zt(e,t,n),ys(e,n))}function zs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Gs(e,t,n,r){return new zs(e,t,n,r)}function Ks(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ws(e,t){var n=e.alternate;return null===n?((n=Gs(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Hs(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Ks(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case I:return Qs(n.children,i,a,t);case M:u=8,i|=16;break;case E:u=8,i|=1;break;case T:return(e=Gs(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=a,e;case N:return(e=Gs(13,n,t,i)).type=N,e.elementType=N,e.lanes=a,e;case R:return(e=Gs(19,n,t,i)).elementType=R,e.lanes=a,e;case F:return Ys(n,i,a,t);case U:return(e=Gs(24,n,t,i)).elementType=U,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case C:u=9;break e;case A:u=11;break e;case D:u=14;break e;case P:u=16,r=null;break e;case O:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Gs(u,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qs(e,t,n,r){return(e=Gs(7,e,r,t)).lanes=n,e}function Ys(e,t,n,r){return(e=Gs(23,e,r,t)).elementType=F,e.lanes=n,e}function $s(e,t,n){return(e=Gs(6,e,null,t)).lanes=n,e}function Js(e,t,n){return(t=Gs(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xs(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Bt(0),this.expirationTimes=Bt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bt(0),this.mutableSourceEagerHydrationData=null}function Zs(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=hs(),u=ds(i);e:if(n){t:{if($e(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(mi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(mi(c)){n=wi(n,c,s);break e}}n=s}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),ps(i,u,a),u}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Xs(e,t,null!=n&&!0===n.hydrate),t=Gs(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,sa(t),e[ei]=n.current,Dr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}bs((function(){ec(t,o,e,i)}))}return tc(o)}function uc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return Zs(e,t,null,n)}Qu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Fo=!0;else{if(0===(n&r)){switch(Fo=!1,t.tag){case 3:Ho(t),Ha();break;case 5:La(t);break;case 1:mi(t.type)&&bi(t);break;case 4:Pa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi(Xi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Xo(e,t,n):(fi(Fa,1&Fa.current),null!==(t=au(e,t,n))?t.sibling:null);fi(Fa,1&Fa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return iu(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Fa,Fa.current),r)break;return null;case 23:case 24:return t.lanes=0,Bo(e,t,n)}return au(e,t,n)}Fo=0!==(16384&e.flags)}else Fo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=yi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var a=!0;bi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,sa(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&ya(t,r,u,e),i.updater=ma,t.stateNode=i,i._reactInternals=t,ba(t,r,e,n),t=Wo(null,t,r,!0,a,n)}else t.tag=0,Uo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Ks(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===D)return 14}return 2}(i),e=Ji(i,e),a){case 0:t=Go(null,t,i,e,n);break e;case 1:t=Ko(null,t,i,e,n);break e;case 11:t=Vo(null,t,i,e,n);break e;case 14:t=jo(null,t,i,Ji(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Go(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 3:if(Ho(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ha(),t=au(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(ja=Qr(t.stateNode.containerInfo.firstChild),Va=t,a=qa=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Qa.push(a);for(n=Sa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Uo(e,t,r,n),Ha();t=t.child}return t;case 5:return La(t),null===e&&Ga(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,Gr(r,i)?u=null:null!==a&&Gr(r,a)&&(t.flags|=16),zo(e,t),Uo(e,t,u,n),t.child;case 6:return null===e&&Ga(t),null;case 13:return Xo(e,t,n);case 4:return Pa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ta(t,null,r,n):Uo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Vo(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 7:return Uo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Uo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(fi(Xi,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=lr(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!pi.current){t=au(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=la(-1,n&-n)).tag=2,fa(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ia(s.return,n),c.lanes|=n;break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Uo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Uo(e,t,r,n),t.child;case 14:return a=Ji(i=t.type,t.pendingProps),jo(e,t,i,a=Ji(i.type,a),r,n);case 15:return qo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ji(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mi(r)?(e=!0,bi(t)):e=!1,aa(t,n),ka(t,r,i),ba(t,r,i,n),Wo(null,t,r,!0,e,n);case 19:return iu(e,t,n);case 23:case 24:return Bo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(ps(e,4,hs()),rc(e,4))},nt=function(e){13===e.tag&&(ps(e,67108864,hs()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hs(),n=ds(e);ps(e,n,t),rc(e,n)}},it=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));J(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Pe=ws,Oe=function(e,t,n,r,i){var a=Du;Du|=4;try{return Wi(98,e.bind(null,t,n,r,i))}finally{0===(Du=a)&&(Hu(),Qi())}},Le=function(){0===(49&Du)&&(function(){if(null!==is){var e=is;is=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ys(e,zi())}))}Qi()}(),Ls())},Me=function(e,t){var n=Du;Du|=2;try{return e(t)}finally{0===(Du=n)&&(Hu(),Qi())}};var sc={Events:[ri,ii,ai,Re,De,Ls,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{xi=fc.inject(lc),Ii=fc}catch(ye){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sc,t.createPortal=uc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Du;if(0!==(48&n))return e(t);Du|=1;try{if(e)return Wi(99,e.bind(null,t))}finally{Du=n,Qi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(bs((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=ws,t.unstable_createPortal=function(e,t){return uc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function m(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=y.prototype;var k=g.prototype=new m;k.constructor=g,r(k,y.prototype),k.isPureReactComponent=!0;var w={current:null},b=Object.prototype.hasOwnProperty,_={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var r,a={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,r)&&!_.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:i,type:e,key:o,ref:u,props:a,_owner:w.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function S(e,t,n,r,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case i:case a:s=!0}}if(s)return o=o(s=e),e=""===r?"."+T(s,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),S(o,t,n,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+T(u=e[c],c);s+=S(u,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=S(u=u.value,t,n,l=r+T(u,c++),o);else if("object"===u)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function C(e,t,n){if(null==e)return e;var r=[],i=0;return S(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var N={current:null};function R(){var e=N.current;if(null===e)throw Error(d(321));return e}var D={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error(d(143));return e}},t.Component=y,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)b.call(t,l)&&!_.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:u,props:a,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return R().useCallback(e,t)},t.useContext=function(e,t){return R().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return R().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return R().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return R().useLayoutEffect(e,t)},t.useMemo=function(e,t){return R().useMemo(e,t)},t.useReducer=function(e,t,n){return R().useReducer(e,t,n)},t.useRef=function(e){return R().useRef(e)},t.useState=function(e){return R().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(R){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var k={};s(k,a,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(A([])));b&&b!==n&&r.call(b,a)&&(k=b);var _=g.prototype=y.prototype=Object.create(k);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function A(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:N}}function N(){return{value:t,done:!0}}return m.prototype=g,s(_,"constructor",g),s(g,"constructor",m),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},x(I.prototype),s(I.prototype,o,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new I(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(_),s(_,u,"Generator"),s(_,a,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,y=null,m=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,b=w.port2;w.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();k=e+g;try{y(!0,e)?b.postMessage(null):(v=!1,y=null)}catch(n){throw b.postMessage(null),n}}else v=!1},n=function(e){y=e,v||(v=!0,b.postMessage(null))},r=function(e,n){m=h((function(){e(t.unstable_now())}),n)},i=function(){d(m),m=-1}}function _(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function x(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>E(o,n))void 0!==s&&0>E(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>E(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],S=[],C=1,A=null,N=3,R=!1,D=!1,P=!1;function O(e){for(var t=x(S);null!==t;){if(null===t.callback)I(S);else{if(!(t.startTime<=e))break;I(S),t.sortIndex=t.expirationTime,_(T,t)}t=x(S)}}function L(e){if(P=!1,O(e),!D)if(null!==x(T))D=!0,n(M);else{var t=x(S);null!==t&&r(L,t.startTime-e)}}function M(e,n){D=!1,P&&(P=!1,i()),R=!0;var a=N;try{for(O(n),A=x(T);null!==A&&(!(A.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=A.callback;if("function"===typeof o){A.callback=null,N=A.priorityLevel;var u=o(A.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?A.callback=u:A===x(T)&&I(T),O(n)}else I(T);A=x(T)}if(null!==A)var s=!0;else{var c=x(S);null!==c&&r(L,c.startTime-n),s=!1}return s}finally{A=null,N=a,R=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){D||R||(D=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return x(T)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var n=N;N=t;try{return e()}finally{N=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=N;N=e;try{return t()}finally{N=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?u+o:u:o=u,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>u?(e.sortIndex=o,_(S,e),null===x(T)&&e===x(S)&&(P?i():P=!0,r(L,o-u))):(e.sortIndex=s,_(T,e),D||R||(D=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=N;return function(){var n=N;N=t;try{return e.apply(this,arguments)}finally{N=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".b701888c.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="react-app:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/decrasher/react.git/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkreact_app=self.webpackChunkreact_app||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return X},SDK_VERSION:function(){return Xe},_DEFAULT_ENTRY_NAME:function(){return Ve},_addComponent:function(){return ze},_addOrOverwriteComponent:function(){return Ge},_apps:function(){return qe},_clearComponents:function(){return Qe},_components:function(){return Be},_getProvider:function(){return We},_registerComponent:function(){return Ke},_removeServiceInstance:function(){return He},deleteApp:function(){return nt},getApp:function(){return et},getApps:function(){return tt},initializeApp:function(){return Ze},onLog:function(){return at},registerVersion:function(){return it},setLogLevel:function(){return ot}});var t=n(791),r=n(164);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if(t&&("object"===f(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function p(e){var t=l();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}var v=n(184),y=function(e){s(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return o(n,[{key:"shouldComponentUpdate",value:function(e,t){return console.log("===>TOC render shouldComponentUpdate",e.data,this.props.data),this.props.data!==e.data}},{key:"render",value:function(){for(var e=[],t=this.props.data,n=0;n<t.length;)e.push((0,v.jsx)("li",{children:(0,v.jsx)("a",{href:"/content/"+t[n].id,"data-id":t[n].id,onClick:function(e){e.preventDefault(),this.props.onChangePage(e.target.dataset.id)}.bind(this),children:t[n].title})},t[n].id)),n+=1;return(0,v.jsx)("nav",{children:(0,v.jsx)("ul",{children:e})})}}]),n}(t.Component),m=y,g=function(e){s(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return o(n,[{key:"render",value:function(){return(0,v.jsxs)("article",{children:[(0,v.jsx)("h2",{children:this.props.title}),this.props.desc]})}}]),n}(t.Component),k=g,w=function(e){s(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return o(n,[{key:"render",value:function(){return console.log("CreatContent render"),(0,v.jsxs)("article",{children:[(0,v.jsx)("h2",{children:"Create"}),(0,v.jsxs)("form",{action:"/create_process",method:"post",onSubmit:function(e){e.preventDefault(),this.props.onSubmit(e.target.title.value,e.target.desc.value),alert("Summit!!")}.bind(this),children:[(0,v.jsx)("p",{children:(0,v.jsx)("input",{type:"text",name:"title",placeholder:"title"})}),(0,v.jsx)("p",{children:(0,v.jsx)("textarea",{name:"desc",placeholder:"description"})}),(0,v.jsx)("p",{children:(0,v.jsx)("input",{type:"submit"})})]})]})}}]),n}(t.Component),b=w;function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){s(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).state={id:r.props.id,title:r.props.data.title,desc:r.props.data.desc},r}return o(n,[{key:"inputFormHandler",value:function(e){this.setState(_({},e.target.name,e.target.value))}},{key:"render",value:function(){return console.log(this.props.data),console.log("UpdateContent render"),(0,v.jsxs)("article",{children:[(0,v.jsx)("h2",{children:"Update"}),(0,v.jsxs)("form",{action:"/create_process",method:"post",onSubmit:function(e){e.preventDefault(),this.props.onSubmit(this.state.id,this.state.title,this.state.desc),alert("Summit!!")}.bind(this),children:[(0,v.jsx)("input",{type:"hidden",name:"id",value:this.state.id}),(0,v.jsx)("p",{children:(0,v.jsx)("input",{type:"text",name:"title",placeholder:"title",value:this.state.title,onChange:this.inputFormHandler.bind(this)})}),(0,v.jsx)("p",{children:(0,v.jsx)("textarea",{onChange:this.inputFormHandler.bind(this),name:"desc",placeholder:"description",value:this.state.desc})}),(0,v.jsx)("p",{children:(0,v.jsx)("input",{type:"submit"})})]})]})}}]),n}(t.Component),I=function(e){s(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return o(n,[{key:"render",value:function(){return(0,v.jsxs)("header",{children:[(0,v.jsx)("h1",{children:(0,v.jsx)("a",{href:"/",onClick:function(e){e.preventDefault(),this.props.onChangePage()}.bind(this),children:this.props.title})}),this.props.sub]})}}]),n}(t.Component),E=I,T=function(e){s(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return o(n,[{key:"render",value:function(){return(0,v.jsxs)("ul",{children:[(0,v.jsx)("li",{children:(0,v.jsx)("a",{href:"/create",onClick:function(e){e.preventDefault(),this.props.onChangeMode("create")}.bind(this),children:"create"})}),(0,v.jsx)("li",{children:(0,v.jsx)("a",{href:"/update",onClick:function(e){e.preventDefault(),this.props.onChangeMode("update")}.bind(this),children:"update"})}),(0,v.jsx)("li",{children:(0,v.jsx)("input",{onClick:function(e){e.preventDefault(),this.props.onChangeMode("delete")}.bind(this),type:"button",value:"delete"})})]})}}]),n}(t.Component),S=T;function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t){if(e){if("string"===typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}function N(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=A(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function R(e){if(Array.isArray(e))return e}function D(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function P(e,t){return R(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||A(e,t)||D()}function O(e,t,n){return O=l()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&u(i,n.prototype),i},O.apply(null,arguments)}function L(e){var t="function"===typeof Map?new Map:void 0;return L=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return O(e,arguments,c(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,e)},L(e)}var M=n(757),F=n.n(M),U=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},V={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(U(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},j=function(e){return function(e){var t=U(e);return V.encodeByteArray(t,!0)}(e).replace(/\./g,"")},q=function(e){try{return V.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function B(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=B(e[n],t[n]));return e}var z=function(){function e(){var t=this;i(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return o(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function G(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[j(JSON.stringify({alg:"none",type:"JWT"})),j(JSON.stringify(a)),""].join(".")}function K(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function W(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(K())}function H(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Q(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Y(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function $(){var e=K();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function J(){return"object"===typeof indexedDB}var X=function(e){s(n,e);var t=p(n);function n(e,r,a){var o;return i(this,n),(o=t.call(this,r)).code=e,o.customData=a,o.name="FirebaseError",Object.setPrototypeOf(h(o),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(h(o),Z.prototype.create),o}return o(n)}(L(Error)),Z=function(){function e(t,n,r){i(this,e),this.service=t,this.serviceName=n,this.errors=r}return o(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?ee(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new X(n,a,t);return o}}]),e}();function ee(e,t){return e.replace(te,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var te=/\{\$([^}]+)}/g;function ne(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function re(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(ie(u)&&ie(s)){if(!re(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function ie(e){return null!==e&&"object"===typeof e}function ae(e){for(var t=[],n=function(){var e=P(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function oe(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=P(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function ue(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function se(e,t){var n=new ce(e,t);return n.subscribe.bind(n)}var ce=function(){function e(t,n){var r=this;i(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return o(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=N(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=le),void 0===r.error&&(r.error=le),void 0===r.complete&&(r.complete=le);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function le(){}function fe(e){return e&&e._delegate?e._delegate:e}function he(e,t){return new Promise((function(n,r){e.onsuccess=function(e){n(e.target.result)},e.onerror=function(e){var n;r("".concat(t,": ").concat(null===(n=e.target.error)||void 0===n?void 0:n.message))}}))}var de=function(){function e(t){i(this,e),this._db=t,this.objectStoreNames=this._db.objectStoreNames}return o(e,[{key:"transaction",value:function(e,t){return new pe(this._db.transaction.call(this._db,e,t))}},{key:"createObjectStore",value:function(e,t){return new ve(this._db.createObjectStore(e,t))}},{key:"close",value:function(){this._db.close()}}]),e}(),pe=function(){function e(t){var n=this;i(this,e),this._transaction=t,this.complete=new Promise((function(e,t){n._transaction.oncomplete=function(){e()},n._transaction.onerror=function(){t(n._transaction.error)},n._transaction.onabort=function(){t(n._transaction.error)}}))}return o(e,[{key:"objectStore",value:function(e){return new ve(this._transaction.objectStore(e))}}]),e}(),ve=function(){function e(t){i(this,e),this._store=t}return o(e,[{key:"index",value:function(e){return new ye(this._store.index(e))}},{key:"createIndex",value:function(e,t,n){return new ye(this._store.createIndex(e,t,n))}},{key:"get",value:function(e){return he(this._store.get(e),"Error reading from IndexedDB")}},{key:"put",value:function(e,t){return he(this._store.put(e,t),"Error writing to IndexedDB")}},{key:"delete",value:function(e){return he(this._store.delete(e),"Error deleting from IndexedDB")}},{key:"clear",value:function(){return he(this._store.clear(),"Error clearing IndexedDB object store")}}]),e}(),ye=function(){function e(t){i(this,e),this._index=t}return o(e,[{key:"get",value:function(e){return he(this._index.get(e),"Error reading from IndexedDB")}}]),e}();function me(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ge(e){return function(e){if(Array.isArray(e))return C(e)}(e)||me(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function we(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ke(a,r,i,o,u,"next",e)}function u(e){ke(a,r,i,o,u,"throw",e)}o(void 0)}))}}var be=function(){function e(t,n,r){i(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return o(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),_e="[DEFAULT]",xe=function(){function e(t,n){i(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return o(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new z;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:_e})}catch(s){}var t,n=N(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=P(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=we(M.mark((function e(){var t;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(ge(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),ge(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=N(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=P(i.value,2),s=u[0],c=u[1],l=this.normalizeInstanceIdentifier(s);r===l&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=N(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o_){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===_e?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o_){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e;return this.component?this.component.multipleInstances?e:_e:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Ie,Ee,Te=function(){function e(t){i(this,e),this.name=t,this.providers=new Map}return o(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new xe(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Se=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ee||(Ee={}));var Ce,Ae,Ne={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},Re=Ee.INFO,De=(_(Ie={},Ee.DEBUG,"log"),_(Ie,Ee.VERBOSE,"log"),_(Ie,Ee.INFO,"info"),_(Ie,Ee.WARN,"warn"),_(Ie,Ee.ERROR,"error"),Ie),Pe=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=De[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Oe=function(){function e(t){i(this,e),this.name=t,this._logLevel=Re,this._logHandler=Pe,this._userLogHandler=null,Se.push(this)}return o(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Ee))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Ne[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ee.DEBUG].concat(t)),this._logHandler.apply(this,[this,Ee.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ee.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Ee.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ee.INFO].concat(t)),this._logHandler.apply(this,[this,Ee.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ee.WARN].concat(t)),this._logHandler.apply(this,[this,Ee.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ee.ERROR].concat(t)),this._logHandler.apply(this,[this,Ee.ERROR].concat(t))}}]),e}();var Le=function(){function e(t){i(this,e),this.container=t}return o(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Me="@firebase/app",Fe="0.7.20",Ue=new Oe("@firebase/app"),Ve="[DEFAULT]",je=(_(Ce={},Me,"fire-core"),_(Ce,"@firebase/app-compat","fire-core-compat"),_(Ce,"@firebase/analytics","fire-analytics"),_(Ce,"@firebase/analytics-compat","fire-analytics-compat"),_(Ce,"@firebase/app-check","fire-app-check"),_(Ce,"@firebase/app-check-compat","fire-app-check-compat"),_(Ce,"@firebase/auth","fire-auth"),_(Ce,"@firebase/auth-compat","fire-auth-compat"),_(Ce,"@firebase/database","fire-rtdb"),_(Ce,"@firebase/database-compat","fire-rtdb-compat"),_(Ce,"@firebase/functions","fire-fn"),_(Ce,"@firebase/functions-compat","fire-fn-compat"),_(Ce,"@firebase/installations","fire-iid"),_(Ce,"@firebase/installations-compat","fire-iid-compat"),_(Ce,"@firebase/messaging","fire-fcm"),_(Ce,"@firebase/messaging-compat","fire-fcm-compat"),_(Ce,"@firebase/performance","fire-perf"),_(Ce,"@firebase/performance-compat","fire-perf-compat"),_(Ce,"@firebase/remote-config","fire-rc"),_(Ce,"@firebase/remote-config-compat","fire-rc-compat"),_(Ce,"@firebase/storage","fire-gcs"),_(Ce,"@firebase/storage-compat","fire-gcs-compat"),_(Ce,"@firebase/firestore","fire-fst"),_(Ce,"@firebase/firestore-compat","fire-fst-compat"),_(Ce,"fire-js","fire-js"),_(Ce,"firebase","fire-js-all"),Ce),qe=new Map,Be=new Map;function ze(e,t){try{e.container.addComponent(t)}catch(n){Ue.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ge(e,t){e.container.addOrOverwriteComponent(t)}function Ke(e){var t=e.name;if(Be.has(t))return Ue.debug("There were multiple attempts to register component ".concat(t,".")),!1;Be.set(t,e);var n,r=N(qe.values());try{for(r.s();!(n=r.n()).done;){ze(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function We(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function He(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ve;We(e,t).clearInstance(n)}function Qe(){Be.clear()}var Ye=(_(Ae={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),_(Ae,"bad-app-name","Illegal App name: '{$appName}"),_(Ae,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),_(Ae,"app-deleted","Firebase App named '{$appName}' already deleted"),_(Ae,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),_(Ae,"invalid-log-argument","First argument to `onLog` must be null or a function."),_(Ae,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),_(Ae,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),_(Ae,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),_(Ae,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),Ae),$e=new Z("app","Firebase",Ye),Je=function(){function e(t,n,r){var a=this;i(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new be("app",(function(){return a}),"PUBLIC"))}return o(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw $e.create("app-deleted",{appName:this._name})}}]),e}(),Xe="9.6.10";function Ze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Ve,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw $e.create("bad-app-name",{appName:String(i)});var a=qe.get(i);if(a){if(re(e,a.options)&&re(r,a.config))return a;throw $e.create("duplicate-app",{appName:i})}var o,u=new Te(i),s=N(Be.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Je(e,r,u);return qe.set(i,l),l}function et(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=qe.get(e);if(!t)throw $e.create("no-app",{appName:e});return t}function tt(){return Array.from(qe.values())}function nt(e){return rt.apply(this,arguments)}function rt(){return(rt=we(M.mark((function e(t){var n;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!qe.has(n)){e.next=6;break}return qe.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(e,t,n){var r,i=null!==(r=je[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ue.warn(u.join(" "))}Ke(new be("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function at(e,t){if(null!==e&&"function"!==typeof e)throw $e.create("invalid-log-argument");!function(e,t){var n,r=N(Se);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Ne[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Ee[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function ot(e){var t;t=e,Se.forEach((function(e){e.setLogLevel(t)}))}var ut="firebase-heartbeat-store",st=null;function ct(){var e,t,n;return st||(st=(e="firebase-heartbeat-database",t=1,n=function(e,t){0===t&&e.createObjectStore(ut)},new Promise((function(r,i){try{var a=indexedDB.open(e,t);a.onsuccess=function(e){r(new de(e.target.result))},a.onerror=function(e){var t;i("Error opening indexedDB: ".concat(null===(t=e.target.error)||void 0===t?void 0:t.message))},a.onupgradeneeded=function(e){n(new de(a.result),e.oldVersion,e.newVersion,new pe(a.transaction))}}catch(o){i("Error opening indexedDB: ".concat(o.message))}}))).catch((function(e){throw $e.create("storage-open",{originalErrorMessage:e.message})}))),st}function lt(e){return ft.apply(this,arguments)}function ft(){return ft=we(M.mark((function e(t){var n;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ct();case 3:return n=e.sent,e.abrupt("return",n.transaction(ut).objectStore(ut).get(pt(t)));case 7:throw e.prev=7,e.t0=e.catch(0),$e.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),ft.apply(this,arguments)}function ht(e,t){return dt.apply(this,arguments)}function dt(){return dt=we(M.mark((function e(t,n){var r,i,a;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ct();case 3:return r=e.sent,i=r.transaction(ut,"readwrite"),a=i.objectStore(ut),e.next=8,a.put(n,pt(t));case 8:return e.abrupt("return",i.complete);case 11:throw e.prev=11,e.t0=e.catch(0),$e.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),dt.apply(this,arguments)}function pt(e){return"".concat(e.name,"!").concat(e.options.appId)}var vt=function(){function e(t){var n=this;i(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new wt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return o(e,[{key:"triggerHeartbeat",value:function(){var e=we(M.mark((function e(){var t,n,r;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=yt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=we(M.mark((function e(){var t,n,r,i,a;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=yt(),n=mt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=j(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function yt(){return(new Date).toISOString().substring(0,10)}function mt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=N(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),bt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),bt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var gt,kt,wt=function(){function e(t){i(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return o(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=we(M.mark((function e(){return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(J()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=we(M.mark((function e(){var t;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,lt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=we(M.mark((function e(t){var n,r;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ht(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=we(M.mark((function e(t){var n,r;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ht(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(ge(r.heartbeats),ge(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function bt(e){return j(JSON.stringify({version:2,heartbeats:e})).length}gt="",Ke(new be("platform-logger",(function(e){return new Le(e)}),"PRIVATE")),Ke(new be("heartbeat",(function(e){return new vt(e)}),"PRIVATE")),it(Me,Fe,gt),it(Me,Fe,"esm2017"),it("fire-js","");var _t=function(){function e(t,n){var r=this;i(this,e),this._delegate=t,this.firebase=n,ze(t,new be("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return o(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),nt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ve;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ve;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){ze(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Ge(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),xt=(_(kt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),_(kt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),kt),It=new Z("app-compat","Firebase",xt);var Et=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Ze(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(ne(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:it,setLogLevel:ot,onLog:at,apps:null,SDK_VERSION:Xe,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Ke(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw It.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&B(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!ne(n,e=e||Ve))throw It.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(_t);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){B(n,e)},createSubscribe:se,ErrorFactory:Z,deepExtend:B}),n}(),Tt=new Oe("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Tt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var St=self.firebase.SDK_VERSION;St&&St.indexOf("LITE")>=0&&Tt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Ct=Et;!function(e){it("@firebase/app-compat","0.1.21",e)}();function At(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}function Nt(){return Nt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=At(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Nt.apply(this,arguments)}Ct.registerVersion("firebase","9.6.10","app-compat");function Rt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Dt;Object.create;var Pt="facebook.com",Ot="github.com",Lt="google.com",Mt="password",Ft="twitter.com",Ut="EMAIL_SIGNIN",Vt="PASSWORD_RESET",jt="RECOVER_EMAIL",qt="REVERT_SECOND_FACTOR_ADDITION",Bt="VERIFY_AND_CHANGE_EMAIL",zt="VERIFY_EMAIL";function Gt(){return _({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Kt=function(){var e;return _(e={},"admin-restricted-operation","This operation is restricted to administrators only."),_(e,"argument-error",""),_(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),_(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),_(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),_(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),_(e,"cordova-not-ready","Cordova framework is not ready."),_(e,"cors-unsupported","This browser is not supported."),_(e,"credential-already-in-use","This credential is already associated with a different user account."),_(e,"custom-token-mismatch","The custom token corresponds to a different audience."),_(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),_(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),_(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),_(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),_(e,"email-already-in-use","The email address is already in use by another account."),_(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),_(e,"expired-action-code","The action code has expired."),_(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),_(e,"internal-error","An internal AuthError has occurred."),_(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),_(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),_(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),_(e,"invalid-auth-event","An internal AuthError has occurred."),_(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),_(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),_(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),_(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),_(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),_(e,"invalid-email","The email address is badly formatted."),_(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),_(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),_(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),_(e,"invalid-credential","The supplied auth credential is malformed or has expired."),_(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),_(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),_(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),_(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),_(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),_(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),_(e,"wrong-password","The password is invalid or the user does not have a password."),_(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),_(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),_(e,"invalid-provider-id","The specified provider ID is invalid."),_(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),_(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),_(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),_(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),_(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),_(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),_(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),_(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),_(e,"missing-continue-uri","A continue URL must be provided in the request."),_(e,"missing-iframe-start","An internal AuthError has occurred."),_(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),_(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),_(e,"missing-multi-factor-info","No second factor identifier is provided."),_(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),_(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),_(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),_(e,"app-deleted","This instance of FirebaseApp has been deleted."),_(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),_(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),_(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),_(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),_(e,"no-auth-event","An internal AuthError has occurred."),_(e,"no-such-provider","User was not linked to an account with the given provider."),_(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),_(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),_(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),_(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),_(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),_(e,"provider-already-linked","User can only be linked to one identity for the given provider."),_(e,"quota-exceeded","The project's quota for this operation has been exceeded."),_(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),_(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),_(e,"rejected-credential","The request contains malformed or mismatching credentials."),_(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),_(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),_(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),_(e,"timeout","The operation has timed out."),_(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),_(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),_(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),_(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),_(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),_(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),_(e,"unverified-email","The operation requires a verified email."),_(e,"user-cancelled","The user did not grant your application the permissions it requested."),_(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),_(e,"user-disabled","The user account has been disabled by an administrator."),_(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),_(e,"user-signed-out",""),_(e,"weak-password","The password must be 6 characters long or more."),_(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),_(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Wt=Gt,Ht=new Z("auth","Firebase",Gt()),Qt=new Oe("@firebase/auth");function Yt(e){if(Qt.logLevel<=Ee.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Qt.error.apply(Qt,["Auth (".concat(Xe,"): ").concat(e)].concat(n))}}function $t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw en.apply(void 0,[e].concat(n))}function Jt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return en.apply(void 0,[e].concat(n))}function Xt(e,t,n){var r=Object.assign(Object.assign({},Wt()),_({},t,n));return new Z("auth","Firebase",r).create(t,{appName:e.name})}function Zt(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&$t(e,"argument-error"),Xt(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function en(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=ge(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(ge(o)))}return Ht.create.apply(Ht,[e].concat(n))}function tn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw en.apply(void 0,[t].concat(r))}}function nn(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Yt(t),new Error(t)}function rn(e,t){e||nn(t)}var an=new Map;function on(e){rn(e instanceof Function,"Expected a class definition");var t=an.get(e);return t?(rn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,an.set(e,t),t)}function un(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function sn(){return"http:"===cn()||"https:"===cn()}function cn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var ln=function(){function e(t,n){i(this,e),this.shortDelay=t,this.longDelay=n,rn(n>t,"Short delay should be less than long delay!"),this.isMobile=W()||Y()}return o(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(sn()||Q()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function fn(e,t){rn(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var hn=function(){function e(){i(this,e)}return o(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void nn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void nn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void nn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),dn=(_(Dt={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),_(Dt,"MISSING_CUSTOM_TOKEN","internal-error"),_(Dt,"INVALID_IDENTIFIER","invalid-email"),_(Dt,"MISSING_CONTINUE_URI","internal-error"),_(Dt,"INVALID_PASSWORD","wrong-password"),_(Dt,"MISSING_PASSWORD","internal-error"),_(Dt,"EMAIL_EXISTS","email-already-in-use"),_(Dt,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),_(Dt,"INVALID_IDP_RESPONSE","invalid-credential"),_(Dt,"INVALID_PENDING_TOKEN","invalid-credential"),_(Dt,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),_(Dt,"MISSING_REQ_TYPE","internal-error"),_(Dt,"EMAIL_NOT_FOUND","user-not-found"),_(Dt,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),_(Dt,"EXPIRED_OOB_CODE","expired-action-code"),_(Dt,"INVALID_OOB_CODE","invalid-action-code"),_(Dt,"MISSING_OOB_CODE","internal-error"),_(Dt,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),_(Dt,"INVALID_ID_TOKEN","invalid-user-token"),_(Dt,"TOKEN_EXPIRED","user-token-expired"),_(Dt,"USER_NOT_FOUND","user-token-expired"),_(Dt,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),_(Dt,"INVALID_CODE","invalid-verification-code"),_(Dt,"INVALID_SESSION_INFO","invalid-verification-id"),_(Dt,"INVALID_TEMPORARY_PROOF","invalid-credential"),_(Dt,"MISSING_SESSION_INFO","missing-verification-id"),_(Dt,"SESSION_EXPIRED","code-expired"),_(Dt,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),_(Dt,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),_(Dt,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),_(Dt,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),_(Dt,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),_(Dt,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),_(Dt,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),_(Dt,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),_(Dt,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),_(Dt,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),_(Dt,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Dt),pn=new ln(3e4,6e4);function vn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function yn(e,t,n,r){return mn.apply(this,arguments)}function mn(){return mn=we(F().mark((function e(t,n,r,i){var a,o=arguments;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",gn(t,a,we(F().mark((function e(){var a,o,u,s;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=ae(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",hn.fetch()(_n(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),mn.apply(this,arguments)}function gn(e,t,n){return kn.apply(this,arguments)}function kn(){return(kn=we(F().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},dn),n),e.prev=2,a=new xn(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw In(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=P(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw In(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=25;break}throw In(t,"email-already-in-use",u);case 25:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=30;break}throw Xt(t,d,h);case 30:$t(t,d);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof X)){e.next=37;break}throw e.t0;case 37:$t(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])})))).apply(this,arguments)}function wn(e,t,n,r){return bn.apply(this,arguments)}function bn(){return bn=we(F().mark((function e(t,n,r,i){var a,o,u=arguments;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,yn(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&$t(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),bn.apply(this,arguments)}function _n(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?fn(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var xn=function(){function e(t){var n=this;i(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Jt(n.auth,"network-request-failed"))}),pn.get())}))}return o(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function In(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Jt(e,t,r);return i.customData._tokenResponse=n,i}function En(e,t){return Tn.apply(this,arguments)}function Tn(){return(Tn=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sn(e,t){return Cn.apply(this,arguments)}function Cn(){return(Cn=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function An(e,t){return Nn.apply(this,arguments)}function Nn(){return(Nn=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rn(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Dn(){return Dn=we(F().mark((function e(t){var n,r,i,a,o,u,s=arguments;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=fe(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,tn((a=On(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Rn(Pn(a.auth_time)),issuedAtTime:Rn(Pn(a.iat)),expirationTime:Rn(Pn(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Dn.apply(this,arguments)}function Pn(e){return 1e3*Number(e)}function On(e){var t=P(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Yt("JWT malformed, contained fewer than 3 sections"),null;try{var a=q(r);return a?JSON.parse(a):(Yt("Failed to decode base64 JWT payload"),null)}catch(o){return Yt("Caught error parsing JWT payload as JSON",o),null}}function Ln(e,t){return Mn.apply(this,arguments)}function Mn(){return Mn=we(F().mark((function e(t,n){var r=arguments;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof X&&Fn(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Mn.apply(this,arguments)}function Fn(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Un=function(){function e(t){i(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return o(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(we(F().mark((function t(){return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=we(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Vn=function(){function e(t,n){i(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return o(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Rn(this.lastLoginAt),this.creationTime=Rn(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function jn(e){return qn.apply(this,arguments)}function qn(){return qn=we(F().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Ln(t,An(r,{idToken:i}));case 6:tn(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Gn(o.providerUserInfo):[],s=zn(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Vn(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),qn.apply(this,arguments)}function Bn(){return(Bn=we(F().mark((function e(t){var n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=fe(t),e.next=3,jn(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zn(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(ge(n),ge(t))}function Gn(e){return e.map((function(e){var t=e.providerId,n=Rt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Kn(e,t){return Wn.apply(this,arguments)}function Wn(){return(Wn=we(F().mark((function e(t,n){var r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gn(t,{},we(F().mark((function e(){var r,i,a,o,u,s;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ae({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=_n(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",hn.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hn=function(){function e(){i(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return o(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){tn(e.idToken,"internal-error"),tn("undefined"!==typeof e.idToken,"internal-error"),tn("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=On(e);return tn(t,"internal-error"),tn("undefined"!==typeof t.exp,"internal-error"),tn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=we(F().mark((function e(t){var n,r=arguments;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],tn(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=we(F().mark((function e(t,n){var r,i,a,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kn(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return nn("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(tn("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(tn("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(tn("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Qn(e,t){tn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Yn=function(){function e(t){i(this,e);var n=t.uid,r=t.auth,a=t.stsTokenManager,o=Rt(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Un(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?ge(o.providerData):[],this.metadata=new Vn(o.createdAt||void 0,o.lastLoginAt||void 0)}return o(e,[{key:"getIdToken",value:function(){var e=we(F().mark((function e(t){var n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ln(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(tn(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Dn.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Bn.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(tn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){tn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=we(F().mark((function e(t){var n,r,i=arguments;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,jn(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=we(F().mark((function e(){var t;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Ln(this,En(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;tn(k&&x,t,"internal-error");var I=Hn.fromJSON(this.name,x);tn("string"===typeof k,t,"internal-error"),Qn(f,t.name),Qn(h,t.name),tn("boolean"===typeof w,t,"internal-error"),tn("boolean"===typeof b,t,"internal-error"),Qn(d,t.name),Qn(p,t.name),Qn(v,t.name),Qn(y,t.name),Qn(m,t.name),Qn(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(E.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(){var t=we(F().mark((function t(n,r){var i,a,o,u=arguments;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Hn).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,jn(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),$n=function(){function e(){i(this,e),this.type="NONE",this.storage={}}return o(e,[{key:"_isAvailable",value:function(){var e=we(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=we(F().mark((function e(t){var n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();$n.type="NONE";var Jn=$n;function Xn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Zn=function(){function e(t,n,r){i(this,e),this.persistence=t,this.auth=n,this.userKey=r;var a=this.auth,o=a.config,u=a.name;this.fullUserKey=Xn(this.userKey,o.apiKey,u),this.fullPersistenceKey=Xn("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return o(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=we(F().mark((function e(){var t;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Yn._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=we(F().mark((function e(t){var n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=we(F().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(on(Jn),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||on(Jn),u=Xn(i,n.config.apiKey,n.name),s=null,c=N(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Yn._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function er(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ir(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(tr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(or(t))return"Blackberry";if(ur(t))return"Webos";if(nr(t))return"Safari";if((t.includes("chrome/")||rr(t))&&!t.includes("edge/"))return"Chrome";if(ar(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function tr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/firefox\//i.test(e)}function nr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function rr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/crios\//i.test(e)}function ir(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/iemobile/i.test(e)}function ar(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/android/i.test(e)}function or(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/blackberry/i.test(e)}function ur(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/webos/i.test(e)}function sr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/iphone|ipad|ipod/i.test(e)}function cr(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return sr(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function lr(){return $()&&10===document.documentMode}function fr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return sr(e)||ar(e)||ur(e)||or(e)||/windows phone/i.test(e)||ir(e)}function hr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=er(K());break;case"Worker":t="".concat(er(K()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Xe,"/").concat(r)}var dr=function(){function e(t,n,r){i(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vr(this),this.idTokenSubscription=new vr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ht,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return o(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=on(t)),this._initializationPromise=this.queue(we(F().mark((function r(){var i,a;return F().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Zn.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=we(F().mark((function e(){var t;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=we(F().mark((function e(t){var n,r,i,a,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return tn(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=we(F().mark((function e(t){var n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,jn(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=we(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=we(F().mark((function e(t){var n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?fe(t):null)&&tn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=we(F().mark((function e(t){var n=this;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&tn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(we(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=we(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(we(F().mark((function n(){return F().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(on(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Z("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=we(F().mark((function e(t,n){var r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=we(F().mark((function e(t){var n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return tn(n=t&&on(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Zn.create(this,[on(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=we(F().mark((function e(t){var n,r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(we(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=we(F().mark((function e(t){var n=this;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(we(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return tn(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return tn(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hr(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=we(F().mark((function e(){var t,n,r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function pr(e){return fe(e)}var vr=function(){function e(t){var n=this;i(this,e),this.auth=t,this.observer=null,this.addObserver=se((function(e){return n.observer=e}))}return o(e,[{key:"next",get:function(){return tn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function yr(e,t,n){var r=pr(e);tn(r._canInitEmulator,r,"emulator-config-failed"),tn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=mr(t),o=function(e){var t=mr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:gr(r.substr(a.length+1))}}var o=P(r.split(":"),2);return{host:o[0],port:gr(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function mr(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function gr(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var kr=function(){function e(t,n){i(this,e),this.providerId=t,this.signInMethod=n}return o(e,[{key:"toJSON",value:function(){return nn("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return nn("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return nn("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return nn("not implemented")}}]),e}();function wr(e,t){return br.apply(this,arguments)}function br(){return(br=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:resetPassword",vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _r(e,t){return xr.apply(this,arguments)}function xr(){return(xr=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ir(e,t){return Er.apply(this,arguments)}function Er(){return(Er=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:update",vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tr(e,t){return Sr.apply(this,arguments)}function Sr(){return(Sr=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wn(t,"POST","/v1/accounts:signInWithPassword",vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cr(e,t){return Ar.apply(this,arguments)}function Ar(){return(Ar=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:sendOobCode",vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nr(e,t){return Rr.apply(this,arguments)}function Rr(){return(Rr=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dr(e,t){return Pr.apply(this,arguments)}function Pr(){return(Pr=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Or(e,t){return Lr.apply(this,arguments)}function Lr(){return(Lr=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mr(e,t){return Fr.apply(this,arguments)}function Fr(){return(Fr=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ur(e,t){return Vr.apply(this,arguments)}function Vr(){return(Vr=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wn(t,"POST","/v1/accounts:signInWithEmailLink",vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jr(e,t){return qr.apply(this,arguments)}function qr(){return(qr=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wn(t,"POST","/v1/accounts:signInWithEmailLink",vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Br=function(e){s(n,e);var t=p(n);function n(e,r,a){var o,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return i(this,n),(o=t.call(this,"password",a))._email=e,o._password=r,o._tenantId=u,o}return o(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Tr(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ur(t,{email:this._email,oobCode:this._password}));case 5:$t(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",_r(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",jr(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:$t(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(kr);function zr(e,t){return Gr.apply(this,arguments)}function Gr(){return(Gr=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wn(t,"POST","/v1/accounts:signInWithIdp",vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Kr=function(e){s(n,e);var t=p(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return o(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return zr(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,zr(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,zr(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ae(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):$t("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Rt(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(kr);function Wr(e,t){return Hr.apply(this,arguments)}function Hr(){return(Hr=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:sendVerificationCode",vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qr(){return(Qr=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wn(t,"POST","/v1/accounts:signInWithPhoneNumber",vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yr(){return(Yr=we(F().mark((function e(t,n){var r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wn(t,"POST","/v1/accounts:signInWithPhoneNumber",vn(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw In(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $r=_({},"USER_NOT_FOUND","user-not-found");function Jr(){return(Jr=we(F().mark((function e(t,n){var r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",wn(t,"POST","/v1/accounts:signInWithPhoneNumber",vn(t,r),$r));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xr=function(e){s(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this,"phone","phone")).params=e,r}return o(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Qr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Yr.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Jr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(kr);var Zr=function(){function e(t){var n,r,a,o,u,s;i(this,e);var c=oe(ue(t)),l=null!==(n=c.apiKey)&&void 0!==n?n:null,f=null!==(r=c.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(a=c.mode)&&void 0!==a?a:null);tn(l&&f&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=f,this.continueUrl=null!==(o=c.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(u=c.languageCode)&&void 0!==u?u:null,this.tenantId=null!==(s=c.tenantId)&&void 0!==s?s:null}return o(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=oe(ue(e)).link,n=t?oe(ue(t)).deep_link_id:null,r=oe(ue(e)).deep_link_id;return(r?oe(ue(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(o_){return null}}}]),e}();var ei=function(){function e(){i(this,e),this.providerId=e.PROVIDER_ID}return o(e,null,[{key:"credential",value:function(e,t){return Br._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Zr.parseLink(t);return tn(n,"argument-error"),Br._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();ei.PROVIDER_ID="password",ei.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ei.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var ti=function(){function e(t){i(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return o(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),ni=function(e){s(n,e);var t=p(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).scopes=[],e}return o(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return ge(this.scopes)}}]),n}(ti),ri=function(e){s(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return o(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return tn(e.idToken||e.accessToken,"argument-error"),Kr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return tn("providerId"in t&&"signInMethod"in t,"argument-error"),Kr._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(ni),ii=function(e){s(n,e);var t=p(n);function n(){return i(this,n),t.call(this,"facebook.com")}return o(n,null,[{key:"credential",value:function(e){return Kr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(o_){return null}}}]),n}(ni);ii.FACEBOOK_SIGN_IN_METHOD="facebook.com",ii.PROVIDER_ID="facebook.com";var ai=function(e){s(n,e);var t=p(n);function n(){var e;return i(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return o(n,null,[{key:"credential",value:function(e,t){return Kr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(o_){return null}}}]),n}(ni);ai.GOOGLE_SIGN_IN_METHOD="google.com",ai.PROVIDER_ID="google.com";var oi=function(e){s(n,e);var t=p(n);function n(){return i(this,n),t.call(this,"github.com")}return o(n,null,[{key:"credential",value:function(e){return Kr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(o_){return null}}}]),n}(ni);oi.GITHUB_SIGN_IN_METHOD="github.com",oi.PROVIDER_ID="github.com";var ui=function(e){s(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this,e,e)).pendingToken=r,a}return o(n,[{key:"_getIdTokenResponse",value:function(e){return zr(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,zr(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,zr(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(kr),si=function(e){s(n,e);var t=p(n);function n(e){return i(this,n),tn(e.startsWith("saml."),"argument-error"),t.call(this,e)}return o(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=ui.fromJSON(e);return tn(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return ui._create(r,n)}catch(i){return null}}}]),n}(ti),ci=function(e){s(n,e);var t=p(n);function n(){return i(this,n),t.call(this,"twitter.com")}return o(n,null,[{key:"credential",value:function(e,t){return Kr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(o_){return null}}}]),n}(ni);function li(e,t){return fi.apply(this,arguments)}function fi(){return(fi=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wn(t,"POST","/v1/accounts:signUp",vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}ci.TWITTER_SIGN_IN_METHOD="twitter.com",ci.PROVIDER_ID="twitter.com";var hi=function(){function e(t){i(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return o(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=we(F().mark((function t(n,r,i){var a,o,u,s,c=arguments;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Yn._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=di(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=we(F().mark((function t(n,r,i){var a;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=di(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function di(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function pi(){return pi=we(F().mark((function e(t){var n,r,i,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pr(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new hi({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,li(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,hi._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),pi.apply(this,arguments)}var vi=function(e){s(n,e);var t=p(n);function n(e,r,a,o){var u,s;return i(this,n),(u=t.call(this,r.code,r.message)).operationType=a,u.user=o,Object.setPrototypeOf(h(u),n.prototype),u.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:a},u}return o(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(X);function yi(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw vi._fromErrorAndOperation(e,n,t,r);throw n}))}function mi(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function gi(e,t){return ki.apply(this,arguments)}function ki(){return ki=we(F().mark((function e(t,n){var r,i,a,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fe(t),e.next=3,_i(!0,r,n);case 3:return e.t0=Sn,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=mi(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),ki.apply(this,arguments)}function wi(e,t){return bi.apply(this,arguments)}function bi(){return bi=we(F().mark((function e(t,n){var r,i,a=arguments;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Ln,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",hi._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),bi.apply(this,arguments)}function _i(e,t,n){return xi.apply(this,arguments)}function xi(){return(xi=we(F().mark((function e(t,n,r){var i,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jn(n);case 2:i=mi(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",tn(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ii(e,t){return Ei.apply(this,arguments)}function Ei(){return Ei=we(F().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Ln(t,yi(i,a,n,t),r);case 6:return tn((o=e.sent).idToken,i,"internal-error"),tn(u=On(o.idToken),i,"internal-error"),s=u.sub,tn(t.uid===s,i,"user-mismatch"),e.abrupt("return",hi._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&$t(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Ei.apply(this,arguments)}function Ti(e,t){return Si.apply(this,arguments)}function Si(){return Si=we(F().mark((function e(t,n){var r,i,a,o,u=arguments;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,yi(t,i,n);case 4:return a=e.sent,e.next=7,hi._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Si.apply(this,arguments)}function Ci(e,t){return Ai.apply(this,arguments)}function Ai(){return(Ai=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ti(pr(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ni(e,t){return Ri.apply(this,arguments)}function Ri(){return(Ri=we(F().mark((function e(t,n){var r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fe(t),e.next=3,_i(!1,r,n.providerId);case 3:return e.abrupt("return",wi(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Di(e,t){return Pi.apply(this,arguments)}function Pi(){return(Pi=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ii(fe(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oi(e,t){return Li.apply(this,arguments)}function Li(){return(Li=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wn(t,"POST","/v1/accounts:signInWithCustomToken",vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mi(){return(Mi=we(F().mark((function e(t,n){var r,i,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pr(t),e.next=3,Oi(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,hi._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fi=function(){function e(t,n){i(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return o(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Ui._fromServerResponse(e,t):$t(e,"internal-error")}}]),e}(),Ui=function(e){s(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return o(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Fi);function Vi(e,t,n){var r;tn((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),tn("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(tn(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(tn(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function ji(){return(ji=we(F().mark((function e(t,n,r){var i,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fe(t),a={requestType:"PASSWORD_RESET",email:n},r&&Vi(i,a,r),e.next=5,Dr(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qi(){return(qi=we(F().mark((function e(t,n,r){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wr(fe(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bi(){return(Bi=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ir(fe(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zi(e,t){return Gi.apply(this,arguments)}function Gi(){return(Gi=we(F().mark((function e(t,n){var r,i,a,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fe(t),e.next=3,wr(r,{oobCode:n});case 3:i=e.sent,tn(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return tn(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:tn(i.mfaInfo,r,"internal-error");case 13:tn(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Fi._fromServerResponse(pr(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ki(){return(Ki=we(F().mark((function e(t,n){var r,i;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zi(fe(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wi(e,t,n){return Hi.apply(this,arguments)}function Hi(){return(Hi=we(F().mark((function e(t,n,r){var i,a,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=pr(t),e.next=3,li(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,hi._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qi(){return(Qi=we(F().mark((function e(t,n,r){var i,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fe(t),a={requestType:"EMAIL_SIGNIN",email:n},tn(r.handleCodeInApp,i,"argument-error"),r&&Vi(i,a,r),e.next=6,Or(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yi(){return(Yi=we(F().mark((function e(t,n,r){var i,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fe(t),tn((a=ei.credentialWithLink(n,r||un()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Ci(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $i(e,t){return Ji.apply(this,arguments)}function Ji(){return(Ji=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:createAuthUri",vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xi(){return(Xi=we(F().mark((function e(t,n){var r,i,a,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=sn()?un():"http://localhost",i={identifier:n,continueUri:r},e.next=4,$i(fe(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zi(){return(Zi=we(F().mark((function e(t,n){var r,i,a,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fe(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Vi(r.auth,a,n),e.next=8,Nr(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ea(){return(ea=we(F().mark((function e(t,n,r){var i,a,o,u;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fe(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Vi(i.auth,o,r),e.next=8,Mr(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ta(e,t){return na.apply(this,arguments)}function na(){return(na=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ra(){return(ra=we(F().mark((function e(t,n){var r,i,a,o,u,s,c;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=fe(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Ln(a,ta(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ia(e,t,n){return aa.apply(this,arguments)}function aa(){return(aa=we(F().mark((function e(t,n,r){var i,a,o,u;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Ln(t,_r(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oa=o((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),ua=function(e){s(n,e);var t=p(n);function n(e,r,a,o){var u;return i(this,n),(u=t.call(this,e,r,a)).username=o,u}return o(n)}(oa),sa=function(e){s(n,e);var t=p(n);function n(e,r){return i(this,n),t.call(this,e,"facebook.com",r)}return o(n)}(oa),ca=function(e){s(n,e);var t=p(n);function n(e,r){return i(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return o(n)}(ua),la=function(e){s(n,e);var t=p(n);function n(e,r){return i(this,n),t.call(this,e,"google.com",r)}return o(n)}(oa),fa=function(e){s(n,e);var t=p(n);function n(e,r,a){return i(this,n),t.call(this,e,"twitter.com",r,a)}return o(n)}(ua);function ha(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=On(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new oa(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new sa(a,i);case"github.com":return new ca(a,i);case"google.com":return new la(a,i);case"twitter.com":return new fa(a,i,e.screenName||null);case"custom":case"anonymous":return new oa(a,null);default:return new oa(a,r,i)}}(n)}var da=function(){function e(t,n){i(this,e),this.type=t,this.credential=n}return o(e,[{key:"toJSON",value:function(){return{multiFactorSession:_({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),pa=function(){function e(t,n,r){i(this,e),this.session=t,this.hints=n,this.signInResolver=r}return o(e,[{key:"resolveSignIn",value:function(){var e=we(F().mark((function e(t){var n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=pr(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Fi._fromServerResponse(r,e)}));tn(i.mfaPendingCredential,r,"internal-error");var o=da._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=we(F().mark((function e(t){var a,u,s;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,hi._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return tn(n.user,r,"internal-error"),e.abrupt("return",hi._forOperation(n.user,n.operationType,u));case 17:$t(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function va(e,t){return yn(e,"POST","/v2/accounts/mfaEnrollment:start",vn(e,t))}var ya=function(){function e(t){var n=this;i(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Fi._fromServerResponse(t.auth,e)})))}))}return o(e,[{key:"getSession",value:function(){var e=we(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=da,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=we(F().mark((function e(t,n){var r,i,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Ln(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=we(F().mark((function e(t){var n,r,i;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Ln(this.user,yn(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",vn(a,{idToken:r,mfaEnrollmentId:n})));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var a}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),ma=new WeakMap;var ga="__sak",ka=function(){function e(t,n){i(this,e),this.storageRetriever=t,this.type=n}return o(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(ga,"1"),this.storage.removeItem(ga),Promise.resolve(!0)):Promise.resolve(!1)}catch(o_){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var wa=function(e){s(n,e);var t=p(n);function n(){var e;return i(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=K();return nr(e)||sr(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=fr(),e._shouldAllowMigration=!0,e}return o(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);lr()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=we(F().mark((function e(t,r){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nt(c(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=we(F().mark((function e(t){var r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nt(c(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nt(c(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(ka);wa.type="LOCAL";var ba=wa,_a=function(e){s(n,e);var t=p(n);function n(){return i(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return o(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(ka);_a.type="SESSION";var xa=_a;function Ia(e){return Promise.all(e.map(function(){var e=we(F().mark((function e(t){var n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Ea=function(){function e(t){i(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return o(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=we(F().mark((function e(t){var n,r,i,a,o,u,s,c;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Ia(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Ta(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ea.receivers=[];var Sa=function(){function e(t){i(this,e),this.target=t,this.handlers=new Set}return o(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=we(F().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Ta("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Ca(){return window}function Aa(){return"undefined"!==typeof Ca().WorkerGlobalScope&&"function"===typeof Ca().importScripts}function Na(){return Ra.apply(this,arguments)}function Ra(){return(Ra=we(F().mark((function e(){var t;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Da(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Pa="firebaseLocalStorageDb",Oa="firebaseLocalStorage",La="fbase_key",Ma=function(){function e(t){i(this,e),this.request=t}return o(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Fa(e,t){return e.transaction([Oa],t?"readwrite":"readonly").objectStore(Oa)}function Ua(){var e=indexedDB.deleteDatabase(Pa);return new Ma(e).toPromise()}function Va(){var e=indexedDB.open(Pa,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Oa,{keyPath:La})}catch(r){n(r)}})),e.addEventListener("success",we(F().mark((function n(){var r;return F().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Oa)){n.next=12;break}return r.close(),n.next=5,Ua();case 5:return n.t0=t,n.next=8,Va();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function ja(e,t,n){return qa.apply(this,arguments)}function qa(){return qa=we(F().mark((function e(t,n,r){var i,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Fa(t,!0).put((_(i={},La,n),_(i,"value",r),i)),e.abrupt("return",new Ma(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),qa.apply(this,arguments)}function Ba(e,t){return za.apply(this,arguments)}function za(){return za=we(F().mark((function e(t,n){var r,i;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fa(t,!1).get(n),e.next=3,new Ma(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),za.apply(this,arguments)}function Ga(e,t){var n=Fa(e,!0).delete(t);return new Ma(n).toPromise()}var Ka=function(){function e(){i(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return o(e,[{key:"_openDb",value:function(){var e=we(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Va();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=we(F().mark((function e(t){var n,r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=we(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aa()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=we(F().mark((function e(){var t=this;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Ea._getInstance(Aa()?self:null),this.receiver._subscribe("keyChanged",function(){var e=we(F().mark((function e(n,r){var i;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=we(F().mark((function e(){var t,n,r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Na();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Sa(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Da()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=we(F().mark((function e(){var t;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Va();case 5:return t=e.sent,e.next=8,ja(t,ga,"1");case 8:return e.next=10,Ga(t,ga);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=we(F().mark((function e(t,n){var r=this;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(we(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return ja(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=we(F().mark((function e(t){var n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Ba(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=we(F().mark((function e(t){var n=this;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(we(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Ga(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=we(F().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Fa(e,!1).getAll();return new Ma(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=N(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(we(F().mark((function t(){return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Ka.type="LOCAL";var Wa=Ka;function Ha(e,t){return yn(e,"POST","/v2/accounts/mfaSignIn:start",vn(e,t))}function Qa(e){return Ya.apply(this,arguments)}function Ya(){return(Ya=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $a(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Jt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Ja(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Xa=1e12,Za=function(){function e(t){i(this,e),this.auth=t,this.counter=Xa,this._widgets=new Map}return o(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new eo(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Xa;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Xa;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=we(F().mark((function e(t){var n,r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Xa,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),eo=function(){function e(t,n,r){var a=this;i(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){a.execute()};var o="string"===typeof t?document.getElementById(t):t;tn(o,"argument-error",{appName:n}),this.container=o,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return o(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var to=Ja("rcb"),no=new ln(3e4,6e4),ro="https://www.google.com/recaptcha/api.js?",io=function(){function e(){i(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Ca().grecaptcha}return o(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return tn(ao(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Ca().grecaptcha):new Promise((function(r,i){var a=Ca().setTimeout((function(){i(Jt(e,"network-request-failed"))}),no.get());Ca()[to]=function(){Ca().clearTimeout(a),delete Ca()[to];var o=Ca().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Jt(e,"internal-error"))},$a("".concat(ro,"?").concat(ae({onload:to,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Jt(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Ca().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function ao(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var oo=function(){function e(){i(this,e)}return o(e,[{key:"load",value:function(){var e=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Za(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),uo="recaptcha",so={theme:"light",type:"image"},co=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},so),r=arguments.length>2?arguments[2]:void 0;i(this,e),this.parameters=n,this.type=uo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pr(r),this.isInvisible="invisible"===this.parameters.size,tn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var a="string"===typeof t?document.getElementById(t):t;tn(a,this.auth,"argument-error"),this.container=a,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new oo:new io,this.validateStartingState()}return o(e,[{key:"verify",value:function(){var e=we(F().mark((function e(){var t,n,r,i=this;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){tn(!this.parameters.sitekey,this.auth,"argument-error"),tn(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),tn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Ca()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){tn(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=we(F().mark((function e(){var t,n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=we(F().mark((function e(){var t;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tn(sn()&&!Aa(),this.auth,"internal-error"),e.next=3,lo();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Qa(this.auth);case 8:tn(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return tn(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function lo(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var fo=function(){function e(t,n){i(this,e),this.verificationId=t,this.onConfirmation=n}return o(e,[{key:"confirm",value:function(e){var t=Xr._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function ho(){return(ho=we(F().mark((function e(t,n,r){var i,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=pr(t),e.next=3,mo(i,n,fe(r));case 3:return a=e.sent,e.abrupt("return",new fo(a,(function(e){return Ci(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function po(e,t,n){return vo.apply(this,arguments)}function vo(){return(vo=we(F().mark((function e(t,n,r){var i,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fe(t),e.next=3,_i(!1,i,"phone");case 3:return e.next=5,mo(i.auth,n,fe(r));case 5:return a=e.sent,e.abrupt("return",new fo(a,(function(e){return Ni(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yo(){return(yo=we(F().mark((function e(t,n,r){var i,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fe(t),e.next=3,mo(i.auth,n,fe(r));case 3:return a=e.sent,e.abrupt("return",new fo(a,(function(e){return Di(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mo(e,t,n){return go.apply(this,arguments)}function go(){return go=we(F().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,tn("string"===typeof a,t,"argument-error"),tn(r.type===uo,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return tn("enroll"===u.type,t,"internal-error"),e.next=13,va(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return tn("signin"===u.type,t,"internal-error"),tn(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Ha(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Wr(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),go.apply(this,arguments)}function ko(){return(ko=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wi(fe(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wo=function(){function e(t){i(this,e),this.providerId=e.PROVIDER_ID,this.auth=pr(t)}return o(e,[{key:"verifyPhoneNumber",value:function(e,t){return mo(this.auth,e,fe(t))}}],[{key:"credential",value:function(e,t){return Xr._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Xr._fromTokenResponse(n,r):null}}]),e}();function bo(e,t){return t?on(t):(tn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}wo.PROVIDER_ID="phone",wo.PHONE_SIGN_IN_METHOD="phone";var _o=function(e){s(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this,"custom","custom")).params=e,r}return o(n,[{key:"_getIdTokenResponse",value:function(e){return zr(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return zr(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return zr(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(kr);function xo(e){return Ti(e.auth,new _o(e),e.bypassAuthState)}function Io(e){var t=e.auth,n=e.user;return tn(n,t,"internal-error"),Ii(n,new _o(e),e.bypassAuthState)}function Eo(e){return To.apply(this,arguments)}function To(){return(To=we(F().mark((function e(t){var n,r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,tn(r=t.user,n,"internal-error"),e.abrupt("return",wi(r,new _o(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var So=function(){function e(t,n,r,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];i(this,e),this.auth=t,this.resolver=r,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return o(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=we(F().mark((function t(n,r){return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=we(F().mark((function e(t){var n,r,i,a,o,u,s;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xo;case"linkViaPopup":case"linkViaRedirect":return Eo;case"reauthViaPopup":case"reauthViaRedirect":return Io;default:$t(this.auth,"internal-error")}}},{key:"resolve",value:function(e){rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Co=new ln(2e3,1e4);function Ao(e,t,n){return No.apply(this,arguments)}function No(){return(No=we(F().mark((function e(t,n,r){var i,a,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=pr(t),Zt(t,n,ti),a=bo(i,r),o=new Oo(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ro(){return(Ro=we(F().mark((function e(t,n,r){var i,a,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zt((i=fe(t)).auth,n,ti),a=bo(i.auth,r),o=new Oo(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Do(e,t,n){return Po.apply(this,arguments)}function Po(){return(Po=we(F().mark((function e(t,n,r){var i,a,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zt((i=fe(t)).auth,n,ti),a=bo(i.auth,r),o=new Oo(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Oo=function(e){s(n,e);var t=p(n);function n(e,r,a,o,u){var s;return i(this,n),(s=t.call(this,e,r,o,u)).provider=a,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=h(s),s}return o(n,[{key:"executeNotNull",value:function(){var e=we(F().mark((function e(){var t;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return tn(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=we(F().mark((function e(){var t,n=this;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rn(1===this.filter.length,"Popup operations only handle one event"),t=Ta(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Jt(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Jt(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Jt(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Co.get())}()}}]),n}(So);Oo.currentPopupAction=null;var Lo=new Map,Mo=function(e){s(n,e);var t=p(n);function n(e,r){var a,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i(this,n),(a=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,o)).eventId=null,a}return o(n,[{key:"execute",value:function(){var e=we(F().mark((function e(){var t,r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Lo.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Fo(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Nt(c(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Lo.set(this.auth._key(),t);case 21:return this.bypassAuthState||Lo.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=we(F().mark((function e(t){var r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Nt(c(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Nt(c(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=we(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(So);function Fo(e,t){return Uo.apply(this,arguments)}function Uo(){return(Uo=we(F().mark((function e(t,n){var r,i,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bo(n),i=qo(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vo(e,t){return jo.apply(this,arguments)}function jo(){return(jo=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qo(t)._set(Bo(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qo(e){return on(e._redirectPersistence)}function Bo(e){return Xn("pendingRedirect",e.config.apiKey,e.name)}function zo(e,t,n){return function(e,t,n){return Go.apply(this,arguments)}(e,t,n)}function Go(){return(Go=we(F().mark((function e(t,n,r){var i,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=pr(t),Zt(t,n,ti),a=bo(i,r),e.next=5,Vo(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ko(e,t,n){return function(e,t,n){return Wo.apply(this,arguments)}(e,t,n)}function Wo(){return(Wo=we(F().mark((function e(t,n,r){var i,a,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zt((i=fe(t)).auth,n,ti),a=bo(i.auth,r),e.next=5,Vo(a,i.auth);case 5:return e.next=7,Zo(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ho(e,t,n){return function(e,t,n){return Qo.apply(this,arguments)}(e,t,n)}function Qo(){return(Qo=we(F().mark((function e(t,n,r){var i,a,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zt((i=fe(t)).auth,n,ti),a=bo(i.auth,r),e.next=5,_i(!1,i,n.providerId);case 5:return e.next=7,Vo(a,i.auth);case 7:return e.next=9,Zo(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yo(e,t){return $o.apply(this,arguments)}function $o(){return($o=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr(t)._initializationPromise;case 2:return e.abrupt("return",Jo(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jo(e,t){return Xo.apply(this,arguments)}function Xo(){return Xo=we(F().mark((function e(t,n){var r,i,a,o,u,s=arguments;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=pr(t),a=bo(i,n),o=new Mo(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Xo.apply(this,arguments)}function Zo(e){return eu.apply(this,arguments)}function eu(){return(eu=we(F().mark((function e(t){var n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ta("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var tu=function(){function e(t){i(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return o(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ru(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!ru(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Jt(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(nu(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(nu(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function nu(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function ru(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function iu(e){return au.apply(this,arguments)}function au(){return au=we(F().mark((function e(t){var n,r=arguments;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",yn(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),au.apply(this,arguments)}var ou=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uu=/^https?/;function su(){return(su=we(F().mark((function e(t){var n,r,i,a,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,iu(t);case 4:n=e.sent,r=n.authorizedDomains,i=N(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!cu(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:$t(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function cu(e){var t=un(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!uu.test(r))return!1;if(ou.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var lu=new ln(3e4,6e4);function fu(){var e=Ca().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=ge(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var hu=null;function du(e){return hu=hu||function(e){return new Promise((function(t,n){var r,i,a;function o(){fu(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){fu(),n(Jt(e,"network-request-failed"))},timeout:lu.get()})}if(null===(i=null===(r=Ca().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Ca().gapi)||void 0===a?void 0:a.load)){var u=Ja("iframefcb");return Ca()[u]=function(){gapi.load?o():n(Jt(e,"network-request-failed"))},$a("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw hu=null,e}))}(e),hu}var pu=new ln(5e3,15e3),vu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mu(e){var t=e.config;tn(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?fn(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Xe},i=yu.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(ae(r).slice(1))}function gu(e){return ku.apply(this,arguments)}function ku(){return ku=we(F().mark((function e(t){var n,r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,du(t);case 2:return n=e.sent,tn(r=Ca().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:mu(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vu,dontclear:!0},(function(e){return new Promise(function(){var n=we(F().mark((function n(r,i){var a,o,u;return F().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Ca().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Jt(t,"network-request-failed"),o=Ca().setTimeout((function(){i(a)}),pu.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),ku.apply(this,arguments)}var wu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bu="_blank",_u="http://localhost",xu=function(){function e(t){i(this,e),this.window=t,this.associatedEvent=null}return o(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Iu(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},wu),{width:r.toString(),height:i.toString(),top:a,left:o}),c=K().toLowerCase();n&&(u=rr(c)?bu:n),tr(c)&&(t=t||_u,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=P(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(cr(c)&&"_self"!==u)return Eu(t||"",u),new xu(null);var f=window.open(t||"",u,l);tn(f,e,"popup-blocked");try{f.focus()}catch(h){}return new xu(f)}function Eu(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Tu="__/auth/handler",Su="emulator/auth/handler";function Cu(e,t,n,r,i,a){tn(e.config.authDomain,e,"auth-domain-config-required"),tn(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Xe,eventId:i};if(t instanceof ti){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=P(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof ni){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var y=v[p];void 0===d[y]&&delete d[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Tu);return fn(t,Su)}(e),"?").concat(ae(d).slice(1))}var Au="webStorageSupport",Nu=function(){function e(){i(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xa,this._completeRedirectFn=Jo}return o(e,[{key:"_openPopup",value:function(){var e=we(F().mark((function e(t,n,r,i){var a,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rn(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Cu(t,n,r,un(),i),e.abrupt("return",Iu(t,o,Ta()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=we(F().mark((function e(t,n,r,i){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Cu(t,n,r,un(),i),Ca().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(rn(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=we(F().mark((function e(t){var n,r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gu(t);case 2:return n=e.sent,r=new tu(t),n.register("authEvent",(function(e){return tn(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Au,{type:Au},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),$t(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return su.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return fr()||nr()||sr()}}]),e}(),Ru=Nu,Du=function(e){s(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this,"phone")).credential=e,r}return o(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return yn(e,"POST","/v2/accounts/mfaEnrollment:finalize",vn(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return yn(e,"POST","/v2/accounts/mfaSignIn:finalize",vn(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){i(this,e),this.factorId=t}return o(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return nn("unexpected MultiFactorSessionType")}}}]),e}()),Pu=function(){function e(){i(this,e)}return o(e,null,[{key:"assertion",value:function(e){return Du._fromCredential(e)}}]),e}();Pu.FACTOR_ID="phone";var Ou,Lu="@firebase/auth",Mu="0.19.11",Fu=function(){function e(t){i(this,e),this.auth=t,this.internalListeners=new Map}return o(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=we(F().mark((function e(t){var n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){tn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Uu(){return window}Ou="Browser",Ke(new be("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){tn(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),tn(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Ou,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hr(Ou)},i=new dr(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(on);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Ke(new be("auth-internal",(function(e){return function(e){return new Fu(e)}(pr(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),it(Lu,Mu,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ou)),it(Lu,Mu,"esm2017");function Vu(e,t,n){return ju.apply(this,arguments)}function ju(){return ju=we(F().mark((function e(t,n,r){var i,a,o,u,s;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Uu(),o=a.BuildInfo,rn(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Wu(n.sessionId);case 4:return u=e.sent,s={},sr()?s.ibi=o.packageName:ar()?s.apn=o.packageName:$t(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Cu(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),ju.apply(this,arguments)}function qu(){return(qu=we(F().mark((function e(t){var n,r,i;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Uu(),r=n.BuildInfo,i={},sr()?i.iosBundleId=r.packageName:ar()?i.androidPackageName=r.packageName:$t(t,"operation-not-supported-in-this-environment"),e.next=5,iu(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bu(e){var t=Uu().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function zu(e,t,n){return Gu.apply(this,arguments)}function Gu(){return Gu=we(F().mark((function e(t,n,r){var i,a,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Uu(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Jt(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),ar()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Gu.apply(this,arguments)}function Ku(e){var t,n,r,i,a,o,u,s,c,l,f=Uu();tn("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),tn("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),tn("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tn("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tn("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Wu(e){return Hu.apply(this,arguments)}function Hu(){return(Hu=we(F().mark((function e(t){var n,r,i;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Qu(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qu(e){if(rn(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Yu=function(e){s(n,e);var t=p(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return o(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Nt(c(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=we(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(tu);function $u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:ts(),postBody:null,tenantId:e.tenantId,error:Jt(e,"no-auth-event")}}function Ju(e,t){return ns()._set(rs(e),t)}function Xu(e){return Zu.apply(this,arguments)}function Zu(){return(Zu=we(F().mark((function e(t){var n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ns()._get(rs(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,ns()._remove(rs(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function es(e,t){var n,r,i=function(e){var t=is(e),n=t.link?decodeURIComponent(t.link):void 0,r=is(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return is(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=is(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Jt(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function ts(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function ns(){return on(ba)}function rs(e){return Xn("authEvent",e.config.apiKey,e.name)}function is(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=R(t=n)||me(t)||A(t)||D();r[0];return oe(r.slice(1).join("?"))}var as=function(){function e(){i(this,e),this._redirectPersistence=xa,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Jo}return o(e,[{key:"_initialize",value:function(){var e=we(F().mark((function e(t){var n,r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Yu(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){$t(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=we(F().mark((function e(t,n,r,i){var a,o,u,s;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ku(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Lo.clear(),e.next=10,this._originValidation(t);case 10:return o=$u(t,r,i),e.next=13,Ju(t,o);case 13:return e.next=15,Vu(t,o,n);case 15:return u=e.sent,e.next=18,Bu(u);case 18:return s=e.sent,e.abrupt("return",zu(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return qu.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Uu(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(we(F().mark((function n(){return F().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Xu(e);case 2:t.onEvent(us());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=we(F().mark((function n(r){var i,a;return F().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Xu(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=es(i,r.url)),t.onEvent(a||us());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Uu().handleOpenURL=function(){var e=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),os=as;function us(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Jt("no-auth-event")}}function ss(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function cs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return!("file:"!==ss()&&"ionic:"!==ss()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function ls(){return $()&&11===(null===document||void 0===document?void 0:document.documentMode)}function fs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/Edge\/\d+/.test(e)}function hs(){try{var e=self.localStorage,t=Ta();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return ls()||fs(e)}()||J()}catch(n){return ds()&&J()}return!1}function ds(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function ps(){return("http:"===ss()||"https:"===ss()||Q()||cs())&&!(Y()||H())&&hs()&&!ds()}function vs(){return cs()&&"undefined"!==typeof document}function ys(){return ms.apply(this,arguments)}function ms(){return(ms=we(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(vs()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var gs={LOCAL:"local",NONE:"none",SESSION:"session"},ks=tn,ws="persistence";function bs(e,t){ks(Object.values(gs).includes(t),e,"invalid-persistence-type"),Y()?ks(t!==gs.SESSION,e,"unsupported-persistence-type"):H()?ks(t===gs.NONE,e,"unsupported-persistence-type"):ds()?ks(t===gs.NONE||t===gs.LOCAL&&J(),e,"unsupported-persistence-type"):ks(t===gs.NONE||hs(),e,"unsupported-persistence-type")}function _s(e){return xs.apply(this,arguments)}function xs(){return(xs=we(F().mark((function e(t){var n,r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Is(),r=Xn(ws,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Is(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Es=tn,Ts=function(){function e(){i(this,e),this.browserResolver=on(Ru),this.cordovaResolver=on(os),this.underlyingResolver=null,this._redirectPersistence=xa,this._completeRedirectFn=Jo}return o(e,[{key:"_initialize",value:function(){var e=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=we(F().mark((function e(t,n,r,i){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=we(F().mark((function e(t,n,r,i){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return vs()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Es(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=we(F().mark((function e(){var t;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ys();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ss(e){return e.unwrap()}function Cs(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Ps(e,function(e,t){var n,r=fe(e),i=t;return tn(t.customData.operationType,r,"argument-error"),tn(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),pa._fromError(r,i)}(e,t));else if(r){var i=As(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function As(e){var t=(e instanceof X?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof X)&&"temporaryProof"in t&&"phoneNumber"in t)return wo.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Mt)return null;switch(r){case Lt:n=ai;break;case Pt:n=ii;break;case Ot:n=oi;break;case Ft:n=ci;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?ui._create(r,u):Kr._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new ri(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof X?n.credentialFromError(e):n.credentialFromResult(e)}function Ns(e,t){return t.catch((function(t){throw t instanceof X&&Cs(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,As(t)),additionalUserInfo:ha(e),user:Os.getOrCreate(r)}}))}function Rs(e,t){return Ds.apply(this,arguments)}function Ds(){return(Ds=we(F().mark((function e(t,n){var r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Ns(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ps=function(){function e(t,n){i(this,e),this.resolver=n,this.auth=t.wrapped()}return o(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Ns(Ss(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Os=function(){function e(t){i(this,e),this._delegate=t,this.multiFactor=function(e){var t=fe(e);return ma.has(t)||ma.set(t,ya._fromUser(t)),ma.get(t)}(t)}return o(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ns(this.auth,Ni(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rs(this.auth,po(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ns(this.auth,Do(this._delegate,t,Ts)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_s(pr(this.auth));case 2:return e.abrupt("return",Ho(this._delegate,t,Ts));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ns(this.auth,Di(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Rs(this.auth,function(e,t,n){return yo.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Ns(this.auth,function(e,t,n){return Ro.apply(this,arguments)}(this._delegate,e,Ts))}},{key:"reauthenticateWithRedirect",value:function(){var e=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_s(pr(this.auth));case 2:return e.abrupt("return",Ko(this._delegate,t,Ts));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Zi.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gi(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return ia(fe(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return ia(fe(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return ko.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return ra.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return ea.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Os.USER_MAP=new WeakMap;var Ls=tn,Ms=function(){function e(t,n){if(i(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Ls(r,"invalid-api-key",{appName:t.name}),Ls(r,"invalid-api-key",{appName:t.name});var a="undefined"!==typeof window?Ts:void 0;this._delegate=n.initialize({options:{persistence:Us(r,t.name),popupRedirectResolver:a}}),this._delegate._updateErrorMap(Kt),this.linkUnderlyingAuth()}return o(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Os.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){yr(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Bi.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return zi(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return qi.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ns(this._delegate,Wi(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Xi.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Zr.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=we(F().mark((function e(){var t;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ls(ps(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Yo(this._delegate,Ts);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Ns(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){pr(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Fs(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Fs(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Qi.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return ji.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=we(F().mark((function e(t){var n,r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:bs(this._delegate,t),e.t0=t,e.next=e.t0===gs.SESSION?4:e.t0===gs.LOCAL?6:e.t0===gs.NONE?11:13;break;case 4:return n=xa,e.abrupt("break",14);case 6:return e.next=8,on(Wa)._isAvailable();case 8:return r=e.sent,n=r?Wa:ba,e.abrupt("break",14);case 11:return n=Jn,e.abrupt("break",14);case 13:return e.abrupt("return",$t("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Ns(this._delegate,function(e){return pi.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Ns(this._delegate,Ci(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Ns(this._delegate,function(e,t){return Mi.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Ns(this._delegate,function(e,t,n){return Ci(fe(e),ei.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Ns(this._delegate,function(e,t,n){return Yi.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Rs(this._delegate,function(e,t,n){return ho.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ls(ps(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Ns(this._delegate,Ao(this._delegate,t,Ts)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ls(ps(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,_s(this._delegate);case 3:return e.abrupt("return",zo(this._delegate,t,Ts));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Ki.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Fs(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Os.getOrCreate(e))},error:t,complete:n}}function Us(e,t){var n=function(e,t){var n=Is();if(!n)return[];var r=Xn(ws,e,t);switch(n.getItem(r)){case gs.NONE:return[Jn];case gs.LOCAL:return[Wa,xa];case gs.SESSION:return[xa];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Wa)||n.push(Wa),"undefined"!==typeof window)for(var r=0,i=[ba,xa];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Jn)||n.push(Jn),n}Ms.Persistence=gs;var Vs=function(){function e(){i(this,e),this.providerId="phone",this._delegate=new wo(Ss(Ct.auth()))}return o(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return wo.credential(e,t)}}]),e}();Vs.PHONE_SIGN_IN_METHOD=wo.PHONE_SIGN_IN_METHOD,Vs.PROVIDER_ID=wo.PROVIDER_ID;var js,qs=tn,Bs=function(){function e(t,n){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ct.app();i(this,e),qs(null===(r=a.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:a.name}),this._delegate=new co(t,n,a.auth()),this.type=this._delegate.type}return o(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(js=Ct).INTERNAL.registerComponent(new be("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Ms(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ut,PASSWORD_RESET:Vt,RECOVER_EMAIL:jt,REVERT_SECOND_FACTOR_ADDITION:qt,VERIFY_AND_CHANGE_EMAIL:Bt,VERIFY_EMAIL:zt}},EmailAuthProvider:ei,FacebookAuthProvider:ii,GithubAuthProvider:oi,GoogleAuthProvider:ai,OAuthProvider:ri,SAMLAuthProvider:si,PhoneAuthProvider:Vs,PhoneMultiFactorGenerator:Pu,RecaptchaVerifier:Bs,TwitterAuthProvider:ci,Auth:Ms,AuthCredential:kr,Error:X}).setInstantiationMode("LAZY").setMultipleInstances(!1)),js.registerVersion("@firebase/auth-compat","0.2.11");var zs,Gs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Ks={},Ws=Ws||{},Hs=Gs||self;function Qs(){}function Ys(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function $s(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Js="closure_uid_"+(1e9*Math.random()>>>0),Xs=0;function Zs(e,t,n){return e.call.apply(e.bind,arguments)}function ec(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function tc(e,t,n){return(tc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Zs:ec).apply(null,arguments)}function nc(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function rc(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function ic(){this.s=this.s,this.o=this.o}var ac={};ic.prototype.s=!1,ic.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Js)&&e[Js]||(e[Js]=++Xs)}(this);delete ac[e]}},ic.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var oc=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},uc=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function sc(e){return Array.prototype.concat.apply([],arguments)}function cc(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function lc(e){return/^[\s\xa0]*$/.test(e)}var fc,hc=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function dc(e,t){return-1!=e.indexOf(t)}function pc(e,t){return e<t?-1:e>t?1:0}e:{var vc=Hs.navigator;if(vc){var yc=vc.userAgent;if(yc){fc=yc;break e}}fc=""}function mc(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function gc(e){var t={};for(var n in e)t[n]=e[n];return t}var kc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wc(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<kc.length;a++)n=kc[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function bc(e){return bc[" "](e),e}bc[" "]=Qs;var _c,xc=dc(fc,"Opera"),Ic=dc(fc,"Trident")||dc(fc,"MSIE"),Ec=dc(fc,"Edge"),Tc=Ec||Ic,Sc=dc(fc,"Gecko")&&!(dc(fc.toLowerCase(),"webkit")&&!dc(fc,"Edge"))&&!(dc(fc,"Trident")||dc(fc,"MSIE"))&&!dc(fc,"Edge"),Cc=dc(fc.toLowerCase(),"webkit")&&!dc(fc,"Edge");function Ac(){var e=Hs.document;return e?e.documentMode:void 0}e:{var Nc="",Rc=function(){var e=fc;return Sc?/rv:([^\);]+)(\)|;)/.exec(e):Ec?/Edge\/([\d\.]+)/.exec(e):Ic?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Cc?/WebKit\/(\S+)/.exec(e):xc?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Rc&&(Nc=Rc?Rc[1]:""),Ic){var Dc=Ac();if(null!=Dc&&Dc>parseFloat(Nc)){_c=String(Dc);break e}}_c=Nc}var Pc,Oc={};function Lc(){return function(e){var t=Oc;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=hc(String(_c)).split("."),n=hc("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=pc(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||pc(0==a[2].length,0==o[2].length)||pc(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Hs.document&&Ic){var Mc=Ac();Pc=Mc||(parseInt(_c,10)||void 0)}else Pc=void 0;var Fc=Pc,Uc=function(){if(!Hs.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Hs.addEventListener("test",Qs,t),Hs.removeEventListener("test",Qs,t)}catch(n){}return e}();function Vc(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function jc(e,t){if(Vc.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Sc){e:{try{bc(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:qc[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&jc.Z.h.call(this)}}Vc.prototype.h=function(){this.defaultPrevented=!0},rc(jc,Vc);var qc={2:"touch",3:"pen",4:"mouse"};jc.prototype.h=function(){jc.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Bc="closure_listenable_"+(1e6*Math.random()|0),zc=0;function Gc(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++zc,this.ca=this.fa=!1}function Kc(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Wc(e){this.src=e,this.g={},this.h=0}function Hc(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=oc(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Kc(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Qc(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Wc.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Qc(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Gc(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Yc="closure_lm_"+(1e6*Math.random()|0),$c={};function Jc(e,t,n,r,i){if(r&&r.once)return Zc(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Jc(e,t[a],n,r,i);return null}return n=ol(n),e&&e[Bc]?e.N(t,n,$s(r)?!!r.capture:!!r,i):Xc(e,t,n,!1,r,i)}function Xc(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=$s(i)?!!i.capture:!!i,u=il(e);if(u||(e[Yc]=u=new Wc(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=rl;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Uc||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(nl(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Zc(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Zc(e,t[a],n,r,i);return null}return n=ol(n),e&&e[Bc]?e.O(t,n,$s(r)?!!r.capture:!!r,i):Xc(e,t,n,!0,r,i)}function el(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)el(e,t[a],n,r,i);else r=$s(r)?!!r.capture:!!r,n=ol(n),e&&e[Bc]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Qc(a=e.g[t],n,r,i))&&(Kc(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=il(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Qc(t,n,r,i)),(n=-1<e?t[e]:null)&&tl(n))}function tl(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Bc])Hc(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(nl(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=il(t))?(Hc(n,e),0==n.h&&(n.src=null,t[Yc]=null)):Kc(e)}}}function nl(e){return e in $c?$c[e]:$c[e]="on"+e}function rl(e,t){if(e.ca)e=!0;else{t=new jc(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&tl(e),e=n.call(r,t)}return e}function il(e){return(e=e[Yc])instanceof Wc?e:null}var al="__closure_events_fn_"+(1e9*Math.random()>>>0);function ol(e){return"function"===typeof e?e:(e[al]||(e[al]=function(t){return e.handleEvent(t)}),e[al])}function ul(){ic.call(this),this.i=new Wc(this),this.P=this,this.I=null}function sl(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Vc(t,e);else if(t instanceof Vc)t.target=t.target||e;else{var i=t;wc(t=new Vc(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=cl(o,r,!0,t)&&i}if(i=cl(o=t.g=e,r,!0,t)&&i,i=cl(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=cl(o=t.g=n[a],r,!1,t)&&i}function cl(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Hc(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}rc(ul,ic),ul.prototype[Bc]=!0,ul.prototype.removeEventListener=function(e,t,n,r){el(this,e,t,n,r)},ul.prototype.M=function(){if(ul.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Kc(n[r]);delete t.g[e],t.h--}}this.I=null},ul.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ul.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ll=Hs.JSON.stringify;function fl(){var e=kl,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var hl,dl=function(){function e(){i(this,e),this.h=this.g=null}return o(e,[{key:"add",value:function(e,t){var n=pl.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),pl=new(function(){function e(t,n){i(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return o(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new vl}),(function(e){return e.reset()})),vl=function(){function e(){i(this,e),this.next=this.g=this.h=null}return o(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function yl(e){Hs.setTimeout((function(){throw e}),0)}function ml(e,t){hl||function(){var e=Hs.Promise.resolve(void 0);hl=function(){e.then(wl)}}(),gl||(hl(),gl=!0),kl.add(e,t)}var gl=!1,kl=new dl;function wl(){for(var e;e=fl();){try{e.h.call(e.g)}catch(n){yl(n)}var t=pl;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}gl=!1}function bl(e,t){ul.call(this),this.h=e||1,this.g=t||Hs,this.j=tc(this.kb,this),this.l=Date.now()}function _l(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function xl(e,t,n){if("function"===typeof e)n&&(e=tc(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=tc(e.handleEvent,e)}return 2147483647<Number(t)?-1:Hs.setTimeout(e,t||0)}function Il(e){e.g=xl((function(){e.g=null,e.i&&(e.i=!1,Il(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}rc(bl,ul),(zs=bl.prototype).da=!1,zs.S=null,zs.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),sl(this,"tick"),this.da&&(_l(this),this.start()))}},zs.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},zs.M=function(){bl.Z.M.call(this),_l(this),delete this.g};var El=function(e){s(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this)).m=e,a.j=r,a.h=null,a.i=!1,a.g=null,a}return o(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Il(this)}},{key:"M",value:function(){Nt(c(n.prototype),"M",this).call(this),this.g&&(Hs.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(ic);function Tl(e){ic.call(this),this.h=e,this.g={}}rc(Tl,ic);var Sl=[];function Cl(e,t,n,r){Array.isArray(n)||(n&&(Sl[0]=n.toString()),n=Sl);for(var i=0;i<n.length;i++){var a=Jc(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Al(e){mc(e.g,(function(e,t){this.g.hasOwnProperty(t)&&tl(e)}),e),e.g={}}function Nl(){this.g=!0}function Rl(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return ll(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Tl.prototype.M=function(){Tl.Z.M.call(this),Al(this)},Tl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Nl.prototype.Aa=function(){this.g=!1},Nl.prototype.info=function(){};var Dl={},Pl=null;function Ol(){return Pl=Pl||new ul}function Ll(e){Vc.call(this,Dl.Ma,e)}function Ml(e){var t=Ol();sl(t,new Ll(t,e))}function Fl(e,t){Vc.call(this,Dl.STAT_EVENT,e),this.stat=t}function Ul(e){var t=Ol();sl(t,new Fl(t,e))}function Vl(e,t){Vc.call(this,Dl.Na,e),this.size=t}function jl(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Hs.setTimeout((function(){e()}),t)}Dl.Ma="serverreachability",rc(Ll,Vc),Dl.STAT_EVENT="statevent",rc(Fl,Vc),Dl.Na="timingevent",rc(Vl,Vc);var ql={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Bl={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function zl(){}function Gl(e){return e.h||(e.h=e.i())}function Kl(){}zl.prototype.h=null;var Wl,Hl={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ql(){Vc.call(this,"d")}function Yl(){Vc.call(this,"c")}function $l(){}function Jl(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Tl(this),this.P=Zl,e=Tc?125:void 0,this.W=new bl(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Xl}function Xl(){this.i=null,this.g="",this.h=!1}rc(Ql,Vc),rc(Yl,Vc),rc($l,zl),$l.prototype.g=function(){return new XMLHttpRequest},$l.prototype.i=function(){return{}},Wl=new $l;var Zl=45e3,ef={},tf={};function nf(e,t,n){e.K=1,e.v=Tf(wf(t)),e.s=n,e.U=!0,rf(e,null)}function rf(e,t){e.F=Date.now(),sf(e),e.A=wf(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Vf(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Xl,e.g=qh(e.l,n?t:null,!e.s),0<e.O&&(e.L=new El(tc(e.Ia,e,e.g),e.O)),Cl(e.V,e.g,"readystatechange",e.gb),t=e.H?gc(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ml(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function af(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function of(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=uf(e,n))==tf){4==t&&(e.o=4,Ul(14),i=!1),Rl(e.j,e.m,null,"[Incomplete Response]");break}if(r==ef){e.o=4,Ul(15),Rl(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Rl(e.j,e.m,r,null),df(e,r)}af(e)&&r!=tf&&r!=ef&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ul(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ph(t),t.L=!0,Ul(11))):(Rl(e.j,e.m,n,"[Invalid Chunked Response]"),hf(e),ff(e))}function uf(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?tf:(n=Number(t.substring(n,r)),isNaN(n)?ef:(r+=1)+n>t.length?tf:(t=t.substr(r,n),e.C=r+n,t))}function sf(e){e.Y=Date.now()+e.P,cf(e,e.P)}function cf(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=jl(tc(e.eb,e),t)}function lf(e){e.B&&(Hs.clearTimeout(e.B),e.B=null)}function ff(e){0==e.l.G||e.I||Mh(e.l,e)}function hf(e){lf(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,_l(e.W),Al(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function df(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Hf(n.i,e)))if(n.I=e.N,!e.J&&Hf(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Lh(n),Ih(n)}Dh(n),Ul(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=jl(tc(n.ab,n),6e3));if(1>=Wf(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Uh(n,11)}else if((e.J||n.g==e)&&Lh(n),!lc(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(dc(l,"spdy")||dc(l,"quic")||dc(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Qf(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Ef(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=jh(r,r.H?r.la:null,r.W),d.J){Yf(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(lf(p),sf(p)),r.g=d}else Rh(r);0<n.l.length&&Sh(n)}else"stop"!=a[0]&&"close"!=a[0]||Uh(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Uh(n,7):xh(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Ml(4)}catch(a){}}function pf(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Ys(e)||"string"===typeof e)uc(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Ys(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Ys(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function vf(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof vf)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function yf(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];mf(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)mf(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function mf(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(zs=Jl.prototype).setTimeout=function(e){this.P=e},zs.gb=function(e){e=e.target;var t=this.L;t&&3==gh(e)?t.l():this.Ia(e)},zs.Ia=function(e){try{if(e==this.g)e:{var t=gh(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Tc||this.g&&(this.h.h||this.g.ga()||kh(this.g)))){this.I||4!=t||7==n||Ml(8==n||0>=r?3:2),lf(this);var i=this.g.ba();this.N=i;t:if(af(this)){var a=kh(this.g);e="";var o=a.length,u=4==gh(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){hf(this),ff(this);var s="";break t}this.h.i=new Hs.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!lc(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Ul(12),hf(this),ff(this);break e}Rl(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,df(this,i)}this.U?(of(this,t,s),Tc&&this.i&&3==t&&(Cl(this.V,this.W,"tick",this.fb),this.W.start())):(Rl(this.j,this.m,s,null),df(this,s)),4==t&&hf(this),this.i&&!this.I&&(4==t?Mh(this.l,this):(this.i=!1,sf(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Ul(12)):(this.o=0,Ul(13)),hf(this),ff(this)}}}catch(t){}},zs.fb=function(){if(this.g){var e=gh(this.g),t=this.g.ga();this.C<t.length&&(lf(this),of(this,e,t),this.i&&4!=e&&sf(this))}},zs.cancel=function(){this.I=!0,hf(this)},zs.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Ml(3),Ul(17)),hf(this),this.o=2,ff(this)):cf(this,this.Y-e)},(zs=vf.prototype).R=function(){yf(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},zs.T=function(){return yf(this),this.g.concat()},zs.get=function(e,t){return mf(this.h,e)?this.h[e]:t},zs.set=function(e,t){mf(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},zs.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var gf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function kf(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof kf){this.g=void 0!==t?t:e.g,bf(this,e.j),this.s=e.s,_f(this,e.i),xf(this,e.m),this.l=e.l,t=e.h;var n=new Lf;n.i=t.i,t.g&&(n.g=new vf(t.g),n.h=t.h),If(this,n),this.o=e.o}else e&&(n=String(e).match(gf))?(this.g=!!t,bf(this,n[1]||"",!0),this.s=Sf(n[2]||""),_f(this,n[3]||"",!0),xf(this,n[4]),this.l=Sf(n[5]||"",!0),If(this,n[6]||"",!0),this.o=Sf(n[7]||"")):(this.g=!!t,this.h=new Lf(null,this.g))}function wf(e){return new kf(e)}function bf(e,t,n){e.j=n?Sf(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function _f(e,t,n){e.i=n?Sf(t,!0):t}function xf(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function If(e,t,n){t instanceof Lf?(e.h=t,function(e,t){t&&!e.j&&(Mf(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ff(this,t),Vf(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Cf(t,Pf)),e.h=new Lf(t,e.g))}function Ef(e,t,n){e.h.set(t,n)}function Tf(e){return Ef(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Sf(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Cf(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Af),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Af(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}kf.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Cf(t,Nf,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Cf(t,Nf,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Cf(n,"/"==n.charAt(0)?Df:Rf,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Cf(n,Of)),e.join("")};var Nf=/[#\/\?@]/g,Rf=/[#\?:]/g,Df=/[#\?]/g,Pf=/[#\?@]/g,Of=/#/g;function Lf(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Mf(e){e.g||(e.g=new vf,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ff(e,t){Mf(e),t=jf(e,t),mf(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,mf((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&yf(e)))}function Uf(e,t){return Mf(e),t=jf(e,t),mf(e.g.h,t)}function Vf(e,t,n){Ff(e,t),0<n.length&&(e.i=null,e.g.set(jf(e,t),cc(n)),e.h+=n.length)}function jf(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(zs=Lf.prototype).add=function(e,t){Mf(this),this.i=null,e=jf(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},zs.forEach=function(e,t){Mf(this),this.g.forEach((function(n,r){uc(n,(function(n){e.call(t,n,r,this)}),this)}),this)},zs.T=function(){Mf(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},zs.R=function(e){Mf(this);var t=[];if("string"===typeof e)Uf(this,e)&&(t=sc(t,this.g.get(jf(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=sc(t,e[n])}return t},zs.set=function(e,t){return Mf(this),this.i=null,Uf(this,e=jf(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},zs.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},zs.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var qf=o((function e(t,n){i(this,e),this.h=t,this.g=n}));function Bf(e){this.l=e||Gf,Hs.PerformanceNavigationTiming?e=0<(e=Hs.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Hs.g&&Hs.g.Ea&&Hs.g.Ea()&&Hs.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var zf,Gf=10;function Kf(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Wf(e){return e.h?1:e.g?e.g.size:0}function Hf(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Qf(e,t){e.g?e.g.add(t):e.h=t}function Yf(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function $f(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=N(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return cc(e.i)}function Jf(){}function Xf(){this.g=new Jf}function Zf(e,t,n){var r=n||"";try{pf(e,(function(e,n){var i=e;$s(e)&&(i=ll(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function eh(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function th(e){this.l=e.$b||null,this.j=e.ib||!1}function nh(e,t){ul.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=rh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Bf.prototype.cancel=function(){if(this.i=$f(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=N(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Jf.prototype.stringify=function(e){return Hs.JSON.stringify(e,void 0)},Jf.prototype.parse=function(e){return Hs.JSON.parse(e,void 0)},rc(th,zl),th.prototype.g=function(){return new nh(this.l,this.j)},th.prototype.i=(zf={},function(){return zf}),rc(nh,ul);var rh=0;function ih(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function ah(e){e.readyState=4,e.l=null,e.j=null,e.A=null,oh(e)}function oh(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(zs=nh.prototype).open=function(e,t){if(this.readyState!=rh)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,oh(this)},zs.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Hs).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},zs.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ah(this)),this.readyState=rh},zs.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,oh(this)),this.g&&(this.readyState=3,oh(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Hs.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ih(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},zs.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ah(this):oh(this),3==this.readyState&&ih(this)}},zs.Ua=function(e){this.g&&(this.response=this.responseText=e,ah(this))},zs.Ta=function(e){this.g&&(this.response=e,ah(this))},zs.ha=function(){this.g&&ah(this)},zs.setRequestHeader=function(e,t){this.v.append(e,t)},zs.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},zs.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(nh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var uh=Hs.JSON.parse;function sh(e){ul.call(this),this.headers=new vf,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ch,this.K=this.L=!1}rc(sh,ul);var ch="",lh=/^https?$/i,fh=["POST","PUT"];function hh(e){return"content-type"==e.toLowerCase()}function dh(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ph(e),yh(e)}function ph(e){e.D||(e.D=!0,sl(e,"complete"),sl(e,"error"))}function vh(e){if(e.h&&"undefined"!=typeof Ws&&(!e.C[1]||4!=gh(e)||2!=e.ba()))if(e.v&&4==gh(e))xl(e.Fa,0,e);else if(sl(e,"readystatechange"),4==gh(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(gf)[1]||null;if(!a&&Hs.self&&Hs.self.location){var o=Hs.self.location.protocol;a=o.substr(0,o.length-1)}i=!lh.test(a?a.toLowerCase():"")}t=i}if(t)sl(e,"complete"),sl(e,"success");else{e.m=6;try{var u=2<gh(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",ph(e)}}finally{yh(e)}}}function yh(e,t){if(e.g){mh(e);var n=e.g,r=e.C[0]?Qs:null;e.g=null,e.C=null,t||sl(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function mh(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Hs.clearTimeout(e.A),e.A=null)}function gh(e){return e.g?e.g.readyState:0}function kh(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case ch:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function wh(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return mc(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ef(e,t,n))}function bh(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function _h(e){this.za=0,this.l=[],this.h=new Nl,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=bh("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=bh("baseRetryDelayMs",5e3,e),this.$a=bh("retryDelaySeedMs",1e4,e),this.Ya=bh("forwardChannelMaxRetries",2,e),this.ra=bh("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Bf(e&&e.concurrentRequestLimit),this.Ca=new Xf,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function xh(e){if(Eh(e),3==e.G){var t=e.V++,n=wf(e.F);Ef(n,"SID",e.J),Ef(n,"RID",t),Ef(n,"TYPE","terminate"),Ah(e,n),(t=new Jl(e,e.h,t,void 0)).K=2,t.v=Tf(wf(n)),n=!1,Hs.navigator&&Hs.navigator.sendBeacon&&(n=Hs.navigator.sendBeacon(t.v.toString(),"")),!n&&Hs.Image&&((new Image).src=t.v,n=!0),n||(t.g=qh(t.l,null),t.g.ea(t.v)),t.F=Date.now(),sf(t)}Vh(e)}function Ih(e){e.g&&(Ph(e),e.g.cancel(),e.g=null)}function Eh(e){Ih(e),e.u&&(Hs.clearTimeout(e.u),e.u=null),Lh(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Hs.clearTimeout(e.m),e.m=null)}function Th(e,t){e.l.push(new qf(e.Za++,t)),3==e.G&&Sh(e)}function Sh(e){Kf(e.i)||e.m||(e.m=!0,ml(e.Ha,e),e.C=0)}function Ch(e,t){var n;n=t?t.m:e.V++;var r=wf(e.F);Ef(r,"SID",e.J),Ef(r,"RID",n),Ef(r,"AID",e.U),Ah(e,r),e.o&&e.s&&wh(r,e.o,e.s),n=new Jl(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Nh(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Qf(e.i,n),nf(n,r,t)}function Ah(e,t){e.j&&pf({},(function(e,n){Ef(t,n,e)}))}function Nh(e,t,n){n=Math.min(e.l.length,n);var r=e.j?tc(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Zf(l,o,"req"+c+"_")}catch(pd){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Rh(e){e.g||e.u||(e.Y=1,ml(e.Ga,e),e.A=0)}function Dh(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=jl(tc(e.Ga,e),Fh(e,e.A)),e.A++,!0)}function Ph(e){null!=e.B&&(Hs.clearTimeout(e.B),e.B=null)}function Oh(e){e.g=new Jl(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=wf(e.oa);Ef(t,"RID","rpc"),Ef(t,"SID",e.J),Ef(t,"CI",e.N?"0":"1"),Ef(t,"AID",e.U),Ah(e,t),Ef(t,"TYPE","xmlhttp"),e.o&&e.s&&wh(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Tf(wf(t)),n.s=null,n.U=!0,rf(n,e)}function Lh(e){null!=e.v&&(Hs.clearTimeout(e.v),e.v=null)}function Mh(e,t){var n=null;if(e.g==t){Lh(e),Ph(e),e.g=null;var r=2}else{if(!Hf(e.i,t))return;n=t.D,Yf(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;sl(r=Ol(),new Vl(r,n,t,i)),Sh(e)}else Rh(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Wf(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=jl(tc(e.Ha,e,t),Fh(e,e.C)),e.C++,!0))}(e,t)||2==r&&Dh(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Uh(e,5);break;case 4:Uh(e,10);break;case 3:Uh(e,6);break;default:Uh(e,2)}}function Fh(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Uh(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=tc(e.jb,e);n||(n=new kf("//www.google.com/images/cleardot.gif"),Hs.location&&"http"==Hs.location.protocol||bf(n,"https"),Tf(n)),function(e,t){var n=new Nl;if(Hs.Image){var r=new Image;r.onload=nc(eh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=nc(eh,n,r,"TestLoadImage: error",!1,t),r.onabort=nc(eh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=nc(eh,n,r,"TestLoadImage: timeout",!1,t),Hs.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ul(2);e.G=0,e.j&&e.j.va(t),Vh(e),Eh(e)}function Vh(e){e.G=0,e.I=-1,e.j&&(0==$f(e.i).length&&0==e.l.length||(e.i.i.length=0,cc(e.l),e.l.length=0),e.j.ua())}function jh(e,t,n){var r=function(e){return e instanceof kf?wf(e):new kf(e,void 0)}(n);if(""!=r.i)t&&_f(r,t+"."+r.i),xf(r,r.m);else{var i=Hs.location;r=function(e,t,n,r){var i=new kf(null,void 0);return e&&bf(i,e),t&&_f(i,t),n&&xf(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&mc(e.aa,(function(e,t){Ef(r,t,e)})),t=e.D,n=e.sa,t&&n&&Ef(r,t,n),Ef(r,"VER",e.ma),Ah(e,r),r}function qh(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new sh(new th({ib:!0})):new sh(e.qa)).L=e.H,t}function Bh(){}function zh(){if(Ic&&!(10<=Number(Fc)))throw Error("Environmental error: no available transport.")}function Gh(e,t){ul.call(this),this.g=new _h(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!lc(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!lc(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Hh(this)}function Kh(e){Ql.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Wh(){Yl.call(this),this.status=1}function Hh(e){this.g=e}(zs=sh.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Wl.g(),this.C=this.u?Gl(this.u):Gl(Wl),this.g.onreadystatechange=tc(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void dh(this,a)}e=n||"";var i=new vf(this.headers);r&&pf(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=hh,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Hs.FormData&&e instanceof Hs.FormData,!(0<=oc(fh,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{mh(this),0<this.B&&((this.K=function(e){return Ic&&Lc()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=tc(this.pa,this)):this.A=xl(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){dh(this,a)}},zs.pa=function(){"undefined"!=typeof Ws&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,sl(this,"timeout"),this.abort(8))},zs.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,sl(this,"complete"),sl(this,"abort"),yh(this))},zs.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),yh(this,!0)),sh.Z.M.call(this)},zs.Fa=function(){this.s||(this.F||this.v||this.l?vh(this):this.cb())},zs.cb=function(){vh(this)},zs.ba=function(){try{return 2<gh(this)?this.g.status:-1}catch(zf){return-1}},zs.ga=function(){try{return this.g?this.g.responseText:""}catch(zf){return""}},zs.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),uh(t)}},zs.Da=function(){return this.m},zs.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(zs=_h.prototype).ma=8,zs.G=1,zs.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},zs.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Jl(this,this.h,e,void 0),n=this.s;if(this.P&&(n?wc(n=gc(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Nh(this,t,r),Ef(i=wf(this.F),"RID",e),Ef(i,"CVER",22),this.D&&Ef(i,"X-HTTP-Session-Id",this.D),Ah(this,i),this.o&&n&&wh(i,this.o,n),Qf(this.i,t),this.Ra&&Ef(i,"TYPE","init"),this.ja?(Ef(i,"$req",r),Ef(i,"SID","null"),t.$=!0,nf(t,i,null)):nf(t,i,r),this.G=2}}else 3==this.G&&(e?Ch(this,e):0==this.l.length||Kf(this.i)||Ch(this))},zs.Ga=function(){if(this.u=null,Oh(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=jl(tc(this.bb,this),e)}},zs.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ul(10),Ih(this),Oh(this))},zs.ab=function(){null!=this.v&&(this.v=null,Ih(this),Dh(this),Ul(19))},zs.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Ul(2)):(this.h.info("Failed to ping google.com"),Ul(1))},(zs=Bh.prototype).xa=function(){},zs.wa=function(){},zs.va=function(){},zs.ua=function(){},zs.Oa=function(){},zh.prototype.g=function(e,t){return new Gh(e,t)},rc(Gh,ul),Gh.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),ml(tc(e.hb,e,t))),Ul(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=jh(e,null,e.W),Sh(e)},Gh.prototype.close=function(){xh(this.g)},Gh.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Th(this.g,t)}else this.v?((t={}).__data__=ll(e),Th(this.g,t)):Th(this.g,e)},Gh.prototype.M=function(){this.g.j=null,delete this.j,xh(this.g),delete this.g,Gh.Z.M.call(this)},rc(Kh,Ql),rc(Wh,Yl),rc(Hh,Bh),Hh.prototype.xa=function(){sl(this.g,"a")},Hh.prototype.wa=function(e){sl(this.g,new Kh(e))},Hh.prototype.va=function(e){sl(this.g,new Wh(e))},Hh.prototype.ua=function(){sl(this.g,"b")},zh.prototype.createWebChannel=zh.prototype.g,Gh.prototype.send=Gh.prototype.u,Gh.prototype.open=Gh.prototype.m,Gh.prototype.close=Gh.prototype.close,ql.NO_ERROR=0,ql.TIMEOUT=8,ql.HTTP_ERROR=6,Bl.COMPLETE="complete",Kl.EventType=Hl,Hl.OPEN="a",Hl.CLOSE="b",Hl.ERROR="c",Hl.MESSAGE="d",ul.prototype.listen=ul.prototype.N,sh.prototype.listenOnce=sh.prototype.O,sh.prototype.getLastError=sh.prototype.La,sh.prototype.getLastErrorCode=sh.prototype.Da,sh.prototype.getStatus=sh.prototype.ba,sh.prototype.getResponseJson=sh.prototype.Qa,sh.prototype.getResponseText=sh.prototype.ga,sh.prototype.send=sh.prototype.ea;var Qh=Ks.createWebChannelTransport=function(){return new zh},Yh=Ks.getStatEventTarget=function(){return Ol()},$h=Ks.ErrorCode=ql,Jh=Ks.EventType=Bl,Xh=Ks.Event=Dl,Zh=Ks.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ed=Ks.FetchXmlHttpFactory=th,td=Ks.WebChannel=Kl,nd=Ks.XhrIo=sh,rd="@firebase/firestore",id=function(){function e(t){i(this,e),this.uid=t}return o(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();id.UNAUTHENTICATED=new id(null),id.GOOGLE_CREDENTIALS=new id("google-credentials-uid"),id.FIRST_PARTY=new id("first-party-uid"),id.MOCK_USER=new id("mock-user");var ad="9.6.10",od=new Oe("@firebase/firestore");function ud(){return od.logLevel}function sd(e){if(od.logLevel<=Ee.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(fd);od.debug.apply(od,["Firestore (".concat(ad,"): ").concat(e)].concat(ge(i)))}}function cd(e){if(od.logLevel<=Ee.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(fd);od.error.apply(od,["Firestore (".concat(ad,"): ").concat(e)].concat(ge(i)))}}function ld(e){if(od.logLevel<=Ee.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(fd);od.warn.apply(od,["Firestore (".concat(ad,"): ").concat(e)].concat(ge(i)))}}function fd(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function hd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(ad,") INTERNAL ASSERTION FAILED: ")+e;throw cd(t),new Error(t)}function dd(e,t){e||hd()}function pd(e,t){return e}var vd={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},yd=function(e){s(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this,e,r)).code=e,a.message=r,a.toString=function(){return"".concat(a.name,": [code=").concat(a.code,"]: ").concat(a.message)},a}return o(n)}(X),md=o((function e(){var t=this;i(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),gd=o((function e(t,n){i(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),kd=function(){function e(){i(this,e)}return o(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(id.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),wd=function(){function e(t){i(this,e),this.token=t,this.changeListener=null}return o(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),bd=function(){function e(t){i(this,e),this.t=t,this.currentUser=id.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return o(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new md;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new md,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(we(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){sd("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(sd("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new md)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(sd("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(dd("string"==typeof n.accessToken),new gd(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return dd(null===e||"string"==typeof e),new id(e)}}]),e}(),_d=o((function e(t,n,r){i(this,e),this.type="FirstParty",this.user=id.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var a=t.auth.getAuthHeaderValueForFirstParty([]);a&&this.headers.set("Authorization",a),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),xd=function(){function e(t,n,r){i(this,e),this.h=t,this.l=n,this.m=r}return o(e,[{key:"getToken",value:function(){return Promise.resolve(new _d(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(id.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Id=o((function e(t){i(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Ed=function(){function e(t){i(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return o(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&sd("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,sd("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){sd("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):sd("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(dd("string"==typeof t.token),e.p=t.token,new Id(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Td=function(){function e(t,n){var r=this;i(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return o(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Sd(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Td.A=-1;var Cd=function(){function e(){i(this,e)}return o(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Sd(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Ad(e,t){return e<t?-1:e>t?1:0}function Nd(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Rd(e){return e+"\0"}var Dd=function(){function e(t,n){if(i(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new yd(vd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new yd(vd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new yd(vd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new yd(vd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return o(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Ad(this.nanoseconds,e.nanoseconds):Ad(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Pd=function(){function e(t){i(this,e),this.timestamp=t}return o(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Dd(0,0))}},{key:"max",value:function(){return new e(new Dd(253402300799,999999999))}}]),e}();function Od(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ld(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Md(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Fd=function(){function e(t,n,r){i(this,e),void 0===n?n=0:n>t.length&&hd(),void 0===r?r=t.length-n:r>t.length-n&&hd(),this.segments=t,this.offset=n,this.len=r}return o(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Ud=function(e){s(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return o(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new yd(vd.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,ge(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Fd),Vd=/^[_a-zA-Z][_a-zA-Z0-9]*$/,jd=function(e){s(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return o(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Vd.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new yd(vd.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new yd(vd.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new yd(vd.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new yd(vd.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Fd),qd=function(){function e(t){i(this,e),this.fields=t,t.sort(jd.comparator)}return o(e,[{key:"covers",value:function(e){var t,n=N(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Nd(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Bd=function(e){function t(e){i(this,t),this.binaryString=e}return o(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Ad(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Bd.EMPTY_BYTE_STRING=new Bd("");var zd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gd(e){if(dd(!!e),"string"==typeof e){var t=0,n=zd.exec(e);if(dd(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Kd(e.seconds),nanos:Kd(e.nanos)}}function Kd(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Wd(e){return"string"==typeof e?Bd.fromBase64String(e):Bd.fromUint8Array(e)}function Hd(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Qd(e){var t=e.mapValue.fields.__previous_value__;return Hd(t)?Qd(t):t}function Yd(e){var t=Gd(e.mapValue.fields.__local_write_time__.timestampValue);return new Dd(t.seconds,t.nanos)}var $d=o((function e(t,n,r,a,o,u,s,c){i(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=s,this.useFetchStreams=c})),Jd=function(){function e(t,n){i(this,e),this.projectId=t,this.database=n||"(default)"}return o(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Xd(e){return null==e}function Zd(e){return 0===e&&1/e==-1/0}function ep(e){return"number"==typeof e&&Number.isInteger(e)&&!Zd(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var tp=function(){function e(t){i(this,e),this.path=t}return o(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Ud.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Ud.fromString(t))}},{key:"fromName",value:function(t){return new e(Ud.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Ud.emptyPath())}},{key:"comparator",value:function(e,t){return Ud.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Ud(t.slice()))}}]),e}(),np={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},rp={nullValue:"NULL_VALUE"};function ip(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Hd(e)?4:gp(e)?9:10:hd()}function ap(e,t){if(e===t)return!0;var n=ip(e);if(n!==ip(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Yd(e).isEqual(Yd(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Gd(e.timestampValue),r=Gd(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Wd(e.bytesValue).isEqual(Wd(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Kd(e.geoPointValue.latitude)===Kd(t.geoPointValue.latitude)&&Kd(e.geoPointValue.longitude)===Kd(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Kd(e.integerValue)===Kd(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Kd(e.doubleValue),r=Kd(t.doubleValue);return n===r?Zd(n)===Zd(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Nd(e.arrayValue.values||[],t.arrayValue.values||[],ap);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Od(n)!==Od(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ap(n[i],r[i])))return!1;return!0}(e,t);default:return hd()}}function op(e,t){return void 0!==(e.values||[]).find((function(e){return ap(e,t)}))}function up(e,t){if(e===t)return 0;var n=ip(e),r=ip(t);if(n!==r)return Ad(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ad(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Kd(e.integerValue||e.doubleValue),r=Kd(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return sp(e.timestampValue,t.timestampValue);case 4:return sp(Yd(e),Yd(t));case 5:return Ad(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Wd(e),r=Wd(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Ad(n[i],r[i]);if(0!==a)return a}return Ad(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Ad(Kd(e.latitude),Kd(t.latitude));return 0!==n?n:Ad(Kd(e.longitude),Kd(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=up(n[i],r[i]);if(a)return a}return Ad(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Ad(r[o],a[o]);if(0!==u)return u;var s=up(n[r[o]],i[a[o]]);if(0!==s)return s}return Ad(r.length,a.length)}(e.mapValue,t.mapValue);default:throw hd()}}function sp(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ad(e,t);var n=Gd(e),r=Gd(t),i=Ad(n.seconds,r.seconds);return 0!==i?i:Ad(n.nanos,r.nanos)}function cp(e){return lp(e)}function lp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Gd(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Wd(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,tp.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=N(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=lp(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=N(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(lp(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):hd();var t,n}function fp(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function hp(e){return!!e&&"integerValue"in e}function dp(e){return!!e&&"arrayValue"in e}function pp(e){return!!e&&"nullValue"in e}function vp(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function yp(e){return!!e&&"mapValue"in e}function mp(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Ld(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=mp(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=mp(e.arrayValue.values[r]);return n}return Object.assign({},e)}function gp(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function kp(e,t){return void 0===e?t:void 0===t||up(e,t)>0?e:t}function wp(e,t){return void 0===e?t:void 0===t||up(e,t)<0?e:t}var bp=function(){function e(t){i(this,e),this.value=t}return o(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!yp(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mp(t)}},{key:"setAll",value:function(e){var t=this,n=jd.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=mp(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());yp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return ap(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];yp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Ld(t,(function(t,n){return e[t]=n}));var r,i=N(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(mp(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function _p(e){var t=[];return Ld(e.fields,(function(e,n){var r=new jd([e]);if(yp(n)){var i=_p(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=N(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new qd(t)}var xp=function(){function e(t,n,r,a,o,u){i(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=a,this.data=o,this.documentState=u}return o(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=bp.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=bp.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Pd.min(),Pd.min(),bp.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Pd.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Pd.min(),bp.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Pd.min(),bp.empty(),2)}}]),e}(),Ip=o((function e(t,n,r,a){i(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=a}));function Ep(e){return e.fields.find((function(e){return 2===e.kind}))}function Tp(e){return e.fields.filter((function(e){return 2!==e.kind}))}Ip.UNKNOWN_ID=-1;var Sp=o((function e(t,n){i(this,e),this.fieldPath=t,this.kind=n})),Cp=function(){function e(t,n){i(this,e),this.sequenceNumber=t,this.offset=n}return o(e,null,[{key:"empty",value:function(){return new e(0,Rp.min())}}]),e}();function Ap(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Pd.fromTimestamp(1e9===r?new Dd(n+1,0):new Dd(n,r));return new Rp(i,tp.empty(),t)}function Np(e){return new Rp(e.readTime,e.key,-1)}var Rp=function(){function e(t,n,r){i(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return o(e,null,[{key:"min",value:function(){return new e(Pd.min(),tp.empty(),-1)}},{key:"max",value:function(){return new e(Pd.max(),tp.empty(),-1)}}]),e}();function Dp(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=tp.comparator(e.documentKey,t.documentKey))?n:Ad(e.largestBatchId,t.largestBatchId)}var Pp=o((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;i(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=o,this.startAt=u,this.endAt=s,this.P=null}));function Op(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Pp(e,t,n,r,i,a,o)}function Lp(e){var t=pd(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+cp(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Xd(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return cp(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return cp(e)})).join(",")),t.P=n}return t.P}function Mp(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!$p(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!ap(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Xp(e.startAt,t.startAt)&&Xp(e.endAt,t.endAt)}function Fp(e){return tp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Up(e,t){return e.filters.filter((function(e){return e instanceof Vp&&e.field.isEqual(t)}))}var Vp=function(e){s(n,e);var t=p(n);function n(e,r,a){var o;return i(this,n),(o=t.call(this)).field=e,o.op=r,o.value=a,o}return o(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(up(t,this.value)):null!==t&&ip(this.value)===ip(t)&&this.v(up(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return hd()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new jp(e,t,r):"array-contains"===t?new Gp(e,r):"in"===t?new Kp(e,r):"not-in"===t?new Wp(e,r):"array-contains-any"===t?new Hp(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new qp(e,n):new Bp(e,n)}}]),n}(function(){return o((function e(){i(this,e)}))}()),jp=function(e){s(n,e);var t=p(n);function n(e,r,a){var o;return i(this,n),(o=t.call(this,e,r,a)).key=tp.fromName(a.referenceValue),o}return o(n,[{key:"matches",value:function(e){var t=tp.comparator(e.key,this.key);return this.v(t)}}]),n}(Vp),qp=function(e){s(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this,e,"in",r)).keys=zp("in",r),a}return o(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Vp),Bp=function(e){s(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this,e,"not-in",r)).keys=zp("not-in",r),a}return o(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Vp);function zp(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return tp.fromName(e.referenceValue)}))}var Gp=function(e){s(n,e);var t=p(n);function n(e,r){return i(this,n),t.call(this,e,"array-contains",r)}return o(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return dp(t)&&op(t.arrayValue,this.value)}}]),n}(Vp),Kp=function(e){s(n,e);var t=p(n);function n(e,r){return i(this,n),t.call(this,e,"in",r)}return o(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&op(this.value.arrayValue,t)}}]),n}(Vp),Wp=function(e){s(n,e);var t=p(n);function n(e,r){return i(this,n),t.call(this,e,"not-in",r)}return o(n,[{key:"matches",value:function(e){if(op(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!op(this.value.arrayValue,t)}}]),n}(Vp),Hp=function(e){s(n,e);var t=p(n);function n(e,r){return i(this,n),t.call(this,e,"array-contains-any",r)}return o(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!dp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return op(t.value.arrayValue,e)}))}}]),n}(Vp),Qp=o((function e(t,n){i(this,e),this.position=t,this.inclusive=n})),Yp=o((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";i(this,e),this.field=t,this.dir=n}));function $p(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Jp(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?tp.comparator(tp.fromName(o.referenceValue),n.key):up(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Xp(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!ap(e.position[n],t.position[n]))return!1;return!0}var Zp=o((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;i(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=o,this.limitType=u,this.startAt=s,this.endAt=c,this.D=null,this.C=null,this.startAt,this.endAt}));function ev(e,t,n,r,i,a,o,u){return new Zp(e,t,n,r,i,a,o,u)}function tv(e){return new Zp(e)}function nv(e){return!Xd(e.limit)&&"F"===e.limitType}function rv(e){return!Xd(e.limit)&&"L"===e.limitType}function iv(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function av(e){var t,n=N(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function ov(e){return null!==e.collectionGroup}function uv(e){var t=pd(e);if(null===t.D){t.D=[];var n=av(t),r=iv(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new Yp(n)),t.D.push(new Yp(jd.keyField(),"asc"));else{var i,a=!1,o=N(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Yp(jd.keyField(),s))}}}return t.D}function sv(e){var t=pd(e);if(!t.C)if("F"===t.limitType)t.C=Op(t.path,t.collectionGroup,uv(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=N(uv(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Yp(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Qp(t.endAt.position,!t.endAt.inclusive):null,s=t.startAt?new Qp(t.startAt.position,!t.startAt.inclusive):null;t.C=Op(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function cv(e,t,n){return new Zp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function lv(e,t){return Mp(sv(e),sv(t))&&e.limitType===t.limitType}function fv(e){return"".concat(Lp(sv(e)),"|lt:").concat(e.limitType)}function hv(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(cp(t.value));var t})).join(", "),"]")),Xd(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return cp(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return cp(e)})).join(",")),"Target(".concat(t,")")}(sv(e)),"; limitType=").concat(e.limitType,")")}function dv(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):tp.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=N(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=N(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Jp(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,uv(e),t))&&!(e.endAt&&!function(e,t,n){var r=Jp(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,uv(e),t))}(e,t)}function pv(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function vv(e){return function(t,n){var r,i=!1,a=N(uv(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=yv(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function yv(e,t,n){var r=e.field.isKeyField()?tp.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?up(r,i):hd()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return hd()}}function mv(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zd(t)?"-0":t}}function gv(e){return{integerValue:""+e}}function kv(e,t){return ep(t)?gv(t):mv(e,t)}var wv=o((function e(){i(this,e),this._=void 0}));function bv(e,t,n){return e instanceof Iv?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Ev?Tv(e,t):e instanceof Sv?Cv(e,t):function(e,t){var n=xv(e,t),r=Nv(n)+Nv(e.k);return hp(n)&&hp(e.k)?gv(r):mv(e.M,r)}(e,t)}function _v(e,t,n){return e instanceof Ev?Tv(e,t):e instanceof Sv?Cv(e,t):n}function xv(e,t){return e instanceof Av?hp(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Iv=function(e){s(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return o(n)}(wv),Ev=function(e){s(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this)).elements=e,r}return o(n)}(wv);function Tv(e,t){var n,r=Rv(t),i=N(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return ap(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Sv=function(e){s(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this)).elements=e,r}return o(n)}(wv);function Cv(e,t){var n,r=Rv(t),i=N(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!ap(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Av=function(e){s(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this)).M=e,a.k=r,a}return o(n)}(wv);function Nv(e){return Kd(e.integerValue||e.doubleValue)}function Rv(e){return dp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Dv=o((function e(t,n){i(this,e),this.field=t,this.transform=n}));var Pv=o((function e(t,n){i(this,e),this.version=t,this.transformResults=n})),Ov=function(){function e(t,n){i(this,e),this.updateTime=t,this.exists=n}return o(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Lv(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Mv=o((function e(){i(this,e)}));function Fv(e,t,n){e instanceof Bv?function(e,t,n){var r=e.value.clone(),i=Kv(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof zv?function(e,t,n){if(Lv(e.precondition,t)){var r=Kv(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Gv(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Uv(e,t,n){e instanceof Bv?function(e,t,n){if(Lv(e.precondition,t)){var r=e.value.clone(),i=Wv(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(qv(t),r).setHasLocalMutations()}}(e,t,n):e instanceof zv?function(e,t,n){if(Lv(e.precondition,t)){var r=Wv(e.fieldTransforms,n,t),i=t.data;i.setAll(Gv(e)),i.setAll(r),t.convertToFoundDocument(qv(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Lv(e.precondition,t)&&t.convertToNoDocument(Pd.min())}(e,t)}function Vv(e,t){var n,r=null,i=N(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=xv(a.transform,o||null);null!=u&&(null==r&&(r=bp.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function jv(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Nd(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ev&&t instanceof Ev||e instanceof Sv&&t instanceof Sv?Nd(e.elements,t.elements,ap):e instanceof Av&&t instanceof Av?ap(e.k,t.k):e instanceof Iv&&t instanceof Iv}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function qv(e){return e.isFoundDocument()?e.version:Pd.min()}var Bv=function(e){s(n,e);var t=p(n);function n(e,r,a){var o,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return i(this,n),(o=t.call(this)).key=e,o.value=r,o.precondition=a,o.fieldTransforms=u,o.type=0,o}return o(n)}(Mv),zv=function(e){s(n,e);var t=p(n);function n(e,r,a,o){var u,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return i(this,n),(u=t.call(this)).key=e,u.data=r,u.fieldMask=a,u.precondition=o,u.fieldTransforms=s,u.type=1,u}return o(n)}(Mv);function Gv(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Kv(e,t,n){var r=new Map;dd(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,_v(o,u,n[i]))}return r}function Wv(e,t,n){var r,i=new Map,a=N(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,bv(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Hv,Qv,Yv=function(e){s(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this)).key=e,a.precondition=r,a.type=2,a.fieldTransforms=[],a}return o(n)}(Mv),$v=function(e){s(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this)).key=e,a.precondition=r,a.type=3,a.fieldTransforms=[],a}return o(n)}(Mv),Jv=o((function e(t){i(this,e),this.count=t}));function Xv(e){switch(e){default:return hd();case vd.CANCELLED:case vd.UNKNOWN:case vd.DEADLINE_EXCEEDED:case vd.RESOURCE_EXHAUSTED:case vd.INTERNAL:case vd.UNAVAILABLE:case vd.UNAUTHENTICATED:return!1;case vd.INVALID_ARGUMENT:case vd.NOT_FOUND:case vd.ALREADY_EXISTS:case vd.PERMISSION_DENIED:case vd.FAILED_PRECONDITION:case vd.ABORTED:case vd.OUT_OF_RANGE:case vd.UNIMPLEMENTED:case vd.DATA_LOSS:return!0}}function Zv(e){if(void 0===e)return cd("GRPC error has no .code"),vd.UNKNOWN;switch(e){case Hv.OK:return vd.OK;case Hv.CANCELLED:return vd.CANCELLED;case Hv.UNKNOWN:return vd.UNKNOWN;case Hv.DEADLINE_EXCEEDED:return vd.DEADLINE_EXCEEDED;case Hv.RESOURCE_EXHAUSTED:return vd.RESOURCE_EXHAUSTED;case Hv.INTERNAL:return vd.INTERNAL;case Hv.UNAVAILABLE:return vd.UNAVAILABLE;case Hv.UNAUTHENTICATED:return vd.UNAUTHENTICATED;case Hv.INVALID_ARGUMENT:return vd.INVALID_ARGUMENT;case Hv.NOT_FOUND:return vd.NOT_FOUND;case Hv.ALREADY_EXISTS:return vd.ALREADY_EXISTS;case Hv.PERMISSION_DENIED:return vd.PERMISSION_DENIED;case Hv.FAILED_PRECONDITION:return vd.FAILED_PRECONDITION;case Hv.ABORTED:return vd.ABORTED;case Hv.OUT_OF_RANGE:return vd.OUT_OF_RANGE;case Hv.UNIMPLEMENTED:return vd.UNIMPLEMENTED;case Hv.DATA_LOSS:return vd.DATA_LOSS;default:return hd()}}(Qv=Hv||(Hv={}))[Qv.OK=0]="OK",Qv[Qv.CANCELLED=1]="CANCELLED",Qv[Qv.UNKNOWN=2]="UNKNOWN",Qv[Qv.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qv[Qv.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qv[Qv.NOT_FOUND=5]="NOT_FOUND",Qv[Qv.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qv[Qv.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qv[Qv.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qv[Qv.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qv[Qv.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qv[Qv.ABORTED=10]="ABORTED",Qv[Qv.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qv[Qv.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qv[Qv.INTERNAL=13]="INTERNAL",Qv[Qv.UNAVAILABLE=14]="UNAVAILABLE",Qv[Qv.DATA_LOSS=15]="DATA_LOSS";var ey=function(){function e(t,n){i(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return o(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=N(n);try{for(i.s();!(r=i.n()).done;){var a=P(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Ld(this.inner,(function(t,n){var r,i=N(n);try{for(i.s();!(r=i.n()).done;){var a=P(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Md(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),ty=function(){function e(t,n){i(this,e),this.comparator=t,this.root=n||ry.EMPTY}return o(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ry.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ry.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new ny(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new ny(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new ny(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new ny(this.root,e,this.comparator,!0)}}]),e}(),ny=function(){function e(t,n,r,a){i(this,e),this.isReverse=a,this.nodeStack=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,n&&a&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(0===o){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return o(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),ry=function(){function e(t,n,r,a,o){i(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=a?a:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return o(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw hd();if(this.right.isRed())throw hd();var e=this.left.check();if(e!==this.right.check())throw hd();return e+(this.isRed()?0:1)}}]),e}();ry.EMPTY=null,ry.RED=!0,ry.BLACK=!1,ry.EMPTY=new(function(){function e(){i(this,e),this.size=0}return o(e,[{key:"key",get:function(){throw hd()}},{key:"value",get:function(){throw hd()}},{key:"color",get:function(){throw hd()}},{key:"left",get:function(){throw hd()}},{key:"right",get:function(){throw hd()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new ry(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var iy=function(){function e(t){i(this,e),this.comparator=t,this.data=new ty(this.comparator)}return o(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new ay(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new ay(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),ay=function(){function e(t){i(this,e),this.iter=t}return o(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function oy(e){return e.hasNext()?e.getNext():void 0}var uy=new ty(tp.comparator);function sy(){return uy}var cy=new ty(tp.comparator);function ly(){return cy}function fy(){return new ey((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var hy=new ty(tp.comparator),dy=new iy(tp.comparator);function py(){for(var e=dy,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var vy=new iy(Ad);function yy(){return vy}var my=function(){function e(t,n,r,a,o){i(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=o}return o(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,gy.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Pd.min(),r,yy(),sy(),py())}}]),e}(),gy=function(){function e(t,n,r,a,o){i(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=o}return o(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Bd.EMPTY_BYTE_STRING,n,py(),py(),py())}}]),e}(),ky=o((function e(t,n,r,a){i(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=a})),wy=o((function e(t,n){i(this,e),this.targetId=t,this.$=n})),by=o((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bd.EMPTY_BYTE_STRING,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;i(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=a})),_y=function(){function e(){i(this,e),this.B=0,this.L=Ey(),this.U=Bd.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}return o(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"K",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.G}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}},{key:"H",value:function(){var e=py(),t=py(),n=py();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:hd()}})),new gy(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.G=!1,this.L=Ey()}},{key:"Y",value:function(e,t){this.G=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.G=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.G=!0,this.q=!0}}]),e}(),xy=function(){function e(t){i(this,e),this.nt=t,this.st=new Map,this.it=sy(),this.rt=Iy(),this.ot=new iy(Ad)}return o(e,[{key:"ut",value:function(e){var t,n=N(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=N(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:hd()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(Fp(i))if(0===n){var a=new tp(i.path);this.ct(t,a,xp.newNoDocument(a,Pd.min()))}else dd(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Fp(a.target)){var o=new tp(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,xp.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=py();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new my(e,n,this.ot,this.it,r);return this.it=sy(),this.rt=Iy(),this.ot=new iy(Ad),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new _y,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new iy(Ad),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||sd("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new _y),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Iy(){return new ty(tp.comparator)}function Ey(){return new ty(tp.comparator)}var Ty={asc:"ASCENDING",desc:"DESCENDING"},Sy={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Cy=o((function e(t,n){i(this,e),this.databaseId=t,this.N=n}));function Ay(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ny(e,t){return e.N?t.toBase64():t.toUint8Array()}function Ry(e,t){return Ay(e,t.toTimestamp())}function Dy(e){return dd(!!e),Pd.fromTimestamp(function(e){var t=Gd(e);return new Dd(t.seconds,t.nanos)}(e))}function Py(e,t){return function(e){return new Ud(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Oy(e){var t=Ud.fromString(e);return dd(rm(t)),t}function Ly(e,t){return Py(e.databaseId,t.path)}function My(e,t){var n=Oy(t);if(n.get(1)!==e.databaseId.projectId)throw new yd(vd.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new yd(vd.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new tp(jy(n))}function Fy(e,t){return Py(e.databaseId,t)}function Uy(e){var t=Oy(e);return 4===t.length?Ud.emptyPath():jy(t)}function Vy(e){return new Ud(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function jy(e){return dd(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function qy(e,t,n){return{name:Ly(e,t),fields:n.value.mapValue.fields}}function By(e,t,n){var r=My(e,t.name),i=Dy(t.updateTime),a=new bp({mapValue:{fields:t.fields}}),o=xp.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function zy(e,t){return"found"in t?function(e,t){dd(!!t.found),t.found.name,t.found.updateTime;var n=My(e,t.found.name),r=Dy(t.found.updateTime),i=new bp({mapValue:{fields:t.found.fields}});return xp.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){dd(!!t.missing),dd(!!t.readTime);var n=My(e,t.missing),r=Dy(t.readTime);return xp.newNoDocument(n,r)}(e,t):hd()}function Gy(e,t){var n;if(t instanceof Bv)n={update:qy(e,t.key,t.value)};else if(t instanceof Yv)n={delete:Ly(e,t.key)};else if(t instanceof zv)n={update:qy(e,t.key,t.data),updateMask:nm(t.fieldMask)};else{if(!(t instanceof $v))return hd();n={verify:Ly(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Iv)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ev)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Sv)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Av)return{fieldPath:t.field.canonicalString(),increment:n.k};throw hd()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ry(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:hd()}(e,t.precondition)),n}function Ky(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Ov.updateTime(Dy(e.updateTime)):void 0!==e.exists?Ov.exists(e.exists):Ov.none()}(t.currentDocument):Ov.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)dd("REQUEST_TIME"===t.setToServerValue),n=new Iv;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Ev(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Sv(i)}else"increment"in t?n=new Av(e,t.increment):hd();var a=jd.fromServerFormat(t.fieldPath);return new Dv(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=My(e,t.update.name),a=new bp({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new qd(t.map((function(e){return jd.fromServerFormat(e)})))}(t.updateMask);return new zv(i,a,o,n,r)}return new Bv(i,a,n,r)}if(t.delete){var u=My(e,t.delete);return new Yv(u,n)}if(t.verify){var s=My(e,t.verify);return new $v(s,n)}return hd()}function Wy(e,t){return{documents:[Fy(e,t.path)]}}function Hy(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Fy(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Fy(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(vp(e.value))return{unaryFilter:{field:Xy(e.field),op:"IS_NAN"}};if(pp(e.value))return{unaryFilter:{field:Xy(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(vp(e.value))return{unaryFilter:{field:Xy(e.field),op:"IS_NOT_NAN"}};if(pp(e.value))return{unaryFilter:{field:Xy(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xy(e.field),op:Jy(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Xy(e.field),direction:$y(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||Xd(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Qy(e){var t=Uy(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){dd(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Yy(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Yp(Zy(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Xd(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Qp(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Qp(n,t)}(n.endAt)),ev(t,i,u,o,s,"F",c,l)}function Yy(e){return e?void 0!==e.unaryFilter?[tm(e)]:void 0!==e.fieldFilter?[em(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Yy(e)})).reduce((function(e,t){return e.concat(t)})):hd():[]}function $y(e){return Ty[e]}function Jy(e){return Sy[e]}function Xy(e){return{fieldPath:e.canonicalString()}}function Zy(e){return jd.fromServerFormat(e.fieldPath)}function em(e){return Vp.create(Zy(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return hd()}}(e.fieldFilter.op),e.fieldFilter.value)}function tm(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Zy(e.unaryFilter.field);return Vp.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Zy(e.unaryFilter.field);return Vp.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Zy(e.unaryFilter.field);return Vp.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Zy(e.unaryFilter.field);return Vp.create(i,"!=",{nullValue:"NULL_VALUE"});default:return hd()}}function nm(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function rm(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function im(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=om(t)),t=am(e.get(n),t);return om(t)}function am(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function om(e){return e+"\x01\x01"}function um(e){var t=e.length;if(dd(t>=2),2===t)return dd("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Ud.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&hd(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:hd()}a=o+2}return new Ud(r)}var sm=["userId","batchId"];function cm(e,t){return[e,im(t)]}function lm(e,t,n){return[e,im(t),n]}var fm={},hm=["prefixPath","collectionGroup","readTime","documentId"],dm=["prefixPath","collectionGroup","documentId"],pm=["collectionGroup","readTime","prefixPath","documentId"],vm=["canonicalId","targetId"],ym=["targetId","path"],mm=["path","targetId"],gm=["collectionId","parent"],km=["indexId","uid"],wm=["uid","sequenceNumber"],bm=["indexId","uid","arrayValue","directionalValue","documentKey"],_m=["indexId","uid","documentKey"],xm=["userId","collectionPath","documentId"],Im=["userId","collectionPath","largestBatchId"],Em=["userId","collectionGroup","largestBatchId"],Tm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Sm=[].concat(ge(Tm),["documentOverlays"]),Cm=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Am=[].concat(Cm,["indexConfiguration","indexState","indexEntries"]),Nm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Rm=function(){function e(){i(this,e),this.onCommittedListeners=[]}return o(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),Dm=function(){function e(t){var n=this;i(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return o(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&hd(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=N(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Pm=function(){function e(t,n){var r=this;i(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new md,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new Mm(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=qm(e.target.error);r.At.reject(new Mm(t,n))}}return o(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(sd("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Um(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Mm(n,t)}}}]),e}(),Om=function(){function e(t,n,r){i(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt(K())&&cd("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return o(e,[{key:"Nt",value:function(){var e=we(F().mark((function e(t){var n=this;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return sd("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Mm(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new yd(vd.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new yd(vd.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Mm(t,n))},i.onupgradeneeded=function(e){sd("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){sd("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=we(F().mark((function e(t,n,r,i){var a,o,u,s,c=this;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(F().mark((function e(){var n,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=Pm.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.bt(),e})).catch((function(e){return n.abort(e),Dm.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,sd("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return sd("SimpleDb","Removing database:",e),Vm(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!J())return!1;if(e.St())return!0;var t=K(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/decrasher/react.git",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Lm=function(){function e(t){i(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return o(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return Vm(this.Ft.delete())}}]),e}(),Mm=function(e){s(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this,vd.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",a}return o(n)}(yd);function Fm(e){return"IndexedDbTransactionError"===e.name}var Um=function(){function e(t){i(this,e),this.store=t}return o(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(sd("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(sd("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Vm(n)}},{key:"add",value:function(e){return sd("SimpleDb","ADD",this.store.name,e,e),Vm(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Vm(this.store.get(e)).next((function(n){return void 0===n&&(n=null),sd("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return sd("SimpleDb","DELETE",this.store.name,e),Vm(this.store.delete(e))}},{key:"count",value:function(){return sd("SimpleDb","COUNT",this.store.name),Vm(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Gt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Dm((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Kt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Dm((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){sd("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Gt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Gt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new Dm((function(n,r){t.onerror=function(e){var t=qm(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Gt",value:function(e,t){var n=[];return new Dm((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Lm(i),o=t(i.primaryKey,i.value,a);if(o instanceof Dm){var u=o.catch((function(e){return a.done(),Dm.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return Dm.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Vm(e){return new Dm((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=qm(e.target.error);n(t)}}))}var jm=!1;function qm(e){var t=Om.Vt(K());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new yd("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return jm||(jm=!0,setTimeout((function(){throw r}),0)),r}}return e}var Bm=function(e){s(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this)).Ht=e,a.currentSequenceNumber=r,a}return o(n)}(Rm);function zm(e,t){var n=pd(e);return Om.xt(n.Ht,t)}var Gm=function(){function e(t,n,r,a){i(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}return o(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Fv(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=N(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Uv(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=N(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Uv(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Pd.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),py())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Nd(this.mutations,e.mutations,(function(e,t){return jv(e,t)}))&&Nd(this.baseMutations,e.baseMutations,(function(e,t){return jv(e,t)}))}}]),e}(),Km=function(){function e(t,n,r,a){i(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}return o(e,null,[{key:"from",value:function(t,n,r){dd(t.mutations.length===r.length);for(var i=hy,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Wm=function(){function e(t,n){i(this,e),this.largestBatchId=t,this.mutation=n}return o(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Hm=function(){function e(t,n,r,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Pd.min(),u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Pd.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Bd.EMPTY_BYTE_STRING;i(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=s}return o(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Qm=o((function e(t){i(this,e),this.Jt=t}));function Ym(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:$m(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Ly(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Ay(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Jm(t.version)};else{if(!t.isUnknownDocument())return hd();r.unknownDocument={path:n.path.toArray(),version:Jm(t.version)}}return r}function $m(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Jm(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Xm(e){var t=new Dd(e.seconds,e.nanoseconds);return Pd.fromTimestamp(t)}function Zm(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Ky(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Ky(e.Jt,t)})),u=Dd.fromMillis(t.localWriteTimeMs);return new Gm(t.batchId,u,n,o)}function eg(e){var t,n,r=Xm(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Xm(e.lastLimboFreeSnapshotVersion):Pd.min();return void 0!==e.query.documents?(dd(1===(n=e.query).documents.length),t=sv(tv(Uy(n.documents[0])))):t=function(e){return sv(Qy(e))}(e.query),new Hm(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Bd.fromBase64String(e.resumeToken))}function tg(e,t){var n,r=Jm(t.snapshotVersion),i=Jm(t.lastLimboFreeSnapshotVersion);n=Fp(t.target)?Wy(e.Jt,t.target):Hy(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Lp(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function ng(e){var t=Qy({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?cv(t,t.limit,"L"):t}function rg(e,t){return new Wm(t.largestBatchId,Ky(e.Jt,t.overlayMutation))}function ig(e,t){var n=t.path.lastSegment();return[e,im(t.path.popLast()),n]}var ag=function(){function e(){i(this,e)}return o(e,[{key:"getBundleMetadata",value:function(e,t){return og(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Xm(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return og(e).put({bundleId:(n=t).id,createTime:Jm(Dy(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return ug(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:ng(t.bundledQuery),readTime:Xm(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return ug(e).put(function(e){return{name:e.name,readTime:Jm(Dy(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function og(e){return zm(e,"bundles")}function ug(e){return zm(e,"namedQueries")}var sg=function(){function e(t,n){i(this,e),this.M=t,this.userId=n}return o(e,[{key:"getOverlay",value:function(e,t){var n=this;return cg(e).get(ig(this.userId,t)).next((function(e){return e?rg(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Wm(t,a);i.push(r.Xt(e,o))})),Dm.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(im(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(cg(e).Qt("collectionPathOverlayIndex",i))})),Dm.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=fy(),a=im(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return cg(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=N(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=rg(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=fy(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return cg(e).Wt({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=rg(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return cg(e).put(function(e,t,n){var r=P(ig(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Gy(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function cg(e){return zm(e,"documentOverlays")}var lg=function(){function e(){i(this,e)}return o(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Kd(e.integerValue));else if("doubleValue"in e){var n=Kd(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),Zd(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Wd(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?gp(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):hd()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=N(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),tp.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function fg(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function hg(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=fg(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}lg.fe=new lg;var dg=function(){function e(){i(this,e),this.buffer=new Uint8Array(1024),this.position=0}return o(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=N(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=N(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=hg(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=hg(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),pg=function(){function e(t){i(this,e),this.De=t}return o(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),vg=function(){function e(t){i(this,e),this.De=t}return o(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),yg=function(){function e(){i(this,e),this.De=new dg,this.Ce=new pg(this.De),this.xe=new vg(this.De)}return o(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),mg=function(){function e(t,n,r,a){i(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=a}return o(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function gg(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=kg(e.arrayValue,t.arrayValue))?n:0!==(n=kg(e.directionalValue,t.directionalValue))?n:tp.comparator(e.documentKey,t.documentKey)}function kg(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var wg=function(){function e(t){i(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=N(t.filters);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.S()?this.Fe=a:this.Oe.push(a)}}catch(o){r.e(o)}finally{r.f()}}return o(e,[{key:"$e",value:function(e){var t=Ep(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=Tp(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=N(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),bg=function(){function e(){i(this,e),this.qe=new _g}return o(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),Dm.resolve()}},{key:"getCollectionParents",value:function(e,t){return Dm.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Dm.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Dm.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Dm.resolve(null)}},{key:"getFieldIndex",value:function(e,t){return Dm.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return Dm.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Dm.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return Dm.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Dm.resolve()}}]),e}(),_g=function(){function e(){i(this,e),this.index={}}return o(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new iy(Ud.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new iy(Ud.comparator)).toArray()}}]),e}(),xg=new Uint8Array(0),Ig=function(){function e(t){i(this,e),this.user=t,this.Ge=new _g,this.Ke=new ey((function(e){return Lp(e)}),(function(e,t){return Mp(e,t)})),this.uid=t.uid||""}return o(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ge.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ge.add(t)}));var a={collectionId:r,parent:im(i)};return Eg(e).put(a)}return Dm.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Rd(t),""],!1,!0);return Eg(e).qt(r).next((function(e){var r,i=N(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(um(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=Sg(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Sg(e),r=Cg(e),i=Tg(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Tg(e),i=!0,a=new Map;return Dm.forEach(this.Qe(t),(function(t){return n.getFieldIndex(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=py();return Dm.forEach(a,(function(i,a){var o;sd("IndexedDbIndexManager","Using index ".concat((o=i,"id=".concat(o.indexId,"|cg=").concat(o.collectionGroup,"|f=").concat(o.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Lp(t)));var u=function(e,t){var n=Ep(t);if(void 0===n)return null;var r,i=N(Up(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),s=function(e,t){var n,r=new Map,i=N(Tp(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=N(Up(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r,i=[],a=!0,o=N(Tp(t));try{for(o.s();!(n=o.n()).done;){var u,s=n.value,c=void 0,l=!0,f=N(Up(e,s.fieldPath));try{for(f.s();!(u=f.n()).done;){var h=u.value,d=void 0,p=!0;switch(h.op){case"<":case"<=":d="nullValue"in(r=h.value)?rp:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?fp(Jd.empty(),tp.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:hd();break;case"==":case"in":case">=":d=h.value;break;case">":d=h.value,p=!1;break;case"!=":case"not-in":d=rp}kp(c,d)===d&&(c=d,l=p)}}catch(m){f.e(m)}finally{f.f()}if(null!==e.startAt)for(var v=0;v<e.orderBy.length;++v)if(e.orderBy[v].field.isEqual(s.fieldPath)){var y=e.startAt.position[v];kp(c,y)===y&&(c=y,l=e.startAt.inclusive);break}if(void 0===c)return null;i.push(c),a&&(a=l)}}catch(m){o.e(m)}finally{o.f()}return new Qp(i,a)}(a,i),l=function(e,t){var n,r,i=[],a=!0,o=N(Tp(t));try{for(o.s();!(n=o.n()).done;){var u,s=n.value,c=void 0,l=!0,f=N(Up(e,s.fieldPath));try{for(f.s();!(u=f.n()).done;){var h=u.value,d=void 0,p=!0;switch(h.op){case">=":case">":d="nullValue"in(r=h.value)?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?fp(Jd.empty(),tp.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?np:hd(),p=!1;break;case"==":case"in":case"<=":d=h.value;break;case"<":d=h.value,p=!1;break;case"!=":case"not-in":d=np}wp(c,d)===d&&(c=d,l=p)}}catch(m){f.e(m)}finally{f.f()}if(null!==e.endAt)for(var v=0;v<e.orderBy.length;++v)if(e.orderBy[v].field.isEqual(s.fieldPath)){var y=e.endAt.position[v];wp(c,y)===y&&(c=y,l=e.endAt.inclusive);break}if(void 0===c)return null;i.push(c),a&&(a=l)}}catch(m){o.e(m)}finally{o.f()}return new Qp(i,a)}(a,i),f=n.je(i,a,c),h=n.je(i,a,l),d=n.We(i,a,s),p=n.ze(i.indexId,u,f,!!c&&c.inclusive,h,!!l&&l.inclusive,d);return Dm.forEach(p,(function(n){return r.Kt(n,t.limit).next((function(t){t.forEach((function(t){e=e.add(new tp(um(t.documentKey)))}))}))}))})).next((function(){return e}))}return Dm.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}},{key:"ze",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(null!=n?n.length:1,null!=i?i.length:1),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.He(t[s/c]):xg,h=n?u.Je(e,f,n[s%c],r):u.Ye(e),d=i?u.Xe(e,f,i[s%c],a):u.Ye(e+1);l.push.apply(l,ge(u.createRange(h,d,o.map((function(t){return u.Je(e,f,t,!0)})))))},h=0;h<s;++h)f(h);return l}},{key:"Je",value:function(e,t,n,r){var i=new mg(e,tp.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new mg(e,tp.empty(),t,n);return r?i.ke():i}},{key:"Ye",value:function(e){return new mg(e,tp.empty(),xg,xg)}},{key:"getFieldIndex",value:function(e,t){var n=new wg(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t=e.filter((function(e){return n.$e(e)}));return t.sort((function(e,t){return t.fields.length-e.fields.length})),t.length>0?t[0]:null}))}},{key:"Ze",value:function(e,t){var n,r=new yg,i=N(Tp(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);lg.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"He",value:function(e){var t=new yg;return lg.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"We",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new yg);var i,a=0,o=N(Tp(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=N(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.tn(t,s.fieldPath)&&dp(c))r=this.en(r,s,c);else{var h=f.Ne(s.kind);lg.fe.Zt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.nn(r)}},{key:"je",value:function(e,t,n){return null==n?null:this.We(e,t,n.position)}},{key:"nn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"en",value:function(e,t,n){var r,i=ge(e),a=[],o=N(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=N(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new yg;f.seed(l.Se()),lg.fe.Zt(s,f.Ne(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"tn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Vp&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Sg(e),i=Cg(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return Dm.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Cp(t.sequenceNumber,new Rp(Xm(t.readTime),new tp(um(t.documentKey)),t.largestBatchId)):Cp.empty(),r=e.fields.map((function(e){var t=P(e,2),n=t[0],r=t[1];return new Sp(jd.fromServerFormat(n),r)}));return new Ip(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Ad(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Sg(e),a=Cg(e);return this.sn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Dm.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Jm(r.readTime),documentKey:im(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Dm.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Dm.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Dm.forEach(a,(function(r){return n.rn(e,t,r).next((function(t){var a=n.on(i,r);return t.isEqual(a)?Dm.resolve():n.un(e,i,t,a)}))}))}))}))}},{key:"an",value:function(e,t,n){return Tg(e).put({indexId:n.indexId,uid:this.uid,arrayValue:n.arrayValue,directionalValue:n.directionalValue,documentKey:im(t.key.path)})}},{key:"cn",value:function(e,t,n){return Tg(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,im(t.key.path)])}},{key:"rn",value:function(e,t,n){var r=Tg(e),i=new iy(gg);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,im(t.path)])},(function(e,r){i=i.add(new mg(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"on",value:function(e,t){var n=new iy(gg),r=this.Ze(t,e);if(null==r)return n;var i=Ep(t);if(null!=i){var a=e.data.field(i.fieldPath);if(dp(a)){var o,u=N(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new mg(t.indexId,e.key,this.He(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new mg(t.indexId,e.key,xg,r));return n}},{key:"un",value:function(e,t,n,r){var i=this;sd("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var a=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=oy(a),s=oy(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=oy(o)):l?(i(u),u=oy(a)):(u=oy(a),s=oy(o))}}(n,r,gg,(function(n){a.push(i.an(e,t,n))}),(function(n){a.push(i.cn(e,t,n))})),Dm.waitFor(a)}},{key:"sn",value:function(e){var t=1;return Cg(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return gg(e,t)})).filter((function(e,t,n){return!t||0!==gg(e,n[t-1])}));var r=[];r.push(e);var i,a=N(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=gg(o,e),s=gg(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,""],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,""]));return c}}]),e}();function Eg(e){return zm(e,"collectionParents")}function Tg(e){return zm(e,"indexEntries")}function Sg(e){return zm(e,"indexConfiguration")}function Cg(e){return zm(e,"indexState")}var Ag={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ng=function(){function e(t,n,r){i(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return o(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Rg(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){dd(1===u)})));var c,l=[],f=N(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=lm(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Dm.waitFor(a).next((function(){return l}))}function Dg(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw hd();t=e.noDocument}return JSON.stringify(t).length}Ng.DEFAULT_COLLECTION_PERCENTILE=10,Ng.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ng.DEFAULT=new Ng(41943040,Ng.DEFAULT_COLLECTION_PERCENTILE,Ng.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ng.DISABLED=new Ng(-1,0,0);var Pg=function(){function e(t,n,r,a){i(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=a,this.hn={}}return o(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Lg(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Mg(e),o=Lg(e);return o.add({}).next((function(u){dd("number"==typeof u);var s,c=new Gm(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Gy(e.Jt,t)})),i=n.mutations.map((function(t){return Gy(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],h=new iy((function(e,t){return Ad(e.canonicalString(),t.canonicalString())})),d=N(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=lm(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,fm))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.hn[u]=c.keys()})),Dm.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Lg(e).get(t).next((function(e){return e?(dd(e.userId===n.userId),Zm(n.M,e)):null}))}},{key:"ln",value:function(e,t){var n=this;return this.hn[t]?Dm.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.hn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Lg(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(dd(t.batchId>=r),a=Zm(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Lg(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Lg(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return Zm(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=cm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Mg(e).Wt({range:i},(function(r,i,o){var u=P(r,3),s=u[0],c=u[1],l=u[2],f=um(c);if(s===n.userId&&t.path.isEqual(f))return Lg(e).get(l).next((function(e){if(!e)throw hd();dd(e.userId===n.userId),a.push(Zm(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new iy(Ad),i=[];return t.forEach((function(t){var a=cm(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Mg(e).Wt({range:o},(function(e,i,a){var o=P(e,3),u=o[0],s=o[1],c=o[2],l=um(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Dm.waitFor(i).next((function(){return n.fn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=cm(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new iy(Ad);return Mg(e).Wt({range:o},(function(e,t,a){var o=P(e,3),s=o[0],c=o[1],l=o[2],f=um(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.fn(e,u)}))}},{key:"fn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Lg(e).get(t).next((function(e){if(null===e)throw hd();dd(e.userId===n.userId),r.push(Zm(n.M,e))})))})),Dm.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Rg(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.dn(t.batchId)})),Dm.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"dn",value:function(e){delete this.hn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Dm.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Mg(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=um(e[1]);i.push(a)}else r.done()})).next((function(){dd(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Og(e,this.userId,t)}},{key:"_n",value:function(e){var t=this;return Fg(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return dd(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Og(e,t,n){var r=cm(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Mg(e).Wt({range:a,jt:!0},(function(e,n,r){var a=P(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Lg(e){return zm(e,"mutations")}function Mg(e){return zm(e,"documentMutations")}function Fg(e){return zm(e,"mutationQueues")}var Ug=function(){function e(t){i(this,e),this.wn=t}return o(e,[{key:"next",value:function(){return this.wn+=2,this.wn}}],[{key:"mn",value:function(){return new e(0)}},{key:"gn",value:function(){return new e(-1)}}]),e}(),Vg=function(){function e(t,n){i(this,e),this.referenceDelegate=t,this.M=n}return o(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.yn(e).next((function(n){var r=new Ug(n.highestTargetId);return n.highestTargetId=r.next(),t.pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.yn(e).next((function(e){return Pd.fromTimestamp(new Dd(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.yn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.yn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.In(e,t).next((function(){return n.yn(e).next((function(r){return r.targetCount+=1,n.Tn(t,r),n.pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.In(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return jg(e).delete(t.targetId)})).next((function(){return n.yn(e)})).next((function(t){return dd(t.targetCount>0),t.targetCount-=1,n.pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return jg(e).Wt((function(o,u){var s=eg(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Dm.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return jg(e).Wt((function(e,n){var r=eg(n);t(r)}))}},{key:"yn",value:function(e){return qg(e).get("targetGlobalKey").next((function(e){return dd(null!==e),e}))}},{key:"pn",value:function(e,t){return qg(e).put("targetGlobalKey",t)}},{key:"In",value:function(e,t){return jg(e).put(tg(this.M,t))}},{key:"Tn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.yn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Lp(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return jg(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=eg(n);Mp(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Bg(e);return t.forEach((function(t){var o=im(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Dm.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Bg(e);return Dm.forEach(t,(function(t){var a=im(t.path);return Dm.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Bg(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Bg(e),i=py();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=um(e[1]),a=new tp(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=im(t.path),r=IDBKeyRange.bound([n],[Rd(n)],!1,!0),i=0;return Bg(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=P(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return jg(e).get(t).next((function(e){return e?eg(e):null}))}}]),e}();function jg(e){return zm(e,"targets")}function qg(e){return zm(e,"targetGlobal")}function Bg(e){return zm(e,"targetDocuments")}function zg(e){return Gg.apply(this,arguments)}function Gg(){return Gg=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===vd.FAILED_PRECONDITION&&t.message===Nm){e.next=2;break}throw t;case 2:sd("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Gg.apply(this,arguments)}function Kg(e,t){var n=P(e,2),r=n[0],i=n[1],a=P(t,2),o=a[0],u=a[1],s=Ad(r,o);return 0===s?Ad(i,u):s}var Wg=function(){function e(t){i(this,e),this.En=t,this.buffer=new iy(Kg),this.An=0}return o(e,[{key:"Rn",value:function(){return++this.An}},{key:"bn",value:function(e){var t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Kg(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Hg=function(){function e(t,n){i(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Pn=!1,this.Vn=null}return o(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}},{key:"stop",value:function(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}},{key:"started",get:function(){return null!==this.Vn}},{key:"vn",value:function(e){var t=this,n=this.Pn?3e5:6e4;sd("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,we(F().mark((function n(){return F().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.Vn=null,t.Pn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Fm(n.t0)){n.next=12;break}sd("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,zg(n.t0);case 14:return n.next=16,t.vn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),Qg=function(){function e(t,n){i(this,e),this.Sn=t,this.params=n}return o(e,[{key:"calculateTargetCount",value:function(e,t){return this.Sn.Dn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Dm.resolve(Td.A);var r=new Wg(t);return this.Sn.forEachTarget(e,(function(e){return r.bn(e.sequenceNumber)})).next((function(){return n.Sn.Cn(e,(function(e){return r.bn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Sn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Sn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(sd("LruGarbageCollector","Garbage collection skipped; disabled"),Dm.resolve(Ag)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(sd("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Ag):n.xn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Sn.getCacheSize(e)}},{key:"xn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(sd("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),ud()<=Ee.DEBUG&&sd("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Dm.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Yg=function(){function e(t,n){i(this,e),this.db=t,this.garbageCollector=function(e,t){return new Qg(e,t)}(this,n)}return o(e,[{key:"Dn",value:function(e){var t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Nn",value:function(e){var t=0;return this.Cn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Cn",value:function(e,t){return this.kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return $g(e,n)}},{key:"removeReference",value:function(e,t,n){return $g(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return $g(e,t)}},{key:"Mn",value:function(e,t){return function(e,t){var n=!1;return Fg(e).zt((function(r){return Og(e,r,t).next((function(e){return e&&(n=!0),Dm.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.kn(e,(function(o,u){if(u<=t){var s=n.Mn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Pd.min()),Bg(e).delete([0,im(o.path)])}))}));i.push(s)}})).next((function(){return Dm.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return $g(e,t)}},{key:"kn",value:function(e,t){var n,r=Bg(e),i=Td.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=P(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Td.A&&t(new tp(um(n)),i),i=s,n=u):i=Td.A})).next((function(){i!==Td.A&&t(new tp(um(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function $g(e,t){return Bg(e).put(function(e,t){return{targetId:0,path:im(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Jg=function(){function e(){i(this,e),this.changes=new ey((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return o(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,xp.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Dm.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Xg=function(){function e(t){i(this,e),this.M=t}return o(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return tk(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return tk(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],$m(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.On(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=xp.newInvalidDocument(t);return tk(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(nk(t))},(function(e,i){r=n.Fn(t,i)})).next((function(){return r}))}},{key:"$n",value:function(e,t){var n=this,r={size:0,document:xp.newInvalidDocument(t)};return tk(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(nk(t))},(function(e,i){r={document:n.Fn(t,i),size:Dg(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=sy();return this.Bn(e,t,(function(e,t){var i=n.Fn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Ln",value:function(e,t){var n=this,r=sy(),i=new ty(tp.comparator);return this.Bn(e,t,(function(e,t){var a=n.Fn(e,t);r=r.insert(e,a),i=i.insert(e,Dg(t))})).next((function(){return{documents:r,Un:i}}))}},{key:"Bn",value:function(e,t,n){if(t.isEmpty())return Dm.resolve();var r=new iy(ik);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(nk(r.first()),nk(r.last())),a=r.getIterator(),o=a.getNext();return tk(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=tp.fromSegments([].concat(ge(t.prefixPath),[t.collectionGroup,t.documentId]));o&&ik(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(nk(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),$m(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return tk(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=sy(),i=N(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.Fn(tp.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=sy(),o=rk(t,n),u=rk(t,Rp.max());return tk(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Fn(tp.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Zg(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return ek(e).get("remoteDocumentGlobalKey").next((function(e){return dd(!!e),e}))}},{key:"On",value:function(e,t){return ek(e).put("remoteDocumentGlobalKey",t)}},{key:"Fn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=By(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=tp.fromSegments(t.noDocument.path),i=Xm(t.noDocument.readTime);n=xp.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return hd();var a=tp.fromSegments(t.unknownDocument.path),o=Xm(t.unknownDocument.version);n=xp.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Dd(e[0],e[1]);return Pd.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(Pd.min()))return n}return xp.newInvalidDocument(e)}}]),e}(),Zg=function(e){s(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this)).qn=e,a.trackRemovals=r,a.Gn=new ey((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),a}return o(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new iy((function(e,t){return Ad(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Gn.get(a);if(n.push(t.qn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Ym(t.qn.M,o);i=i.add(a.path.popLast());var c=Dg(s);r+=c-u.size,n.push(t.qn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Ym(t.qn.M,o.convertToNoDocument(Pd.min()));n.push(t.qn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.qn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.qn.updateMetadata(e,r)),Dm.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.qn.$n(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.qn.Ln(e,t).next((function(e){var t=e.documents;return e.Un.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Jg);function ek(e){return zm(e,"remoteDocumentGlobal")}function tk(e){return zm(e,"remoteDocumentsV14")}function nk(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function rk(e,t){var n=t.documentKey.path.toArray();return[e,$m(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ik(e,t){var n=e.path.length-t.path.length;return 0!==n?n:tp.comparator(e,t)}var ak=function(){function e(t){i(this,e),this.M=t}return o(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new Pm("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sm,{unique:!0}),e.createObjectStore("documentMutations")}(e),ok(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Dm.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),ok(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Pd.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sm,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Dm.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Kn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Qn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.jn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Wn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.zn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:xm});t.createIndex("collectionPathOverlayIndex",Im,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Em,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:hm});t.createIndex("documentKeyIndex",dm),t.createIndex("collectionGroupIndex",pm)}(e)})).next((function(){return i.Hn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:km}).createIndex("sequenceNumberIndex",wm,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:bm}).createIndex("documentKeyIndex",_m,{unique:!1})}(e)}))),o}},{key:"Qn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=Dg(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Kn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return Dm.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return Dm.forEach(r,(function(r){dd(r.userId===n.userId);var i=Zm(t.M,r);return Rg(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"jn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new Ud(n),o=function(e){return[0,im(e)]}(a);r.push(t.get(o).next((function(n){return n?Dm.resolve():function(n){return t.put({targetId:0,path:im(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Dm.waitFor(r)}))}))}},{key:"Wn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:gm});var n=t.store("collectionParents"),r=new _g,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:im(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new Ud(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=P(e,3),r=(n[0],n[1]),a=(n[2],um(r));return i(a.popLast())}))}))}},{key:"zn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=eg(r),a=tg(t.M,i);return n.put(a)}))}},{key:"Hn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new tp(Ud.fromString(i.document.name).popFirst(5)):i.noDocument?tp.fromSegments(i.noDocument.path):i.unknownDocument?tp.fromSegments(i.unknownDocument.path):hd()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Dm.waitFor(r)}))}}]),e}();function ok(e){e.createObjectStore("targetDocuments",{keyPath:ym}).createIndex("documentTargetsIndex",mm,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",vm,{unique:!0}),e.createObjectStore("targetGlobal")}var uk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",sk=function(){function e(t,n,r,a,o,u,s,c,l,f){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(i(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Jn=o,this.window=u,this.document=s,this.Yn=l,this.Xn=f,this.Zn=h,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=function(e){return Promise.resolve()},!e.vt())throw new yd(vd.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Yg(this,a),this.cs=n+"main",this.M=new Qm(c),this.hs=new Om(this.cs,this.Zn,new ak(this.M)),this.ls=new Vg(this.referenceDelegate,this.M),this.fs=function(e){return new Xg(e)}(this.M),this.ds=new ag,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===f&&cd("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return o(e,[{key:"start",value:function(){var e=this;return this.ws().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new yd(vd.FAILED_PRECONDITION,uk);return e.gs(),e.ys(),e.ps(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.ls.getHighestSequenceNumber(t)}))})).then((function(t){e.ts=new Td(t,e.Yn)})).then((function(){e.es=!0})).catch((function(t){return e.hs&&e.hs.close(),Promise.reject(t)}))}},{key:"Is",value:function(e){var t=this;return this.us=function(){var n=we(F().mark((function n(r){return F().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.hs.Ot(function(){var t=we(F().mark((function t(n){return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget(we(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ws();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ws",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return lk(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ts(t).next((function(t){t||(e.isPrimary=!1,e.Jn.enqueueRetryable((function(){return e.us(!1)})))}))})).next((function(){return e.Es(t)})).next((function(n){return e.isPrimary&&!n?e.As(t).next((function(){return!1})):!!n&&e.Rs(t).next((function(){return!0}))}))})).catch((function(t){if(Fm(t))return sd("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return sd("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Jn.enqueueRetryable((function(){return e.us(t)})),e.isPrimary=t}))}},{key:"Ts",value:function(e){var t=this;return ck(e).get("owner").next((function(e){return Dm.resolve(t.bs(e))}))}},{key:"Ps",value:function(e){return lk(e).delete(this.clientId)}},{key:"Vs",value:function(){var e=we(F().mark((function e(){var t,n,r,i,a=this;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.vs(this.os,18e5)){e.next=6;break}return this.os=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=zm(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ss(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Dm.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._s){n=N(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._s.removeItem(this.Ds(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ps",value:function(){var e=this;this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ws().then((function(){return e.Vs()})).then((function(){return e.ps()}))}))}},{key:"bs",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Es",value:function(e){var t=this;return this.Xn?Dm.resolve(!0):ck(e).get("owner").next((function(n){if(null!==n&&t.vs(n.leaseTimestampMs,5e3)&&!t.Cs(n.ownerId)){if(t.bs(n)&&t.networkEnabled)return!0;if(!t.bs(n)){if(!n.allowTabSynchronization)throw new yd(vd.FAILED_PRECONDITION,uk);return!1}}return!(!t.networkEnabled||!t.inForeground)||lk(e).qt().next((function(e){return void 0===t.Ss(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&sd("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=we(F().mark((function e(){var t=this;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.es=!1,this.xs(),this.rs&&(this.rs.cancel(),this.rs=null),this.Ns(),this.ks(),e.next=7,this.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Bm(e,Td.A);return t.As(n).next((function(){return t.Ps(n)}))}));case 7:this.hs.close(),this.Ms();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ss",value:function(e,t){var n=this;return e.filter((function(e){return n.vs(e.updateTimeMs,t)&&!n.Cs(e.clientId)}))}},{key:"Os",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return lk(t).qt().next((function(t){return e.Ss(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.es}},{key:"getMutationQueue",value:function(e,t){return Pg.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.ls}},{key:"getRemoteDocumentCache",value:function(){return this.fs}},{key:"getIndexManager",value:function(e){return new Ig(e)}},{key:"getDocumentOverlayCache",value:function(e){return sg.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this.ds}},{key:"runTransaction",value:function(e,t,n){var r=this;sd("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=14===(i=this.Zn)?Am:13===i?Cm:12===i?Sm:11===i?Tm:void hd();return this.hs.runTransaction(e,o,u,(function(i){return a=new Bm(i,r.ts?r.ts.next():Td.A),"readwrite-primary"===t?r.Ts(a).next((function(e){return!!e||r.Es(a)})).next((function(t){if(!t)throw cd("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Jn.enqueueRetryable((function(){return r.us(!1)})),new yd(vd.FAILED_PRECONDITION,Nm);return n(a)})).next((function(e){return r.Rs(a).next((function(){return e}))})):r.Fs(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Fs",value:function(e){var t=this;return ck(e).get("owner").next((function(e){if(null!==e&&t.vs(e.leaseTimestampMs,5e3)&&!t.Cs(e.ownerId)&&!t.bs(e)&&!(t.Xn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new yd(vd.FAILED_PRECONDITION,uk)}))}},{key:"Rs",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ck(e).put("owner",t)}},{key:"As",value:function(e){var t=this,n=ck(e);return n.get("owner").next((function(e){return t.bs(e)?(sd("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Dm.resolve()}))}},{key:"vs",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(cd("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gs",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=function(){e.Jn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ws()}))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ns",value:function(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}},{key:"ys",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=function(){t.xs(),!H()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Jn.enterRestrictedMode(!0),t.Jn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ns))}},{key:"ks",value:function(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}},{key:"Cs",value:function(e){var t;try{var n=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return sd("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return cd("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xs",value:function(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(rc){cd("Failed to set zombie client id.",rc)}}},{key:"Ms",value:function(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(rc){}}},{key:"Ds",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return Om.vt()}}]),e}();function ck(e){return zm(e,"owner")}function lk(e){return zm(e,"clientMetadata")}function fk(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var hk=function(){function e(t,n,r){i(this,e),this.fs=t,this.$s=n,this.indexManager=r}return o(e,[{key:"Bs",value:function(e,t){var n=this;return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Ls(e,t,r)}))}},{key:"Ls",value:function(e,t,n){return this.fs.getEntry(e,t).next((function(e){var t,r=N(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"Us",value:function(e,t){e.forEach((function(e,n){var r,i=N(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"qs",value:function(e,t){var n=this;return this.fs.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.Us(t,e)}))}},{key:"Ks",value:function(e,t,n){return function(e){return tp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Qs(e,t.path):ov(t)?this.js(e,t,n):this.Ws(e,t,n)}},{key:"Qs",value:function(e,t){return this.Bs(e,new tp(t)).next((function(e){var t=ly();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"js",value:function(e,t,n){var r=this,i=t.collectionGroup,a=ly();return this.indexManager.getCollectionParents(e,i).next((function(o){return Dm.forEach(o,(function(o){var u=function(e,t){return new Zp(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.Ws(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"Ws",value:function(e,t,n){var r,i=this;return this.fs.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.$s.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=N(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=N(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=xp.newInvalidDocument(s),r=r.insert(s,c)),Uv(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){dv(t,n)||(r=r.remove(e))})),r}))}}]),e}(),dk=function(){function e(t,n,r,a){i(this,e),this.targetId=t,this.fromCache=n,this.zs=r,this.Hs=a}return o(e,null,[{key:"Js",value:function(t,n){var r,i=py(),a=py(),o=N(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),pk=function(){function e(){i(this,e)}return o(e,[{key:"Ys",value:function(e){this.Xs=e}},{key:"Ks",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Pd.min())?this.Zs(e,t):this.Xs.qs(e,r).next((function(a){var o=i.ti(t,a);return(nv(t)||rv(t))&&i.ei(t.limitType,o,r,n)?i.Zs(e,t):(ud()<=Ee.DEBUG&&sd("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),hv(t)),i.Xs.Ks(e,t,Ap(n,-1)).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"ti",value:function(e,t){var n=new iy(vv(e));return t.forEach((function(t,r){dv(e,r)&&(n=n.add(r))})),n}},{key:"ei",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Zs",value:function(e,t){return ud()<=Ee.DEBUG&&sd("QueryEngine","Using full collection scan to execute query:",hv(t)),this.Xs.Ks(e,t,Rp.min())}}]),e}(),vk=function(){function e(t,n,r,a){i(this,e),this.persistence=t,this.ni=n,this.M=a,this.si=new ty(Ad),this.ii=new ey((function(e){return Lp(e)}),Mp),this.ri=new Map,this.oi=t.getRemoteDocumentCache(),this.ls=t.getTargetCache(),this.ds=t.getBundleCache(),this.ui(r)}return o(e,[{key:"ui",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new hk(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.si)}))}}]),e}();function yk(e,t,n,r){return new vk(e,t,n,r)}function mk(e,t){return gk.apply(this,arguments)}function gk(){return gk=we(F().mark((function e(t,n){var r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pd(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.$s.getAllMutationBatches(e).next((function(i){return t=i,r.ui(n),r.$s.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=py(),s=N(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=N(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=N(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=N(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.ai.qs(e,u).next((function(e){return{ci:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),gk.apply(this,arguments)}function kk(e,t){var n=pd(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.oi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Dm.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);dd(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.$s.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.$s.performConsistencyCheck(e)})).next((function(){return n.ai.qs(e,r)}))}))}function wk(e){var t=pd(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.ls.getLastRemoteSnapshotVersion(e)}))}function bk(e,t){var n=pd(e),r=t.snapshotVersion,i=n.si;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.oi.newChangeBuffer({trackRemovals:!0});i=n.si;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.ls.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.ls.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Bd.EMPTY_BYTE_STRING,Pd.min()).withLastLimboFreeSnapshotVersion(Pd.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.ls.updateTargetData(e,c))}}));var u=sy();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(_k(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(Pd.min())){var s=n.ls.getLastRemoteSnapshotVersion(e).next((function(t){return n.ls.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return Dm.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.ai.Gs(e,u)})).next((function(){return u}))})).then((function(e){return n.si=i,e}))}function _k(e,t,n){var r=py();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=sy();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(Pd.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):sd("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function xk(e,t){var n=pd(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.$s.getNextMutationBatchAfterBatchId(e,t)}))}function Ik(e,t){var n=pd(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.ls.getTargetData(e,t).next((function(i){return i?(r=i,Dm.resolve(r)):n.ls.allocateTargetId(e).next((function(i){return r=new Hm(t,i,0,e.currentSequenceNumber),n.ls.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.si.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.si=n.si.insert(e.targetId,e),n.ii.set(t,e.targetId)),e}))}function Ek(e,t,n){return Tk.apply(this,arguments)}function Tk(){return Tk=we(F().mark((function e(t,n,r){var i,a,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=pd(t),a=i.si.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Fm(e.t1)){e.next=12;break}throw e.t1;case 12:sd("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.si=i.si.remove(n),i.ii.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Tk.apply(this,arguments)}function Sk(e,t,n){var r=pd(e),i=Pd.min(),a=py();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=pd(e),i=r.ii.get(n);return void 0!==i?Dm.resolve(r.si.get(i)):r.ls.getTargetData(t,n)}(r,e,sv(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.ni.Ks(e,t,n?i:Pd.min(),n?a:py())})).next((function(e){return Nk(r,pv(t),e),{documents:e,hi:a}}))}))}function Ck(e,t){var n=pd(e),r=pd(n.ls),i=n.si.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function Ak(e,t){var n=pd(e),r=n.ri.get(t)||Pd.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.oi.getAllFromCollectionGroup(e,t,Ap(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Nk(n,t,e),e}))}function Nk(e,t,n){var r=Pd.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ri.set(t,r)}function Rk(e,t,n,r){return Dk.apply(this,arguments)}function Dk(){return Dk=we(F().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=pd(t),o=py(),u=sy(),s=N(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.li(l.metadata.name),l.document&&(o=o.add(f)),(h=n.fi(l)).setReadTime(n.di(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.oi.newChangeBuffer({trackRemovals:!0}),e.next=7,Ik(a,function(e){return sv(tv(Ud.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return _k(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.ls.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.ls.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.ai.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),Dk.apply(this,arguments)}function Pk(e,t){return Ok.apply(this,arguments)}function Ok(){return Ok=we(F().mark((function e(t,n){var r,i,a,o=arguments;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:py(),e.next=3,Ik(t,sv(ng(n.bundledQuery)));case 3:return i=e.sent,a=pd(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Dy(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.ds.saveNamedQuery(e,n);var o=i.withResumeToken(Bd.EMPTY_BYTE_STRING,t);return a.si=a.si.insert(o.targetId,o),a.ls.updateTargetData(e,o).next((function(){return a.ls.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.ls.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Ok.apply(this,arguments)}var Lk=function(){function e(t){i(this,e),this.M=t,this._i=new Map,this.wi=new Map}return o(e,[{key:"getBundleMetadata",value:function(e,t){return Dm.resolve(this._i.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this._i.set(t.id,{id:(n=t).id,version:n.version,createTime:Dy(n.createTime)}),Dm.resolve()}},{key:"getNamedQuery",value:function(e,t){return Dm.resolve(this.wi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.wi.set(t.name,function(e){return{name:e.name,query:ng(e.bundledQuery),readTime:Dy(e.readTime)}}(t)),Dm.resolve()}}]),e}(),Mk=function(){function e(){i(this,e),this.overlays=new ty(tp.comparator),this.mi=new Map}return o(e,[{key:"getOverlay",value:function(e,t){return Dm.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),Dm.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.mi.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.mi.delete(n)),Dm.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=fy(),i=t.length+1,a=new tp(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Dm.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new ty((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=fy(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=fy(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Dm.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.mi.get(r.largestBatchId).delete(n.key);this.mi.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Wm(t,n));var a=this.mi.get(t);void 0===a&&(a=py(),this.mi.set(t,a)),this.mi.set(t,a.add(n.key))}}}]),e}(),Fk=function(){function e(){i(this,e),this.gi=new iy(Uk.yi),this.pi=new iy(Uk.Ii)}return o(e,[{key:"isEmpty",value:function(){return this.gi.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Uk(e,t);this.gi=this.gi.add(n),this.pi=this.pi.add(n)}},{key:"Ti",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ei(new Uk(e,t))}},{key:"Ai",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Ri",value:function(e){var t=this,n=new tp(new Ud([])),r=new Uk(n,e),i=new Uk(n,e+1),a=[];return this.pi.forEachInRange([r,i],(function(e){t.Ei(e),a.push(e.key)})),a}},{key:"bi",value:function(){var e=this;this.gi.forEach((function(t){return e.Ei(t)}))}},{key:"Ei",value:function(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}},{key:"Pi",value:function(e){var t=new tp(new Ud([])),n=new Uk(t,e),r=new Uk(t,e+1),i=py();return this.pi.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Uk(e,0),n=this.gi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Uk=function(){function e(t,n){i(this,e),this.key=t,this.Vi=n}return o(e,null,[{key:"yi",value:function(e,t){return tp.comparator(e.key,t.key)||Ad(e.Vi,t.Vi)}},{key:"Ii",value:function(e,t){return Ad(e.Vi,t.Vi)||tp.comparator(e.key,t.key)}}]),e}(),Vk=function(){function e(t,n){i(this,e),this.indexManager=t,this.referenceDelegate=n,this.$s=[],this.vi=1,this.Si=new iy(Uk.yi)}return o(e,[{key:"checkEmpty",value:function(e){return Dm.resolve(0===this.$s.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vi;this.vi++,this.$s.length>0&&this.$s[this.$s.length-1];var a=new Gm(i,t,n,r);this.$s.push(a);var o,u=N(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Si=this.Si.add(new Uk(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Dm.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Dm.resolve(this.Di(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ci(n),i=r<0?0:r;return Dm.resolve(this.$s.length>i?this.$s[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Dm.resolve(0===this.$s.length?-1:this.vi-1)}},{key:"getAllMutationBatches",value:function(e){return Dm.resolve(this.$s.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Uk(t,0),i=new Uk(t,Number.POSITIVE_INFINITY),a=[];return this.Si.forEachInRange([r,i],(function(e){var t=n.Di(e.Vi);a.push(t)})),Dm.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new iy(Ad);return t.forEach((function(e){var t=new Uk(e,0),i=new Uk(e,Number.POSITIVE_INFINITY);n.Si.forEachInRange([t,i],(function(e){r=r.add(e.Vi)}))})),Dm.resolve(this.xi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;tp.isDocumentKey(i)||(i=i.child(""));var a=new Uk(new tp(i),0),o=new iy(Ad);return this.Si.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Vi)),!0)}),a),Dm.resolve(this.xi(o))}},{key:"xi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Di(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;dd(0===this.Ni(t.batchId,"removed")),this.$s.shift();var r=this.Si;return Dm.forEach(t.mutations,(function(i){var a=new Uk(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Si=r}))}},{key:"dn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Uk(t,0),r=this.Si.firstAfterOrEqual(n);return Dm.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.$s.length,Dm.resolve()}},{key:"Ni",value:function(e,t){return this.Ci(e)}},{key:"Ci",value:function(e){return 0===this.$s.length?0:e-this.$s[0].batchId}},{key:"Di",value:function(e){var t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}]),e}(),jk=function(){function e(t){i(this,e),this.ki=t,this.docs=new ty(tp.comparator),this.size=0}return o(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ki(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Dm.resolve(n?n.document.mutableCopy():xp.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=sy();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():xp.newInvalidDocument(e))})),Dm.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=sy(),i=new tp(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Dp(Np(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Dm.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){hd()}},{key:"Mi",value:function(e,t){return Dm.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new qk(this)}},{key:"getSize",value:function(e){return Dm.resolve(this.size)}}]),e}(),qk=function(e){s(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this)).qn=e,r}return o(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.qn.addEntry(e,i)):t.qn.removeEntry(r)})),Dm.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.qn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.qn.getEntries(e,t)}}]),n}(Jg),Bk=function(){function e(t){i(this,e),this.persistence=t,this.Oi=new ey((function(e){return Lp(e)}),Mp),this.lastRemoteSnapshotVersion=Pd.min(),this.highestTargetId=0,this.Fi=0,this.$i=new Fk,this.targetCount=0,this.Bi=Ug.mn()}return o(e,[{key:"forEachTarget",value:function(e,t){return this.Oi.forEach((function(e,n){return t(n)})),Dm.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Dm.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Dm.resolve(this.Fi)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Bi.next(),Dm.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Fi&&(this.Fi=t),Dm.resolve()}},{key:"In",value:function(e){this.Oi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Bi=new Ug(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.In(t),this.targetCount+=1,Dm.resolve()}},{key:"updateTargetData",value:function(e,t){return this.In(t),Dm.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,Dm.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Oi.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Oi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Dm.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Dm.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Oi.get(t)||null;return Dm.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.$i.Ti(t,n),Dm.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.$i.Ai(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Dm.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.$i.Ri(t),Dm.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.$i.Pi(t);return Dm.resolve(n)}},{key:"containsKey",value:function(e,t){return Dm.resolve(this.$i.containsKey(t))}}]),e}(),zk=function(){function e(t,n){var r=this;i(this,e),this.Li={},this.overlays={},this.ts=new Td(0),this.es=!1,this.es=!0,this.referenceDelegate=t(this),this.ls=new Bk(this),this.indexManager=new bg,this.fs=new jk((function(e){return r.referenceDelegate.Ui(e)})),this.M=new Qm(n),this.ds=new Lk(this.M)}return o(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.es=!1,Promise.resolve()}},{key:"started",get:function(){return this.es}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Mk,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Li[e.toKey()];return n||(n=new Vk(t,this.referenceDelegate),this.Li[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.ls}},{key:"getRemoteDocumentCache",value:function(){return this.fs}},{key:"getBundleCache",value:function(){return this.ds}},{key:"runTransaction",value:function(e,t,n){var r=this;sd("MemoryPersistence","Starting transaction:",e);var i=new Gk(this.ts.next());return this.referenceDelegate.qi(),n(i).next((function(e){return r.referenceDelegate.Gi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ki",value:function(e,t){return Dm.or(Object.values(this.Li).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Gk=function(e){s(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return o(n)}(Rm),Kk=function(){function e(t){i(this,e),this.persistence=t,this.Qi=new Fk,this.ji=null}return o(e,[{key:"zi",get:function(){if(this.ji)return this.ji;throw hd()}},{key:"addReference",value:function(e,t,n){return this.Qi.addReference(n,t),this.zi.delete(n.toString()),Dm.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qi.removeReference(n,t),this.zi.add(n.toString()),Dm.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.zi.add(t.toString()),Dm.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qi.Ri(t.targetId).forEach((function(e){return n.zi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.zi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"qi",value:function(){this.ji=new Set}},{key:"Gi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Dm.forEach(this.zi,(function(r){var i=tp.fromPath(r);return t.Hi(e,i).next((function(e){e||n.removeEntry(i,Pd.min())}))})).next((function(){return t.ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hi(e,t).next((function(e){e?n.zi.delete(t.toString()):n.zi.add(t.toString())}))}},{key:"Ui",value:function(e){return 0}},{key:"Hi",value:function(e,t){var n=this;return Dm.or([function(){return Dm.resolve(n.Qi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ki(e,t)}])}}],[{key:"Wi",value:function(t){return new e(t)}}]),e}();function Wk(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Hk(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Qk(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Yk=function(){function e(t,n,r,a){i(this,e),this.user=t,this.batchId=n,this.state=r,this.error=a}return o(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new yd(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(cd("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),$k=function(){function e(t,n,r){i(this,e),this.targetId=t,this.state=n,this.error=r}return o(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new yd(i.error.code,i.error.message))),a?new e(t,i.state,r):(cd("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Jk=function(){function e(t,n){i(this,e),this.clientId=t,this.activeTargetIds=n}return o(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=yy(),o=0;i&&o<r.activeTargetIds.length;++o)i=ep(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(cd("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Xk=function(){function e(t,n){i(this,e),this.clientId=t,this.onlineState=n}return o(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(cd("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Zk=function(){function e(){i(this,e),this.activeTargetIds=yy()}return o(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),ew=function(){function e(t,n,r,a,o){i(this,e),this.window=t,this.Jn=n,this.persistenceKey=r,this.tr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new ty(Ad),this.started=!1,this.ir=[];var u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.rr=Wk(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new Zk),this.ar=new RegExp("^firestore_clients_".concat(u,"_([^_]*)$")),this.cr=new RegExp("^firestore_mutations_".concat(u,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(u,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return o(e,[{key:"start",value:function(){var e=we(F().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Os();case 2:t=e.sent,n=N(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Wk(this.persistenceKey,i)))&&(o=Jk.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(u=this.storage.getItem(this.lr))&&(s=this.wr(u))&&this.mr(s),c=N(this.ir);try{for(c.s();!(l=c.n()).done;)f=l.value,this.nr(f)}catch(d){c.e(d)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Qk(this.persistenceKey,e));if(n){var r=$k.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Qk(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return sd("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){sd("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){sd("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(sd("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void cd("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable(we(F().mark((function e(){var r,i,a,o,u,s,c;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.ar.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.cr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.vr(a));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}s=function(e){var t=Td.A;if(null!=e)try{var n=JSON.parse(e);dd("number"==typeof n),t=n}catch(e){cd("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Td.A&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new Yk(this.currentUser,e,t,n),i=Hk(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=Hk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=Qk(this.persistenceKey,e),i=new $k(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.ar.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return Jk.Ji(n,t)}},{key:"Vr",value:function(e,t){var n=this.cr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Yk.Ji(new id(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return $k.Ji(r,t)}},{key:"wr",value:function(e){return Xk.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"vr",value:function(){var e=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:sd("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Or(o,u).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=yy();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),tw=function(){function e(){i(this,e),this.Fr=new Zk,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return o(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new Zk,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),nw=function(){function e(){i(this,e)}return o(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),rw=function(){function e(){var t=this;i(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Gr()},this.Kr=[],this.Qr()}return o(e,[{key:"Br",value:function(e){this.Kr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){sd("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=N(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Gr",value:function(){sd("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=N(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),iw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},aw=function(){function e(t){i(this,e),this.jr=t.jr,this.Wr=t.Wr}return o(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),ow=function(e){s(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return o(n,[{key:"ao",value:function(e,t,n,r){return new Promise((function(i,a){var o=new nd;o.listenOnce(Jh.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case $h.NO_ERROR:var t=o.getResponseJson();sd("Connection","XHR received:",JSON.stringify(t)),i(t);break;case $h.TIMEOUT:sd("Connection",'RPC "'+e+'" timed out'),a(new yd(vd.DEADLINE_EXCEEDED,"Request time out"));break;case $h.HTTP_ERROR:var n=o.getStatus();if(sd("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(vd).indexOf(t)>=0?t:vd.UNKNOWN}(r.status);a(new yd(u,r.message))}else a(new yd(vd.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new yd(vd.UNAVAILABLE,"Connection failed."));break;default:hd()}}finally{sd("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Qh(),a=Yh(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new ed({})),this.uo(o.initMessageHeaders,t,n),W()||Y()||K().indexOf("Electron/")>=0||$()||K().indexOf("MSAppHost/")>=0||Q()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");sd("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new aw({jr:function(e){l?sd("Connection","Not sending because WebChannel is closed:",e):(c||(sd("Connection","Opening WebChannel transport."),s.open(),c=!0),sd("Connection","WebChannel sending:",e),s.send(e))},Wr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,td.EventType.OPEN,(function(){l||sd("Connection","WebChannel transport opened.")})),h(s,td.EventType.CLOSE,(function(){l||(l=!0,sd("Connection","WebChannel transport closed"),f.eo())})),h(s,td.EventType.ERROR,(function(e){l||(l=!0,ld("Connection","WebChannel transport errored:",e),f.eo(new yd(vd.UNAVAILABLE,"The operation could not be completed")))})),h(s,td.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];dd(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){sd("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Hv[e];if(void 0!==t)return Zv(t)}(a),u=i.message;void 0===o&&(o=vd.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.eo(new yd(o,u)),s.close()}else sd("Connection","WebChannel received:",n),f.no(n)}})),h(a,Xh.STAT_EVENT,(function(e){e.stat===Zh.PROXY?sd("Connection","Detected buffering proxy"):e.stat===Zh.NOPROXY&&sd("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Zr()}),0),f}}]),n}(function(){function e(t){i(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return o(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);sd("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.ao(e,a,o,n).then((function(e){return sd("RestConnection","Received: ",e),e}),(function(t){throw ld("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"co",value:function(e,t,n,r,i){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ad,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=iw[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function uw(){return"undefined"!=typeof window?window:null}function sw(){return"undefined"!=typeof document?document:null}function cw(e){return new Cy(e,!0)}var lw=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;i(this,e),this.Jn=t,this.timerId=n,this.lo=r,this.fo=a,this._o=o,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return o(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&sd("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),fw=function(){function e(t,n,r,a,o,u,s,c){i(this,e),this.Jn=t,this.Ao=r,this.Ro=a,this.bo=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=s,this.listener=c,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new lw(t,n)}return o(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=we(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Mo()})))}},{key:"Oo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=we(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"$o",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"close",value:function(){var e=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===vd.RESOURCE_EXHAUSTED?(cd(n.toString()),cd("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===vd.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=P(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new yd(vd.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.vo=n.Jn.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(we(F().mark((function t(){return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return sd("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.Jn.enqueueAndForget((function(){return t.Po===e?n():(sd("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),hw=function(e){s(n,e);var t=p(n);function n(e,r,a,o,u,s){var c;return i(this,n),(c=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,o,s)).M=u,c}return o(n,[{key:"Go",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:hd()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(dd(void 0===t||"string"==typeof t),Bd.fromBase64String(t||"")):(dd(void 0===t||t instanceof Uint8Array),Bd.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?vd.UNKNOWN:Zv(e.code);return new yd(t,e.message||"")}(o);n=new by(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=My(e,s.document.name),l=Dy(s.document.updateTime),f=new bp({mapValue:{fields:s.document.fields}}),h=xp.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new ky(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=My(e,v.document),m=v.readTime?Dy(v.readTime):Pd.min(),g=xp.newNoDocument(y,m),k=v.removedTargetIds||[];n=new ky([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=My(e,w.document),_=w.removedTargetIds||[];n=new ky([],_,b,null)}else{if(!("filter"in t))return hd();t.filter;var x=t.filter;x.targetId;var I=x.count||0,E=new Jv(I),T=x.targetId;n=new wy(T,E)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Pd.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Pd.min():t.readTime?Dy(t.readTime):Pd.min()}(e);return this.listener.Ko(t,n)}},{key:"Qo",value:function(e){var t={};t.database=Vy(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=Fp(r)?{documents:Wy(e,r)}:{query:Hy(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Ny(e,t.resumeToken):t.snapshotVersion.compareTo(Pd.min())>0&&(n.readTime=Ay(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return hd()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Oo(t)}},{key:"jo",value:function(e){var t={};t.database=Vy(this.M),t.removeTarget=e,this.Oo(t)}}]),n}(fw),dw=function(e){s(n,e);var t=p(n);function n(e,r,a,o,u,s){var c;return i(this,n),(c=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,o,s)).M=u,c.Wo=!1,c}return o(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,Nt(c(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Go",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(dd(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(dd(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Dy(e.updateTime):Dy(t);return n.isEqual(Pd.min())&&(n=Dy(t)),new Pv(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Dy(e.commitTime);return this.listener.Jo(n,t)}return dd(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=Vy(this.M),this.Oo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Gy(t.M,e)}))};this.Oo(n)}}]),n}(fw),pw=function(e){s(n,e);var t=p(n);function n(e,r,a,o){var u;return i(this,n),(u=t.call(this)).authCredentials=e,u.appCheckCredentials=r,u.bo=a,u.M=o,u.Zo=!1,u}return o(n,[{key:"tu",value:function(){if(this.Zo)throw new yd(vd.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=P(i,2),o=a[0],u=a[1];return r.bo.ro(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===vd.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new yd(vd.UNKNOWN,e.toString())}))}},{key:"co",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=P(i,2),o=a[0],u=a[1];return r.bo.co(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===vd.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new yd(vd.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return o((function e(){i(this,e)}))}()),vw=function(){function e(t,n){i(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return o(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(cd(t),this.su=!1):sd("OnlineStateTracker",t)}},{key:"au",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),yw=o((function e(t,n,r,a,o){var u=this;i(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=o,this.du.Br((function(e){r.enqueueAndForget(we(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Sw(u),!e.t0){e.next=5;break}return sd("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=we(F().mark((function e(t){var n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=pd(t)).lu.add(4),e.next=4,kw(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,mw(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(u);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new vw(r,a)}));function mw(e){return gw.apply(this,arguments)}function gw(){return gw=we(F().mark((function e(t){var n,r,i;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Sw(t)){e.next=18;break}n=N(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),gw.apply(this,arguments)}function kw(e){return ww.apply(this,arguments)}function ww(){return ww=we(F().mark((function e(t){var n,r,i;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=N(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),ww.apply(this,arguments)}function bw(e,t){var n=pd(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),Tw(n)?Ew(n):nb(n).Co()&&xw(n,t))}function _w(e,t){var n=pd(e),r=nb(n);n.hu.delete(t),r.Co()&&Iw(n,t),0===n.hu.size&&(r.Co()?r.ko():Sw(n)&&n._u.set("Unknown"))}function xw(e,t){e.wu.Z(t.targetId),nb(e).Qo(t)}function Iw(e,t){e.wu.Z(t),nb(e).jo(t)}function Ew(e){e.wu=new xy({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.hu.get(t)||null}}),nb(e).start(),e._u.iu()}function Tw(e){return Sw(e)&&!nb(e).Do()&&e.hu.size>0}function Sw(e){return 0===pd(e).lu.size}function Cw(e){e.wu=void 0}function Aw(e){return Nw.apply(this,arguments)}function Nw(){return Nw=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){xw(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Nw.apply(this,arguments)}function Rw(e,t){return Dw.apply(this,arguments)}function Dw(){return Dw=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Cw(t),Tw(t)?(t._u.uu(n),Ew(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Dw.apply(this,arguments)}function Pw(e,t,n){return Ow.apply(this,arguments)}function Ow(){return Ow=we(F().mark((function e(t,n,r){var i;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof by&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=we(F().mark((function e(t,n){var r,i,a,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=N(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),sd("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Lw(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof ky?t.wu.ut(n):n instanceof wy?t.wu._t(n):t.wu.ht(n),r.isEqual(Pd.min())){e.next=29;break}return e.prev=14,e.next=17,wk(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(Bd.EMPTY_BYTE_STRING,n.snapshotVersion)),Iw(e,t);var r=new Hm(n.target,t,1,n.sequenceNumber);xw(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),sd("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Lw(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Ow.apply(this,arguments)}function Lw(e,t,n){return Mw.apply(this,arguments)}function Mw(){return Mw=we(F().mark((function e(t,n,r){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fm(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,kw(t);case 5:t._u.set("Offline"),r||(r=function(){return wk(t.localStore)}),t.asyncQueue.enqueueRetryable(we(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sd("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,mw(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Mw.apply(this,arguments)}function Fw(e,t){return t().catch((function(n){return Lw(e,n,t)}))}function Uw(e){return Vw.apply(this,arguments)}function Vw(){return Vw=we(F().mark((function e(t){var n,r,i,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=pd(t),r=rb(n),i=n.cu.length>0?n.cu[n.cu.length-1].batchId:-1;case 2:if(!jw(n)){e.next=19;break}return e.prev=3,e.next=6,xk(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.cu.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,qw(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Lw(n,e.t0);case 17:e.next=2;break;case 19:Bw(n)&&zw(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Vw.apply(this,arguments)}function jw(e){return Sw(e)&&e.cu.length<10}function qw(e,t){e.cu.push(t);var n=rb(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function Bw(e){return Sw(e)&&!rb(e).Do()&&e.cu.length>0}function zw(e){rb(e).start()}function Gw(e){return Kw.apply(this,arguments)}function Kw(){return Kw=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:rb(t).Xo();case 1:case"end":return e.stop()}}),e)}))),Kw.apply(this,arguments)}function Ww(e){return Hw.apply(this,arguments)}function Hw(){return Hw=we(F().mark((function e(t){var n,r,i,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=rb(t),r=N(t.cu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Hw.apply(this,arguments)}function Qw(e,t,n){return Yw.apply(this,arguments)}function Yw(){return Yw=we(F().mark((function e(t,n,r){var i,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.cu.shift(),a=Km.from(i,n,r),e.next=3,Fw(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Uw(t);case 5:case"end":return e.stop()}}),e)}))),Yw.apply(this,arguments)}function $w(e,t){return Jw.apply(this,arguments)}function Jw(){return Jw=we(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&rb(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=we(F().mark((function e(t,n){var r,i;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Xv(i=n.code)||i===vd.ABORTED){e.next=7;break}return r=t.cu.shift(),rb(t).No(),e.next=5,Fw(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Uw(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Bw(t)&&zw(t);case 5:case"end":return e.stop()}}),e)}))),Jw.apply(this,arguments)}function Xw(e,t){return Zw.apply(this,arguments)}function Zw(){return Zw=we(F().mark((function e(t,n){var r,i;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=pd(t)).asyncQueue.verifyOperationInProgress(),sd("RemoteStore","RemoteStore received new credentials"),i=Sw(r),r.lu.add(3),e.next=6,kw(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,mw(r);case 12:case"end":return e.stop()}}),e)}))),Zw.apply(this,arguments)}function eb(e,t){return tb.apply(this,arguments)}function tb(){return tb=we(F().mark((function e(t,n){var r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=pd(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,mw(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,kw(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),tb.apply(this,arguments)}function nb(e){return e.mu||(e.mu=function(e,t,n){var r=pd(e);return r.tu(),new hw(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{zr:Aw.bind(null,e),Jr:Rw.bind(null,e),Ko:Pw.bind(null,e)}),e.fu.push(function(){var t=we(F().mark((function t(n){return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),Tw(e)?Ew(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:Cw(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function rb(e){return e.gu||(e.gu=function(e,t,n){var r=pd(e);return r.tu(),new dw(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{zr:Gw.bind(null,e),Jr:$w.bind(null,e),Yo:Ww.bind(null,e),Jo:Qw.bind(null,e)}),e.fu.push(function(){var t=we(F().mark((function t(n){return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,Uw(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.cu.length>0&&(sd("RemoteStore","Stopping write stream with ".concat(e.cu.length," pending writes")),e.cu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var ib=function(){function e(t,n,r,a,o){i(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=o,this.deferred=new md,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return o(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new yd(vd.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function ab(e,t){if(cd("AsyncQueue","".concat(t,": ").concat(e)),Fm(e))return new yd(vd.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var ob=function(){function e(t){i(this,e),this.comparator=t?function(e,n){return t(e,n)||tp.comparator(e.key,n.key)}:function(e,t){return tp.comparator(e.key,t.key)},this.keyedMap=ly(),this.sortedSet=new ty(this.comparator)}return o(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),ub=function(){function e(){i(this,e),this.yu=new ty(tp.comparator)}return o(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):hd():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),sb=function(){function e(t,n,r,a,o,u,s,c){i(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=s,this.excludesMetadataChanges=c}return o(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,ob.emptySet(n),a,r,i,!0,!1)}}]),e}(),cb=o((function e(){i(this,e),this.Iu=void 0,this.listeners=[]})),lb=o((function e(){i(this,e),this.queries=new ey((function(e){return fv(e)}),lv),this.onlineState="Unknown",this.Tu=new Set}));function fb(e,t){return hb.apply(this,arguments)}function hb(){return hb=we(F().mark((function e(t,n){var r,i,a,o,u;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=pd(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new cb),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=ab(e.t0,"Initialization of query '".concat(hv(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&mb(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),hb.apply(this,arguments)}function db(e,t){return pb.apply(this,arguments)}function pb(){return pb=we(F().mark((function e(t,n){var r,i,a,o,u;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=pd(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),pb.apply(this,arguments)}function vb(e,t){var n,r=pd(e),i=!1,a=N(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=N(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Iu=o}}}catch(f){a.e(f)}finally{a.f()}i&&mb(r)}function yb(e,t,n){var r=pd(e),i=r.queries.get(t);if(i){var a,o=N(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function mb(e){e.Tu.forEach((function(e){e.next()}))}var gb=function(){function e(t,n,r){i(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return o(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=N(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new sb(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),a=!0):this.vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=sb.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),kb=function(){function e(t,n){i(this,e),this.payload=t,this.byteLength=n}return o(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),wb=function(){function e(t){i(this,e),this.M=t}return o(e,[{key:"li",value:function(e){return My(this.M,e)}},{key:"fi",value:function(e){return e.metadata.exists?By(this.M,e.document,!1):xp.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}},{key:"di",value:function(e){return Dy(e)}}]),e}(),bb=function(){function e(t,n,r){i(this,e),this.xu=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=_b(t)}return o(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Ud.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new wb(this.M),i=N(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.li(a.metadata.name),s=N(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||py()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=we(F().mark((function e(){var t,n,r,i,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rk(this.localStore,new wb(this.M),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=N(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Pk(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Mu:this.collectionGroups,Ou:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function _b(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var xb=o((function e(t){i(this,e),this.key=t})),Ib=o((function e(t){i(this,e),this.key=t})),Eb=function(){function e(t,n){i(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=py(),this.mutatedKeys=py(),this.Lu=vv(t),this.Uu=new ob(this.Lu)}return o(e,[{key:"qu",get:function(){return this.Fu}},{key:"Gu",value:function(e,t){var n=this,r=t?t.Ku:new ub,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=nv(this.query)&&i.size===this.query.limit?i.last():null,c=rv(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=dv(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Qu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Lu(f,s)>0||c&&n.Lu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),nv(this.query)||rv(this.query))for(;o.size>this.query.limit;){var l=nv(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Ku:r,ei:u,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Ku.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return hd()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],u=0===this.Bu.size&&this.current?1:0,s=u!==this.$u;return this.$u=u,0!==a.length||s?{snapshot:new sb(this.query,e.Uu,i,a,e.mutatedKeys,0===u,s,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new ub,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=py(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new Ib(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new xb(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.hi,this.Bu=py();var t=this.Gu(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return sb.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),Tb=o((function e(t,n,r){i(this,e),this.query=t,this.targetId=n,this.view=r})),Sb=o((function e(t){i(this,e),this.key=t,this.Xu=!1})),Cb=function(){function e(t,n,r,a,o,u){i(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.Zu={},this.ta=new ey((function(e){return fv(e)}),lv),this.ea=new Map,this.na=new Set,this.sa=new ty(tp.comparator),this.ia=new Map,this.ra=new Fk,this.oa={},this.ua=new Map,this.aa=Ug.gn(),this.onlineState="Unknown",this.ca=void 0}return o(e,[{key:"isPrimaryClient",get:function(){return!0===this.ca}}]),e}();function Ab(e,t){return Nb.apply(this,arguments)}function Nb(){return Nb=we(F().mark((function e(t,n){var r,i,a,o,u,s;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=__(t),!(o=r.ta.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,Ik(r.localStore,sv(n));case 8:return u=e.sent,r.isPrimaryClient&&bw(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Rb(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Nb.apply(this,arguments)}function Rb(e,t,n,r){return Db.apply(this,arguments)}function Db(){return Db=we(F().mark((function e(t,n,r,i){var a,o,u,s,c,l;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.ha=function(e,n,r){return function(){var e=we(F().mark((function e(t,n,r,i){var a,o,u;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Gu(r),e.t0=a.ei,!e.t0){e.next=6;break}return e.next=5,Sk(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Gu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Xb(t,n.targetId,u.zu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Sk(t.localStore,n,!0);case 3:return a=e.sent,o=new Eb(n,a.hi),u=o.Gu(a.documents),s=gy.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),Xb(t,r,c.zu),l=new Tb(n,r,o),e.abrupt("return",(t.ta.set(n,l),t.ea.has(r)?t.ea.get(r).push(n):t.ea.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),Db.apply(this,arguments)}function Pb(e,t){return Ob.apply(this,arguments)}function Ob(){return Ob=we(F().mark((function e(t,n){var r,i,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=pd(t),i=r.ta.get(n),!((a=r.ea.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ea.set(i.targetId,a.filter((function(e){return!lv(e,n)}))),void r.ta.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Ek(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),_w(r.remoteStore,i.targetId),$b(r,i.targetId)})).catch(zg);case 9:e.next=14;break;case 11:return $b(r,i.targetId),e.next=14,Ek(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Ob.apply(this,arguments)}function Lb(e,t,n){return Mb.apply(this,arguments)}function Mb(){return Mb=we(F().mark((function e(t,n,r){var i,a,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=x_(t),e.prev=1,e.next=4,function(e,t){var n,r=pd(e),i=Dd.now(),a=t.reduce((function(e,t){return e.add(t.key)}),py());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.ai.qs(e,a).next((function(a){n=a;var o,u=[],s=N(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Vv(c,n.get(c.key));null!=l&&u.push(new zv(c.key,l,_p(l.value.mapValue),Ov.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.$s.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oa[e.currentUser.toKey()];r||(r=new ty(Ad)),r=r.insert(t,n),e.oa[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,t_(i,a.changes);case 9:return e.next=11,Uw(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=ab(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Mb.apply(this,arguments)}function Fb(e,t){return Ub.apply(this,arguments)}function Ub(){return Ub=we(F().mark((function e(t,n){var r,i;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pd(t),e.prev=1,e.next=4,bk(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ia.get(t);n&&(dd(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?dd(n.Xu):e.removedDocuments.size>0&&(dd(n.Xu),n.Xu=!1))})),e.next=8,t_(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,zg(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Ub.apply(this,arguments)}function Vb(e,t,n){var r=pd(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ta.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=pd(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=N(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&mb(n)}(r.eventManager,t),i.length&&r.Zu.Ko(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function jb(e,t,n){return qb.apply(this,arguments)}function qb(){return qb=we(F().mark((function e(t,n,r){var i,a,o,u,s,c;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=pd(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ia.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new ty(tp.comparator)).insert(o,xp.newNoDocument(o,Pd.min())),s=py().add(o),c=new my(Pd.min(),new Map,new iy(Ad),u,s),e.next=9,Fb(i,c);case 9:i.sa=i.sa.remove(o),i.ia.delete(n),e_(i),e.next=16;break;case 14:return e.next=16,Ek(i.localStore,n,!1).then((function(){return $b(i,n,r)})).catch(zg);case 16:case"end":return e.stop()}}),e)}))),qb.apply(this,arguments)}function Bb(e,t){return zb.apply(this,arguments)}function zb(){return zb=we(F().mark((function e(t,n){var r,i,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pd(t),i=n.batch.batchId,e.prev=1,e.next=4,kk(r.localStore,n);case 4:return a=e.sent,Yb(r,i,null),Qb(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,t_(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,zg(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),zb.apply(this,arguments)}function Gb(e,t,n){return Kb.apply(this,arguments)}function Kb(){return Kb=we(F().mark((function e(t,n,r){var i,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=pd(t),e.prev=1,e.next=4,function(e,t){var n=pd(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.$s.lookupMutationBatch(e,t).next((function(t){return dd(null!==t),r=t.keys(),n.$s.removeMutationBatch(e,t)})).next((function(){return n.$s.performConsistencyCheck(e)})).next((function(){return n.ai.qs(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Yb(i,n,r),Qb(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,t_(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,zg(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Kb.apply(this,arguments)}function Wb(e,t){return Hb.apply(this,arguments)}function Hb(){return Hb=we(F().mark((function e(t,n){var r,i,a,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sw((r=pd(t)).remoteStore)||sd("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=pd(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.$s.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.ua.get(i)||[]).push(n),r.ua.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=ab(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Hb.apply(this,arguments)}function Qb(e,t){(e.ua.get(t)||[]).forEach((function(e){e.resolve()})),e.ua.delete(t)}function Yb(e,t,n){var r=pd(e),i=r.oa[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oa[r.currentUser.toKey()]=i}}function $b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=N(e.ea.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ta.delete(a),n&&e.Zu.la(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ea.delete(t),e.isPrimaryClient&&e.ra.Ri(t).forEach((function(t){e.ra.containsKey(t)||Jb(e,t)}))}function Jb(e,t){e.na.delete(t.path.canonicalString());var n=e.sa.get(t);null!==n&&(_w(e.remoteStore,n),e.sa=e.sa.remove(t),e.ia.delete(n),e_(e))}function Xb(e,t,n){var r,i=N(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof xb?(e.ra.addReference(a.key,t),Zb(e,a)):a instanceof Ib?(sd("SyncEngine","Document no longer in limbo: "+a.key),e.ra.removeReference(a.key,t),e.ra.containsKey(a.key)||Jb(e,a.key)):hd()}}catch(o){i.e(o)}finally{i.f()}}function Zb(e,t){var n=t.key,r=n.path.canonicalString();e.sa.get(n)||e.na.has(r)||(sd("SyncEngine","New document in limbo: "+n),e.na.add(r),e_(e))}function e_(e){for(;e.na.size>0&&e.sa.size<e.maxConcurrentLimboResolutions;){var t=e.na.values().next().value;e.na.delete(t);var n=new tp(Ud.fromString(t)),r=e.aa.next();e.ia.set(r,new Sb(n)),e.sa=e.sa.insert(n,r),bw(e.remoteStore,new Hm(sv(tv(n.path)),r,2,Td.A))}}function t_(e,t,n){return n_.apply(this,arguments)}function n_(){return n_=we(F().mark((function e(t,n,r){var i,a,o,u;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=pd(t),a=[],o=[],u=[],e.t0=i.ta.isEmpty(),e.t0){e.next=9;break}return i.ta.forEach((function(e,t){u.push(i.ha(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=dk.Js(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Zu.Ko(a),e.next=9,function(){var e=we(F().mark((function e(t,n){var r,i,a,o,u,s,c,l;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pd(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Dm.forEach(n,(function(t){return Dm.forEach(t.zs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Dm.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Fm(e.t0)){e.next=10;break}throw e.t0;case 10:sd("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=N(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.si.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.si=r.si.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),n_.apply(this,arguments)}function r_(e,t){return i_.apply(this,arguments)}function i_(){return i_=we(F().mark((function e(t,n){var r,i;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=pd(t)).currentUser.isEqual(n)){e.next=11;break}return sd("SyncEngine","User change. New user:",n.toKey()),e.next=5,mk(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.ua.forEach((function(e){e.forEach((function(e){e.reject(new yd(vd.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.ua.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,t_(r,i.ci);case 11:case"end":return e.stop()}}),e)}))),i_.apply(this,arguments)}function a_(e,t){var n=pd(e),r=n.ia.get(t);if(r&&r.Xu)return py().add(r.key);var i=py(),a=n.ea.get(t);if(!a)return i;var o,u=N(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ta.get(s);i=i.unionWith(c.view.qu)}}catch(l){u.e(l)}finally{u.f()}return i}function o_(e,t){return u_.apply(this,arguments)}function u_(){return u_=we(F().mark((function e(t,n){var r,i,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pd(t),e.next=3,Sk(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&Xb(r,n.targetId,a.zu),a));case 6:case"end":return e.stop()}}),e)}))),u_.apply(this,arguments)}function s_(e,t){return c_.apply(this,arguments)}function c_(){return c_=we(F().mark((function e(t,n){var r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pd(t),e.abrupt("return",Ak(r.localStore,n).then((function(e){return t_(r,e)})));case 2:case"end":return e.stop()}}),e)}))),c_.apply(this,arguments)}function l_(e,t,n,r){return f_.apply(this,arguments)}function f_(){return f_=we(F().mark((function e(t,n,r,i){var a,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=pd(t),e.next=3,function(e,t){var n=pd(e),r=pd(n.$s);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.ln(e,t).next((function(t){return t?n.ai.qs(e,t):Dm.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Uw(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Yb(a,n,i||null),Qb(a,n),function(e,t){pd(pd(e).$s).dn(t)}(a.localStore,n)):hd();case 11:return e.next=13,t_(a,o);case 13:e.next=16;break;case 15:sd("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),f_.apply(this,arguments)}function h_(e,t){return d_.apply(this,arguments)}function d_(){return d_=we(F().mark((function e(t,n){var r,i,a,o,u,s,c,l;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(__(r=pd(t)),x_(r),!0!==n||!0===r.ca){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,p_(r,i.toArray());case 5:return a=e.sent,r.ca=!0,e.next=9,eb(r.remoteStore,!0);case 9:o=N(a);try{for(o.s();!(u=o.n()).done;)s=u.value,bw(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ca){e.next=25;break}return c=[],l=Promise.resolve(),r.ea.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return $b(r,t),Ek(r.localStore,t,!0)})),_w(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,p_(r,c);case 21:return function(e){var t=pd(e);t.ia.forEach((function(e,n){_w(t.remoteStore,n)})),t.ra.bi(),t.ia=new Map,t.sa=new ty(tp.comparator)}(r),r.ca=!1,e.next=25,eb(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),d_.apply(this,arguments)}function p_(e,t,n){return v_.apply(this,arguments)}function v_(){return v_=we(F().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=pd(t),a=[],o=[],u=N(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ea.get(c))||0===f.length){e.next=34;break}return e.next=11,Ik(i.localStore,sv(f[0]));case 11:l=e.sent,h=N(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ta.get(p),e.next=20,o_(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Ck(i.localStore,c);case 36:return m=e.sent,e.next=39,Ik(i.localStore,m);case 39:return l=e.sent,e.next=42,Rb(i,y_(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Ko(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),v_.apply(this,arguments)}function y_(e){return ev(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function m_(e){var t=pd(e);return pd(pd(t.localStore).persistence).Os()}function g_(e,t,n,r){return k_.apply(this,arguments)}function k_(){return k_=we(F().mark((function e(t,n,r,i){var a,o,u,s;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=pd(t)).ca){e.next=3;break}return e.abrupt("return",void sd("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ea.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Ak(a.localStore,pv(o[0]));case 10:return u=e.sent,s=my.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,t_(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Ek(a.localStore,n,!0);case 17:return $b(a,n,i),e.abrupt("break",20);case 19:hd();case 20:case"end":return e.stop()}}),e)}))),k_.apply(this,arguments)}function w_(e,t,n){return b_.apply(this,arguments)}function b_(){return b_=we(F().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=__(t)).ca){e.next=45;break}a=N(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ea.has(u)){e.next=10;break}return sd("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Ck(i.localStore,u);case 12:return s=e.sent,e.next=15,Ik(i.localStore,s);case 15:return c=e.sent,e.next=18,Rb(i,y_(s),c.targetId,!1);case 18:bw(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=N(r),e.prev=30,h=F().mark((function e(){var t;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ea.has(t),!e.t0){e.next=5;break}return e.next=5,Ek(i.localStore,t,!1).then((function(){_w(i.remoteStore,t),$b(i,t)})).catch(zg);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),b_.apply(this,arguments)}function __(e){var t=pd(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Fb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=a_.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=jb.bind(null,t),t.Zu.Ko=vb.bind(null,t.eventManager),t.Zu.la=yb.bind(null,t.eventManager),t}function x_(e){var t=pd(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Bb.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Gb.bind(null,t),t}function I_(e,t,n){var r=pd(e);(function(){var e=we(F().mark((function e(t,n,r){var i,a,o,u,s;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=pd(e),r=Dy(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(_b(i)),a=new bb(i,t.localStore,n.M),e.next=15,n.fa();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Nu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.fa();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,t_(t,s.Ou,void 0);case 31:return e.next=33,function(e,t){var n=pd(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Mu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(ld("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var E_=function(){function e(){i(this,e),this.synchronizeTabs=!1}return o(e,[{key:"initialize",value:function(){var e=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=cw(t.databaseInfo.databaseId),this.sharedClientState=this.da(t),this.persistence=this._a(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.wa(t),this.localStore=this.ma(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wa",value:function(e){return null}},{key:"ma",value:function(e){return yk(this.persistence,new pk,e.initialUser,this.M)}},{key:"_a",value:function(e){return new zk(Kk.Wi,this.M)}},{key:"da",value:function(e){return new tw}},{key:"terminate",value:function(){var e=we(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),T_=function(e){s(n,e);var t=p(n);function n(e,r,a){var o;return i(this,n),(o=t.call(this)).ga=e,o.cacheSizeBytes=r,o.forceOwnership=a,o.synchronizeTabs=!1,o}return o(n,[{key:"initialize",value:function(){var e=we(F().mark((function e(t){var r=this;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nt(c(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.ga.initialize(this,t);case 4:return e.next=6,x_(this.ga.syncEngine);case 6:return e.next=8,Uw(this.ga.remoteStore);case 8:return e.next=10,this.persistence.Is((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ma",value:function(e){return yk(this.persistence,new pk,e.initialUser,this.M)}},{key:"wa",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Hg(t,e.asyncQueue)}},{key:"_a",value:function(e){var t=fk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Ng.withCacheSize(this.cacheSizeBytes):Ng.DEFAULT;return new sk(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,uw(),sw(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"da",value:function(e){return new tw}}]),n}(E_),S_=function(e){s(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this,e,r,!1)).ga=e,a.cacheSizeBytes=r,a.synchronizeTabs=!0,a}return o(n,[{key:"initialize",value:function(){var e=we(F().mark((function e(t){var r,i=this;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nt(c(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ga.syncEngine,e.t0=this.sharedClientState instanceof ew,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:l_.bind(null,r),Mr:g_.bind(null,r),Or:w_.bind(null,r),Os:m_.bind(null,r),Nr:s_.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Is(function(){var e=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h_(i.ga.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"da",value:function(e){var t=uw();if(!ew.vt(t))throw new yd(vd.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=fk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ew(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(T_),C_=function(){function e(){i(this,e)}return o(e,[{key:"initialize",value:function(){var e=we(F().mark((function e(t,n){var r=this;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Vb(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=r_.bind(null,this.syncEngine),e.next=12,eb(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new lb}},{key:"createDatastore",value:function(e){var t,n=cw(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new ow(t));return function(e,t,n,r){return new pw(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Vb(o.syncEngine,e,0)},a=rw.vt()?new rw:new nw,new yw(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Cb(e,t,n,r,i,a);return o&&(u.ca=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=we(F().mark((function e(t){var n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=pd(t),sd("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,kw(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function A_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return we(F().mark((function r(){var i;return F().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return we(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var N_=function(){function e(t){i(this,e),this.observer=t,this.muted=!1}return o(e,[{key:"next",value:function(e){this.observer.next&&this.ya(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"pa",value:function(){this.muted=!0}},{key:"ya",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),R_=function(){function e(t,n){var r=this;i(this,e),this.Ia=t,this.M=n,this.metadata=new md,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return o(e,[{key:"close",value:function(){return this.Ia.cancel()}},{key:"getMetadata",value:function(){var e=we(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fa",value:function(){var e=we(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Ea());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ea",value:function(){var e=we(F().mark((function e(){var t,n,r,i;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Aa();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ta.decode(t),r=Number(n),isNaN(r)&&this.Ra("length string (".concat(n,") is not valid number")),e.next=9,this.ba(r);case 9:return i=e.sent,e.abrupt("return",new kb(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pa",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Aa",value:function(){var e=we(F().mark((function e(){var t,n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Pa()<0)){e.next=7;break}return e.next=3,this.Va();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Pa())<0&&this.Ra("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(){var e=we(F().mark((function e(t){var n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Va();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Ra("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ta.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ra",value:function(e){throw this.Ia.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Va",value:function(){var e=we(F().mark((function e(){var t,n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ia.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),D_=function(){function e(t){i(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return o(e,[{key:"lookup",value:function(){var e=we(F().mark((function e(t){var n,r=this;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new yd(vd.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=we(F().mark((function e(t,n){var r,i,a,o,u,s;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pd(t),i=Vy(r.M)+"/documents",a={documents:n.map((function(e){return Ly(r.M,e)}))},e.next=5,r.co("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=zy(r.M,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());dd(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Yv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=we(F().mark((function e(){var t,n=this;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=tp.fromPath(t);n.mutations.push(new $v(r,n.precondition(r)))})),e.next=7,function(){var e=we(F().mark((function e(t,n){var r,i,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pd(t),i=Vy(r.M)+"/documents",a={writes:n.map((function(e){return Gy(r.M,e)}))},e.next=3,r.ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw hd();t=Pd.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new yd(vd.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ov.updateTime(t):Ov.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Pd.min()))throw new yd(vd.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ov.updateTime(t)}return Ov.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),P_=function(){function e(t,n,r,a){i(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=a,this.va=5,this.So=new lw(this.asyncQueue,"transaction_retry")}return o(e,[{key:"run",value:function(){this.va-=1,this.Sa()}},{key:"Sa",value:function(){var e=this;this.So.Io(we(F().mark((function t(){var n,r;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new D_(e.datastore),(r=e.Da(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ca(t)}))}))})).catch((function(t){e.Ca(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Da",value:function(e){try{var t=this.updateFunction(e);return!Xd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ca",value:function(e){var t=this;this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget((function(){return t.Sa(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"xa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Xv(t)}return!1}}]),e}(),O_=function(){function e(t,n,r,a){var o=this;i(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=id.UNAUTHENTICATED,this.clientId=Cd.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sd("FirestoreClient","Received user=",t.uid),e.next=3,o.authCredentialListener(t);case 3:o.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return sd("FirestoreClient","Received new app check token=",e),o.appCheckCredentialListener(e,o.user)}))}return o(e,[{key:"getConfiguration",value:function(){var e=we(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new yd(vd.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new md;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(we(F().mark((function n(){var r;return F().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=ab(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function L_(e,t){return M_.apply(this,arguments)}function M_(){return M_=we(F().mark((function e(t,n){var r,i;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),sd("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,mk(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),M_.apply(this,arguments)}function F_(e,t){return U_.apply(this,arguments)}function U_(){return U_=we(F().mark((function e(t,n){var r,i;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,V_(t);case 3:return r=e.sent,sd("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Xw(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Xw(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),U_.apply(this,arguments)}function V_(e){return j_.apply(this,arguments)}function j_(){return j_=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return sd("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,L_(t,new E_);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),j_.apply(this,arguments)}function q_(e){return B_.apply(this,arguments)}function B_(){return B_=we(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return sd("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,F_(t,new C_);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),B_.apply(this,arguments)}function z_(e){return V_(e).then((function(e){return e.persistence}))}function G_(e){return V_(e).then((function(e){return e.localStore}))}function K_(e){return q_(e).then((function(e){return e.remoteStore}))}function W_(e){return q_(e).then((function(e){return e.syncEngine}))}function H_(e){return Q_.apply(this,arguments)}function Q_(){return Q_=we(F().mark((function e(t){var n,r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q_(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Ab.bind(null,n.syncEngine),r.onUnlisten=Pb.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),Q_.apply(this,arguments)}function Y_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new md;return e.asyncQueue.enqueueAndForget(we(F().mark((function i(){return F().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new N_({next:function(a){t.enqueueAndForget((function(){return db(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new yd(vd.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new yd(vd.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new gb(tv(n.path),a,{includeMetadataChanges:!0,Du:!0});return fb(e,o)},i.next=3,H_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function $_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new md;return e.asyncQueue.enqueueAndForget(we(F().mark((function i(){return F().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new N_({next:function(n){t.enqueueAndForget((function(){return db(e,o)})),n.fromCache&&"server"===r.source?i.reject(new yd(vd.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new gb(n,a,{includeMetadataChanges:!0,Du:!0});return fb(e,o)},i.next=3,H_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var J_=new Map;function X_(e,t,n){if(!n)throw new yd(vd.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Z_(e,t,n,r){if(!0===t&&!0===r)throw new yd(vd.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function ex(e){if(!tp.isDocumentKey(e))throw new yd(vd.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function tx(e){if(tp.isDocumentKey(e))throw new yd(vd.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function nx(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":hd()}function rx(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new yd(vd.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=nx(e);throw new yd(vd.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function ix(e,t){if(t<=0)throw new yd(vd.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var ax=function(){function e(t){var n;if(i(this,e),void 0===t.host){if(void 0!==t.ssl)throw new yd(vd.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new yd(vd.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Z_("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return o(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),ox=function(){function e(t,n,r){i(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ax({}),this._settingsFrozen=!1,t instanceof Jd?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new yd(vd.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jd(e.options.projectId)}(t))}return o(e,[{key:"app",get:function(){if(!this._app)throw new yd(vd.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new yd(vd.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ax(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new kd;switch(e.type){case"gapi":var t=e.client;return dd(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new xd(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new yd(vd.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=J_.get(e);t&&(sd("ComponentProvider","Removing Datastore"),J_.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function ux(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=rx(e,ox))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&ld("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=id.MOCK_USER;else{o=G(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new yd(vd.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new id(s)}e._authCredentials=new wd(new gd(o,u))}}var sx=function(){function e(t,n,r){i(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return o(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new lx(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),cx=function(){function e(t,n,r){i(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return o(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),lx=function(e){s(n,e);var t=p(n);function n(e,r,a){var o;return i(this,n),(o=t.call(this,e,r,tv(a)))._path=a,o.type="collection",o}return o(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new sx(this.firestore,null,new tp(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(cx);function fx(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=fe(e),X_("collection","path",t),e instanceof ox){var a=Ud.fromString.apply(Ud,[t].concat(r));return tx(a),new lx(e,null,a)}if(!(e instanceof sx||e instanceof lx))throw new yd(vd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ud.fromString.apply(Ud,[t].concat(r)));return tx(o),new lx(e.firestore,null,o)}function hx(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=fe(e),1===arguments.length&&(t=Cd.R()),X_("doc","path",t),e instanceof ox){var a=Ud.fromString.apply(Ud,[t].concat(r));return ex(a),new sx(e,null,new tp(a))}if(!(e instanceof sx||e instanceof lx))throw new yd(vd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ud.fromString.apply(Ud,[t].concat(r)));return ex(o),new sx(e.firestore,e instanceof lx?e.converter:null,new tp(o))}function dx(e,t){return e=fe(e),t=fe(t),(e instanceof sx||e instanceof lx)&&(t instanceof sx||t instanceof lx)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function px(e,t){return e=fe(e),t=fe(t),e instanceof cx&&t instanceof cx&&e.firestore===t.firestore&&lv(e._query,t._query)&&e.converter===t.converter}var vx=function(){function e(){var t=this;i(this,e),this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new lw(this,"async_queue_retry"),this.Ua=function(){var e=sw();e&&sd("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=sw();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ua)}return o(e,[{key:"isShuttingDown",get:function(){return this.Ma}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.qa(),this.Ga(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;var t=sw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}},{key:"enqueue",value:function(e){var t=this;if(this.qa(),this.Ma)return new Promise((function(){}));var n=new md;return this.Ga((function(){return t.Ma&&t.Ba?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.ka.push(e),t.Ka()}))}},{key:"Ka",value:function(){var e=we(F().mark((function e(){var t=this;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.ka.length){e.next=14;break}return e.prev=1,e.next=4,this.ka[0]();case 4:this.ka.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Fm(e.t0)){e.next=12;break}throw e.t0;case 12:sd("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.ka.length>0&&this.So.Io((function(){return t.Ka()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Ga",value:function(e){var t=this,n=this.Na.then((function(){return t.$a=!0,e().catch((function(e){t.Fa=e,t.$a=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw cd("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.$a=!1,e}))}));return this.Na=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.qa(),this.La.indexOf(e)>-1&&(t=0);var i=ib.createAndSchedule(this,e,t,n,(function(e){return r.Qa(e)}));return this.Oa.push(i),i}},{key:"qa",value:function(){this.Fa&&hd()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ja",value:function(){var e=we(F().mark((function e(){var t;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Na,e.next=3,t;case 3:if(t!==this.Na){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(e){var t,n=N(this.Oa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"za",value:function(e){var t=this;return this.ja().then((function(){t.Oa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=N(t.Oa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.ja()}))}},{key:"Ha",value:function(e){this.La.push(e)}},{key:"Qa",value:function(e){var t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}]),e}();function yx(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=N(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var mx=function(){function e(){i(this,e),this._progressObserver={},this._taskCompletionResolver=new md,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return o(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),gx=function(e){s(n,e);var t=p(n);function n(e,r,a){var o;return i(this,n),(o=t.call(this,e,r,a)).type="firestore",o._queue=new vx,o._persistenceKey="name"in e?e.name:"[DEFAULT]",o}return o(n,[{key:"_terminate",value:function(){return this._firestoreClient||wx(this),this._firestoreClient.terminate()}}]),n}(ox);function kx(e){return e._firestoreClient||wx(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function wx(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new $d(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new O_(e._authCredentials,e._appCheckCredentials,e._queue,r)}function bx(e,t,n){var r=new md;return e.asyncQueue.enqueue(we(F().mark((function i(){return F().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,L_(e,n);case 3:return i.next=5,F_(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===vd.FAILED_PRECONDITION||e.code===vd.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function _x(e){return function(e){return e.asyncQueue.enqueue(we(F().mark((function t(){var n,r;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z_(e);case 2:return n=t.sent,t.next=5,K_(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=pd(e);return t.lu.delete(0),mw(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(kx(e=rx(e,gx)))}function xx(e){return function(e){return e.asyncQueue.enqueue(we(F().mark((function t(){var n,r;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z_(e);case 2:return n=t.sent,t.next=5,K_(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=we(F().mark((function e(t){var n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=pd(t)).lu.add(0),e.next=4,kw(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(kx(e=rx(e,gx)))}function Ix(e,t){var n=kx(e=rx(e,gx)),r=new mx;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new R_(e,t)}(function(e,t){if(e instanceof Uint8Array)return A_(e,t);if(e instanceof ArrayBuffer)return A_(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,cw(t));e.asyncQueue.enqueueAndForget(we(F().mark((function t(){return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=I_,t.next=3,W_(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function Ex(e,t){return function(e,t){return e.asyncQueue.enqueue(we(F().mark((function n(){return F().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=pd(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.ds.getNamedQuery(e,t)}))},n.next=3,G_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(kx(e=rx(e,gx)),t).then((function(t){return t?new cx(e,null,t.query):null}))}function Tx(e){if(e._initialized||e._terminated)throw new yd(vd.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Sx=function(){function e(){i(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0;a<n.length;++a)if(0===n[a].length)throw new yd(vd.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jd(n)}return o(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Cx=function(){function e(t){i(this,e),this._byteString=t}return o(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Bd.fromBase64String(t))}catch(t){throw new yd(vd.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Bd.fromUint8Array(t))}}]),e}(),Ax=o((function e(t){i(this,e),this._methodName=t})),Nx=function(){function e(t,n){if(i(this,e),!isFinite(t)||t<-90||t>90)throw new yd(vd.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new yd(vd.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return o(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Ad(this._lat,e._lat)||Ad(this._long,e._long)}}]),e}(),Rx=/^__.*__$/,Dx=function(){function e(t,n,r){i(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return o(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new zv(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bv(e,this.data,t,this.fieldTransforms)}}]),e}(),Px=function(){function e(t,n,r){i(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return o(e,[{key:"toMutation",value:function(e,t){return new zv(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Ox(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw hd()}}var Lx=function(){function e(t,n,r,a,o,u){i(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=a,void 0===o&&this.Ja(),this.fieldTransforms=o||[],this.fieldMask=u||[]}return o(e,[{key:"path",get:function(){return this.settings.path}},{key:"Ya",get:function(){return this.settings.Ya}},{key:"Xa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Za",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Xa({path:n,tc:!1});return r.ec(e),r}},{key:"nc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Xa({path:n,tc:!1});return r.Ja(),r}},{key:"sc",value:function(e){return this.Xa({path:void 0,tc:!0})}},{key:"ic",value:function(e){return tI(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Ja",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ec(this.path.get(e))}},{key:"ec",value:function(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(Ox(this.Ya)&&Rx.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}]),e}(),Mx=function(){function e(t,n,r){i(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||cw(t)}return o(e,[{key:"uc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Lx({Ya:e,methodName:t,oc:n,path:jd.emptyPath(),tc:!1,rc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function Fx(e){var t=e._freezeSettings(),n=cw(e._databaseId);return new Mx(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ux(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.uc(a.merge||a.mergeFields?2:0,t,n,i);Jx("Data must be an object, but it was:",o,r);var u,s,c=Yx(r,o);if(a.merge)u=new qd(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=N(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=Xx(t,d,n);if(!o.contains(p))throw new yd(vd.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));nI(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new qd(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new Dx(new bp(c),u,s)}var Vx=function(e){s(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return o(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Ya)throw 1===e.Ya?e.ic("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ic("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Ax);function jx(e,t,n){return new Lx({Ya:3,oc:t.settings.oc,methodName:e._methodName,tc:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var qx=function(e){s(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return o(n,[{key:"_toFieldTransform",value:function(e){return new Dv(e.path,new Iv)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Ax),Bx=function(e){s(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this,e)).ac=r,a}return o(n,[{key:"_toFieldTransform",value:function(e){var t=jx(this,e,!0),n=this.ac.map((function(e){return Qx(e,t)})),r=new Ev(n);return new Dv(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ax),zx=function(e){s(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this,e)).ac=r,a}return o(n,[{key:"_toFieldTransform",value:function(e){var t=jx(this,e,!0),n=this.ac.map((function(e){return Qx(e,t)})),r=new Sv(n);return new Dv(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ax),Gx=function(e){s(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this,e)).cc=r,a}return o(n,[{key:"_toFieldTransform",value:function(e){var t=new Av(e.M,kv(e.M,this.cc));return new Dv(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ax);function Kx(e,t,n,r){var i=e.uc(1,t,n);Jx("Data must be an object, but it was:",i,r);var a=[],o=bp.empty();Ld(r,(function(e,r){var u=eI(t,e,n);r=fe(r);var s=i.nc(u);if(r instanceof Vx)a.push(u);else{var c=Qx(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new qd(a);return new Px(o,u,i.fieldTransforms)}function Wx(e,t,n,r,i,a){var o=e.uc(1,t,n),u=[Xx(t,r,n)],s=[i];if(a.length%2!=0)throw new yd(vd.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(Xx(t,a[c])),s.push(a[c+1]);for(var l=[],f=bp.empty(),h=u.length-1;h>=0;--h)if(!nI(l,u[h])){var d=u[h],p=s[h];p=fe(p);var v=o.nc(d);if(p instanceof Vx)l.push(d);else{var y=Qx(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new qd(l);return new Px(f,m,o.fieldTransforms)}function Hx(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Qx(n,e.uc(r?4:3,t))}function Qx(e,t){if($x(e=fe(e)))return Jx("Unsupported field value:",t,e),Yx(e,t);if(e instanceof Ax)return function(e,t){if(!Ox(t.Ya))throw t.ic("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ic("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.tc&&4!==t.Ya)throw t.ic("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=N(e);try{for(a.s();!(n=a.n()).done;){var o=Qx(n.value,t.sc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=fe(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return kv(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Dd.fromDate(e);return{timestampValue:Ay(t.M,n)}}if(e instanceof Dd){var r=new Dd(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ay(t.M,r)}}if(e instanceof Nx)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Cx)return{bytesValue:Ny(t.M,e._byteString)};if(e instanceof sx){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ic("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Py(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ic("Unsupported field value: ".concat(nx(e)))}(e,t)}function Yx(e,t){var n={};return Md(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ld(e,(function(e,r){var i=Qx(r,t.Za(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function $x(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Dd||e instanceof Nx||e instanceof Cx||e instanceof sx||e instanceof Ax)}function Jx(e,t,n){if(!$x(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=nx(n);throw"an object"===r?t.ic(e+" a custom object"):t.ic(e+" "+r)}}function Xx(e,t,n){if((t=fe(t))instanceof Sx)return t._internalPath;if("string"==typeof t)return eI(e,t);throw tI("Field path arguments must be of type string or ",e,!1,void 0,n)}var Zx=new RegExp("[~\\*/\\[\\]]");function eI(e,t,n){if(t.search(Zx)>=0)throw tI("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return O(Sx,ge(t.split(".")))._internalPath}catch(r){throw tI("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function tI(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new yd(vd.INVALID_ARGUMENT,u+e+s)}function nI(e,t){return e.some((function(e){return e.isEqual(t)}))}var rI=function(){function e(t,n,r,a,o){i(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=a,this._converter=o}return o(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new sx(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new iI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(aI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),iI=function(e){s(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return o(n,[{key:"data",value:function(){return Nt(c(n.prototype),"data",this).call(this)}}]),n}(rI);function aI(e,t){return"string"==typeof t?eI(e,t):t instanceof Sx?t._internalPath:t._delegate._internalPath}var oI=function(){function e(t,n){i(this,e),this.hasPendingWrites=t,this.fromCache=n}return o(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),uI=function(e){s(n,e);var t=p(n);function n(e,r,a,o,u,s){var c;return i(this,n),(c=t.call(this,e,r,a,o,s))._firestore=e,c._firestoreImpl=e,c.metadata=u,c}return o(n,[{key:"exists",value:function(){return Nt(c(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new sI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(aI("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(rI),sI=function(e){s(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return o(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Nt(c(n.prototype),"data",this).call(this,e)}}]),n}(uI),cI=function(){function e(t,n,r,a){i(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=a,this.metadata=new oI(a.hasPendingWrites,a.fromCache),this.query=r}return o(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new sI(n._firestore,n._userDataWriter,r.key,r,new oI(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new yd(vd.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new sI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new oI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new sI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new oI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:lI(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function lI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return hd()}}function fI(e,t){return e instanceof uI&&t instanceof uI?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof cI&&t instanceof cI&&e._firestore===t._firestore&&px(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function hI(e){if(rv(e)&&0===e.explicitOrderBy.length)throw new yd(vd.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var dI=o((function e(){i(this,e)}));function pI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var vI=function(e){s(n,e);var t=p(n);function n(e,r,a){var o;return i(this,n),(o=t.call(this)).hc=e,o.lc=r,o.fc=a,o.type="where",o}return o(n,[{key:"_apply",value:function(e){var t=Fx(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new yd(vd.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){TI(o,a);var s,c=[],l=N(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(EI(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=EI(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||TI(o,a),u=Hx(n,"where",o,"in"===a||"not-in"===a);var h=Vp.create(i,a,u);return function(e,t){if(t.S()){var n=av(e);if(null!==n&&!n.isEqual(t.field))throw new yd(vd.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=iv(e);null!==r&&SI(e,t.field,r)}var i=function(e,t){var n,r=N(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new yd(vd.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new yd(vd.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new cx(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Zp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(dI);var yI=function(e){s(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this)).hc=e,a.dc=r,a.type="orderBy",a}return o(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new yd(vd.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new yd(vd.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Yp(t,n);return function(e,t){if(null===iv(e)){var n=av(e);null!==n&&SI(e,n,t.field)}}(e,r),r}(e._query,this.hc,this.dc);return new cx(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Zp(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(dI);var mI=function(e){s(n,e);var t=p(n);function n(e,r,a){var o;return i(this,n),(o=t.call(this)).type=e,o._c=r,o.wc=a,o}return o(n,[{key:"_apply",value:function(e){return new cx(e.firestore,e.converter,cv(e._query,this._c,this.wc))}}]),n}(dI);var gI=function(e){s(n,e);var t=p(n);function n(e,r,a){var o;return i(this,n),(o=t.call(this)).type=e,o.mc=r,o.gc=a,o}return o(n,[{key:"_apply",value:function(e){var t=II(e,this.type,this.mc,this.gc);return new cx(e.firestore,e.converter,function(e,t){return new Zp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(dI);function kI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new gI("startAt",t,!0)}function wI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new gI("startAfter",t,!1)}var bI=function(e){s(n,e);var t=p(n);function n(e,r,a){var o;return i(this,n),(o=t.call(this)).type=e,o.mc=r,o.gc=a,o}return o(n,[{key:"_apply",value:function(e){var t=II(e,this.type,this.mc,this.gc);return new cx(e.firestore,e.converter,function(e,t){return new Zp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(dI);function _I(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new bI("endBefore",t,!1)}function xI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new bI("endAt",t,!0)}function II(e,t,n,r){if(n[0]=fe(n[0]),n[0]instanceof rI)return function(e,t,n,r,i){if(!r)throw new yd(vd.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=N(uv(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(fp(t,r.key));else{var c=r.data.field(s.field);if(Hd(c))throw new yd(vd.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new yd(vd.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Qp(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Fx(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new yd(vd.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new yd(vd.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!ov(e)&&-1!==c.indexOf("/"))throw new yd(vd.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Ud.fromString(c));if(!tp.isDocumentKey(l))throw new yd(vd.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new tp(l);u.push(fp(t,f))}else{var h=Hx(n,r,c);u.push(h)}}return new Qp(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function EI(e,t,n){if("string"==typeof(n=fe(n))){if(""===n)throw new yd(vd.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ov(t)&&-1!==n.indexOf("/"))throw new yd(vd.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Ud.fromString(n));if(!tp.isDocumentKey(r))throw new yd(vd.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return fp(e,new tp(r))}if(n instanceof sx)return fp(e,n._key);throw new yd(vd.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(nx(n),"."))}function TI(e,t){if(!Array.isArray(e)||0===e.length)throw new yd(vd.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new yd(vd.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function SI(e,t,n){if(!n.isEqual(t))throw new yd(vd.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var CI=function(){function e(){i(this,e)}return o(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(ip(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kd(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw hd()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Ld(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Nx(Kd(e.latitude),Kd(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Qd(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Yd(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Gd(e);return new Dd(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Ud.fromString(e);dd(rm(n));var r=new Jd(n.get(1),n.get(3)),i=new tp(n.popFirst(5));return r.isEqual(t)||cd("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function AI(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var NI=function(e){s(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this)).firestore=e,r}return o(n,[{key:"convertBytes",value:function(e){return new Cx(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new sx(this.firestore,null,t)}}]),n}(CI),RI=function(){function e(t,n){i(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Fx(t)}return o(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=DI(e,this._firestore),i=AI(r.converter,t,n),a=Ux(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Ov.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=DI(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=fe(t))||t instanceof Sx?Wx(this._dataReader,"WriteBatch.update",i._key,t,n,o):Kx(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Ov.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=DI(e,this._firestore);return this._mutations=this._mutations.concat(new Yv(t._key,Ov.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new yd(vd.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function DI(e,t){if((e=fe(e)).firestore!==t)throw new yd(vd.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var PI=function(e){s(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this)).firestore=e,r}return o(n,[{key:"convertBytes",value:function(e){return new Cx(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new sx(this.firestore,null,t)}}]),n}(CI);function OI(e){e=rx(e,sx);var t=rx(e.firestore,gx),n=kx(t),r=new PI(t);return function(e,t){var n=new md;return e.asyncQueue.enqueueAndForget(we(F().mark((function r(){return F().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=we(F().mark((function e(t,n,r){var i,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=pd(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.ai.Bs(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new yd(vd.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=ab(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,G_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new uI(t,r,e._key,n,new oI(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function LI(e){e=rx(e,cx);var t=rx(e.firestore,gx),n=kx(t),r=new PI(t);return function(e,t){var n=new md;return e.asyncQueue.enqueueAndForget(we(F().mark((function r(){return F().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=we(F().mark((function e(t,n,r){var i,a,o,u,s;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Sk(t,n,!0);case 3:i=e.sent,a=new Eb(n,i.hi),o=a.Gu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=ab(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,G_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new cI(t,r,e,n)}))}function MI(e,t,n){e=rx(e,sx);var r=rx(e.firestore,gx),i=AI(e.converter,t,n);return jI(r,[Ux(Fx(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ov.none())])}function FI(e,t,n){e=rx(e,sx);for(var r=rx(e.firestore,gx),i=Fx(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return jI(r,[("string"==typeof(t=fe(t))||t instanceof Sx?Wx(i,"updateDoc",e._key,t,n,o):Kx(i,"updateDoc",e._key,t)).toMutation(e._key,Ov.exists(!0))])}function UI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=fe(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||yx(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(yx(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof sx)l=rx(e.firestore,gx),f=tv(e._key.path),c={next:function(t){n[s]&&n[s](qI(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=rx(e,cx);l=rx(p.firestore,gx),f=p._query;var v=new PI(l);c={next:function(e){n[s]&&n[s](new cI(l,v,p,e))},error:n[s+1],complete:n[s+2]},hI(e._query)}return function(e,t,n,r){var i=new N_(r),a=new gb(t,i,n);return e.asyncQueue.enqueueAndForget(we(F().mark((function t(){return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=fb,t.next=3,H_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.pa(),e.asyncQueue.enqueueAndForget(we(F().mark((function t(){return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=db,t.next=3,H_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(kx(l),f,h,c)}function VI(e,t){return function(e,t){var n=new N_(t);return e.asyncQueue.enqueueAndForget(we(F().mark((function t(){return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){pd(e).Tu.add(t),t.next()},t.next=3,H_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.pa(),e.asyncQueue.enqueueAndForget(we(F().mark((function t(){return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){pd(e).Tu.delete(t)},t.next=3,H_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(kx(e=rx(e,gx)),yx(t)?t:{next:t})}function jI(e,t){return function(e,t){var n=new md;return e.asyncQueue.enqueueAndForget(we(F().mark((function r(){return F().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Lb,r.next=3,W_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(kx(e),t)}function qI(e,t,n){var r=n.docs.get(t._key),i=new PI(e);return new uI(e,i,t._key,r,new oI(n.hasPendingWrites,n.fromCache),t.converter)}var BI=function(e){s(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this,e,r))._firestore=e,a}return o(n,[{key:"get",value:function(e){var t=this,r=DI(e,this._firestore),i=new PI(this._firestore);return Nt(c(n.prototype),"get",this).call(this,e).then((function(e){return new uI(t._firestore,i,r._key,e._document,new oI(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){i(this,e),this._firestore=t,this._transaction=n,this._dataReader=Fx(t)}return o(e,[{key:"get",value:function(e){var t=this,n=DI(e,this._firestore),r=new NI(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return hd();var i=e[0];if(i.isFoundDocument())return new rI(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new rI(t._firestore,r,n._key,null,n.converter);throw hd()}))}},{key:"set",value:function(e,t,n){var r=DI(e,this._firestore),i=AI(r.converter,t,n),a=Ux(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=DI(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=fe(t))||t instanceof Sx?Wx(this._dataReader,"Transaction.update",i._key,t,n,o):Kx(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=DI(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function zI(e,t){return function(e,t){var n=new md;return e.asyncQueue.enqueueAndForget(we(F().mark((function r(){var i;return F().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return q_(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new P_(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(kx(e=rx(e,gx)),(function(n){return t(new BI(e,n))}))}function GI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Bx("arrayUnion",t)}function KI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new zx("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ad=e}(Xe),Ke(new be("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new gx(i,new bd(e.getProvider("auth-internal")),new Ed(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),it(rd,"3.4.7",e),it(rd,"3.4.7","esm2017")}();function WI(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new yd("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function HI(){if("undefined"===typeof Uint8Array)throw new yd("unimplemented","Uint8Arrays are not available in this environment.")}function QI(){if("undefined"==typeof atob)throw new yd("unimplemented","Blobs are unavailable in Firestore in this environment.")}var YI=function(){function e(t){i(this,e),this._delegate=t}return o(e,[{key:"toBase64",value:function(){return QI(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return HI(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return QI(),new e(Cx.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return HI(),new e(Cx.fromUint8Array(t))}}]),e}();function $I(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=N(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var JI=function(){function e(){i(this,e)}return o(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Tx(e=rx(e,gx));var n=kx(e),r=e._freezeSettings(),i=new C_;return bx(n,i,new T_(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Tx(e=rx(e,gx));var t=kx(e),n=e._freezeSettings(),r=new C_;return bx(t,r,new S_(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new yd(vd.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new md;return e._queue.enqueueAndForgetEvenWhileRestricted(we(F().mark((function n(){return F().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=we(F().mark((function e(t){var n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Om.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Om.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(fk(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),XI=function(){function e(t,n,r){var a=this;i(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return a.terminate()}},t instanceof Jd||(this._appCompat=t)}return o(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||ld("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ux(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return _x(this._delegate)}},{key:"disableNetwork",value:function(){return xx(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Z_("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new md;return e.asyncQueue.enqueueAndForget(we(F().mark((function n(){return F().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Wb,n.next=3,W_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(kx(e=rx(e,gx)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return VI(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new yd("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new hE(this,fx(this._delegate,e))}catch(t){throw iE(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new rE(this,hx(this._delegate,e))}catch(t){throw iE(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new cE(this,function(e,t){if(e=rx(e,ox),X_("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new yd(vd.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new cx(e,null,function(e){return new Zp(Ud.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw iE(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return zI(this._delegate,(function(n){return e(new eE(t,n))}))}},{key:"batch",value:function(){var e=this;return kx(this._delegate),new tE(new RI(this._delegate,(function(t){return jI(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Ix(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Ex(this._delegate,e).then((function(e){return e?new cE(t,e):null}))}}]),e}(),ZI=function(e){s(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this)).firestore=e,r}return o(n,[{key:"convertBytes",value:function(e){return new YI(new Cx(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return rE.forKey(t,this.firestore,null)}}]),n}(CI);var eE=function(){function e(t,n){i(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new ZI(t)}return o(e,[{key:"get",value:function(e){var t=this,n=dE(e);return this._delegate.get(n).then((function(e){return new uE(t._firestore,new uI(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=dE(e);return n?(WI("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=dE(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=dE(e);return this._delegate.delete(t),this}}]),e}(),tE=function(){function e(t){i(this,e),this._delegate=t}return o(e,[{key:"set",value:function(e,t,n){var r=dE(e);return n?(WI("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=dE(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=dE(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),nE=function(){function e(t,n,r){i(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return o(e,[{key:"fromFirestore",value:function(e,t){var n=new sI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new sE(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new ZI(t),n),i.set(n,a)),a}}]),e}();nE.INSTANCES=new WeakMap;var rE=function(){function e(t,n){i(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new ZI(t)}return o(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new hE(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new hE(this.firestore,fx(this._delegate,e))}catch(t){throw iE(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=fe(e))instanceof sx&&dx(this._delegate,e)}},{key:"set",value:function(e,t){t=WI("DocumentReference.set",t);try{return t?MI(this._delegate,e,t):MI(this._delegate,e)}catch(n){throw iE(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?FI(this._delegate,e):FI.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw iE(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return jI(rx(e.firestore,gx),[new Yv(e._key,Ov.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=aE(n),a=oE(n,(function(t){return new uE(e.firestore,new uI(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return UI(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?OI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=rx(e,sx);var t=rx(e.firestore,gx);return Y_(kx(t),e._key,{source:"server"}).then((function(n){return qI(t,e,n)}))}(this._delegate):function(e){e=rx(e,sx);var t=rx(e.firestore,gx);return Y_(kx(t),e._key).then((function(n){return qI(t,e,n)}))}(this._delegate),t.then((function(e){return new uE(n.firestore,new uI(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(nE.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new yd("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new sx(n._delegate,r,new tp(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new sx(n._delegate,r,t))}}]),e}();function iE(e,t,n){return e.message=e.message.replace(t,n),e}function aE(e){var t,n=N(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!$I(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function oE(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=$I(e[0])?e[0]:$I(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var uE=function(){function e(t,n){i(this,e),this._firestore=t,this._delegate=n}return o(e,[{key:"ref",get:function(){return new rE(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return fI(this._delegate,e._delegate)}}]),e}(),sE=function(e){s(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return o(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||hd()}(void 0!==t),t}}]),n}(uE),cE=function(){function e(t,n){i(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new ZI(t)}return o(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,pI(this._delegate,function(e,t,n){var r=t,i=aI("where",e);return new vI(i,r,n)}(t,n,r)))}catch(i){throw iE(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,pI(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=aI("orderBy",e);return new yI(n,t)}(t,n)))}catch(r){throw iE(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,pI(this._delegate,function(e){return ix("limit",e),new mI("limit",e,"F")}(t)))}catch(n){throw iE(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,pI(this._delegate,function(e){return ix("limitToLast",e),new mI("limitToLast",e,"L")}(t)))}catch(n){throw iE(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,pI(this._delegate,kI.apply(void 0,arguments)))}catch(t){throw iE(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,pI(this._delegate,wI.apply(void 0,arguments)))}catch(t){throw iE(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,pI(this._delegate,_I.apply(void 0,arguments)))}catch(t){throw iE(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,pI(this._delegate,xI.apply(void 0,arguments)))}catch(t){throw iE(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return px(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?LI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=rx(e,cx);var t=rx(e.firestore,gx),n=kx(t),r=new PI(t);return $_(n,e._query,{source:"server"}).then((function(n){return new cI(t,r,e,n)}))}(this._delegate):function(e){e=rx(e,cx);var t=rx(e.firestore,gx),n=kx(t),r=new PI(t);return hI(e._query),$_(n,e._query).then((function(n){return new cI(t,r,e,n)}))}(this._delegate),t.then((function(e){return new fE(n.firestore,new cI(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=aE(n),a=oE(n,(function(t){return new fE(e.firestore,new cI(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return UI(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(nE.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),lE=function(){function e(t,n){i(this,e),this._firestore=t,this._delegate=n}return o(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new sE(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),fE=function(){function e(t,n){i(this,e),this._firestore=t,this._delegate=n}return o(e,[{key:"query",get:function(){return new cE(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new sE(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new lE(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new sE(n._firestore,r))}))}},{key:"isEqual",value:function(e){return fI(this._delegate,e._delegate)}}]),e}(),hE=function(e){s(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this,e,r)).firestore=e,a._delegate=r,a}return o(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new rE(this.firestore,e):null}},{key:"doc",value:function(e){try{return new rE(this.firestore,void 0===e?hx(this._delegate):hx(this._delegate,e))}catch(t){throw iE(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=rx(e.firestore,gx),r=hx(e),i=AI(e.converter,t);return jI(n,[Ux(Fx(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ov.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new rE(t.firestore,e)}))}},{key:"isEqual",value:function(e){return dx(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(nE.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(cE);function dE(e){return rx(e,sx)}var pE=function(){function e(){i(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=O(Sx,n)}return o(e,[{key:"isEqual",value:function(e){return(e=fe(e))instanceof Sx&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(jd.keyField().canonicalString())}}]),e}(),vE=function(){function e(t){i(this,e),this._delegate=t}return o(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new qx("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Vx("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=GI.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=KI.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Gx("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),yE={Firestore:XI,GeoPoint:Nx,Timestamp:Dd,Blob:YI,Transaction:eE,WriteBatch:tE,DocumentReference:rE,DocumentSnapshot:uE,Query:cE,QueryDocumentSnapshot:sE,QuerySnapshot:fE,CollectionReference:hE,FieldPath:pE,FieldValue:vE,setLogLevel:function(e){!function(e){od.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new be("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},yE)))}(e,(function(e,t){return new XI(e,t,new JI)})),e.registerVersion("@firebase/firestore-compat","0.1.16")}(Ct);var mE="firebasestorage.googleapis.com",gE=function(e){s(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this,kE(e),"Firebase Storage: ".concat(r," (").concat(kE(e),")"))).customData={serverResponse:null},a._baseMessage=a.message,Object.setPrototypeOf(h(a),n.prototype),a}return o(n,[{key:"_codeEquals",value:function(e){return kE(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(X);function kE(e){return"storage/"+e}function wE(){return new gE("unknown","An unknown error occurred, please check the error payload for server response.")}function bE(){return new gE("canceled","User canceled the upload/download.")}function _E(){return new gE("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function xE(e){return new gE("invalid-argument",e)}function IE(){return new gE("app-deleted","The Firebase app was deleted.")}function EE(e){return new gE("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function TE(e,t){return new gE("invalid-format","String does not match format '"+e+"': "+t)}function SE(e){throw new gE("internal-error","Internal error: "+e)}var CE,AE=function(){function e(t,n){i(this,e),this.bucket=t,this.path_=n}return o(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new gE("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===mE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new gE("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),NE=function(){function e(t){i(this,e),this.promise_=Promise.reject(t)}return o(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function RE(e){return"string"===typeof e||e instanceof String}function DE(e){return PE()&&e instanceof Blob}function PE(){return"undefined"!==typeof Blob}function OE(e,t,n,r){if(r<t)throw xE("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw xE("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function LE(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function ME(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(CE||(CE={}));var FE=function(){function e(t,n,r,a,o,u,s,c,l,f,h){var d=this;i(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=a,this.successCodes_=o,this.additionalRetryCodes_=u,this.callback_=s,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=f,this.connectionFactory_=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){d.resolve_=e,d.reject_=t,d.start_()}))}return o(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=wE();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?IE():bE());else i(new gE("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new UE(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new UE(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===CE.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new UE(o,r))}else{var u=r.getErrorCode()===CE.ABORT;t(!1,new UE(!1,null,u))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),UE=o((function e(t,n,r){i(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function VE(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function jE(){for(var e=VE(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(PE())return new Blob(n);throw new gE("unsupported-environment","This browser doesn't seem to support creating Blobs")}var qE={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},BE=o((function e(t,n){i(this,e),this.data=t,this.contentType=n||null}));function zE(e,t){switch(e){case qE.RAW:return new BE(GE(t));case qE.BASE64:case qE.BASE64URL:return new BE(KE(e,t));case qE.DATA_URL:return new BE(function(e){var t=new WE(e);return t.base64?KE(qE.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw TE(qE.DATA_URL,"Malformed data URL.")}return GE(t)}(t.rest)}(t),new WE(t).contentType)}throw wE()}function GE(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function KE(e,t){switch(e){case qE.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw TE(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case qE.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw TE(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(c){throw TE(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var WE=o((function e(t){i(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw TE(qE.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var HE=function(){function e(t,n){i(this,e);var r=0,a="";DE(t)?(this.data_=t,r=t.size,a=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=a}return o(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(DE(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(PE()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(jE.apply(null,i))}var a=n.map((function(e){return RE(e)?zE(qE.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function QE(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function YE(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function $E(e,t){return t}var JE=o((function e(t,n,r,a){i(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=a||$E})),XE=null;function ZE(){if(XE)return XE;var e=[];e.push(new JE("bucket")),e.push(new JE("generation")),e.push(new JE("metageneration")),e.push(new JE("name","fullPath",!0));var t=new JE("name");t.xform=function(e,t){return function(e){return!RE(e)||e.length<2?e:YE(e)}(t)},e.push(t);var n=new JE("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new JE("timeCreated")),e.push(new JE("updated")),e.push(new JE("md5Hash",null,!0)),e.push(new JE("cacheControl",null,!0)),e.push(new JE("contentDisposition",null,!0)),e.push(new JE("contentEncoding",null,!0)),e.push(new JE("contentLanguage",null,!0)),e.push(new JE("contentType",null,!0)),e.push(new JE("metadata","customMetadata",!0)),XE=e}function eT(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new AE(n,r);return t._makeStorageReference(i)}})}(r,e),r}function tT(e,t,n){var r=QE(t);return null===r?null:eT(e,r,n)}function nT(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function rT(e,t,n){var r=QE(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=N(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new AE(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n.items){var s,c=N(n.items);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new AE(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var iT=o((function e(t,n,r,a){i(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function aT(e){if(!e)throw wE()}function oT(e,t){return function(n,r){var i=tT(e,r,t);return aT(null!==i),i}}function uT(e,t){return function(n,r){var i=tT(e,r,t);return aT(null!==i),function(e,t,n,r){var i=QE(t);if(null===i)return null;if(!RE(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return LE("/b/"+o(i)+"/o/"+o(a),n,r)+ME({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function sT(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new gE("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new gE("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new gE("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new gE("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function cT(e){var t=sT(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new gE("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function lT(e,t,n){var r=LE(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new iT(r,"GET",oT(e,n),i);return a.errorHandler=cT(t),a}function fT(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=LE(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new iT(o,"GET",function(e,t){return function(n,r){var i=rT(e,t,r);return aT(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=sT(t),s}function hT(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function dT(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=hT(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+nT(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=HE.getBlob(c,r,l);if(null===f)throw _E();var h={name:s.fullPath},d=LE(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new iT(d,"POST",oT(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=sT(t),v}var pT=o((function e(t,n,r,a){i(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=a||null}));function vT(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){aT(!1)}return aT(!!n&&-1!==(t||["active"]).indexOf(n)),n}var yT=262144;function mT(e,t,n,r,i,a,o,u){var s=new pT(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new gE("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw _E();var v=t.maxUploadRetryTime,y=new iT(n,"POST",(function(e,n){var i,o=vT(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?oT(t,a)(e,n):null,new pT(u,c,"final"===o,i)}),v);return y.headers=d,y.body=p.uploadData(),y.progressCallback=u||null,y.errorHandler=sT(e),y}var gT={STATE_CHANGED:"state_changed"},kT={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function wT(e){switch(e){case"running":case"pausing":case"canceling":return kT.RUNNING;case"paused":return kT.PAUSED;case"success":return kT.SUCCESS;case"canceled":return kT.CANCELED;default:return kT.ERROR}}var bT=o((function e(t,n,r){i(this,e);var a=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(a)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var o=t;this.next=o.next,this.error=o.error,this.complete=o.complete}}));function _T(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var xT=function(){function e(){var t=this;i(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=CE.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=CE.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=CE.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return o(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw SE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw SE("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw SE("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw SE("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw SE("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),IT=function(e){s(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return o(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(xT);function ET(){return new IT}var TT=function(){function e(t,n){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=a,this._mappings=ZE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return o(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=P(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=hT(t,r,i),u={name:o.fullPath},s=LE(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=nT(o,n),f=e.maxUploadRetryTime,h=new iT(s,"POST",(function(e){var t;vT(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){aT(!1)}return aT(RE(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=sT(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,ET,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new iT(n,"POST",(function(e){var t=vT(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){aT(!1)}n||aT(!1);var i=Number(n);return aT(!isNaN(i)),new pT(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=sT(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,ET,n,r);e._request=a,a.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=yT*this._chunkMultiplier,n=new pT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=mT(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,ET,i,a);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){yT*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=lT(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,ET,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=dT(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,ET,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=bE(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=wT(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new bT(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(wT(this._state)){case kT.SUCCESS:_T(this._resolve.bind(null,this.snapshot))();break;case kT.CANCELED:case kT.ERROR:_T(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(wT(this._state)){case kT.RUNNING:case kT.PAUSED:e.next&&_T(e.next.bind(e,this.snapshot))();break;case kT.SUCCESS:e.complete&&_T(e.complete.bind(e))();break;default:e.error&&_T(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),ST=function(){function e(t,n){i(this,e),this._service=t,this._location=n instanceof AE?n:AE.makeFromUrl(n,t.host)}return o(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new AE(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return YE(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new AE(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw EE(e)}}]),e}();function CT(e,t,n){return AT.apply(this,arguments)}function AT(){return(AT=we(F().mark((function e(t,n,r){var i,a,o,u;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,NT(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,ge(u.prefixes)),(a=n.items).push.apply(a,ge(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,CT(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function NT(e,t){null!=t&&"number"===typeof t.maxResults&&OE("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=fT(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,ET)}function RT(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=LE(t.fullServerUrl(),e.host,e._protocol),a=nT(n,r),o=e.maxOperationRetryTime,u=new iT(i,"PATCH",oT(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=cT(t),u}(e.storage,e._location,t,ZE());return e.storage.makeRequestWithTokens(n,ET)}function DT(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=LE(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new iT(r,"GET",uT(e,n),i);return a.errorHandler=cT(t),a}(e.storage,e._location,ZE());return e.storage.makeRequestWithTokens(t,ET).then((function(e){if(null===e)throw new gE("no-download-url","The given file does not have any download URLs.");return e}))}function PT(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=LE(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new iT(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=cT(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,ET)}function OT(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new AE(e._location.bucket,n);return new ST(e.storage,r)}function LT(e,t){if(e instanceof VT){var n=e;if(null==n._bucket)throw new gE("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new ST(n,n._bucket);return null!=t?LT(r,t):r}return void 0!==t?OT(e,t):e}function MT(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof VT)return new ST(e,t);throw xE("To use ref(service, url), the first argument must be a Storage instance.")}return LT(e,t)}function FT(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:AE.makeFromBucketSpec(n,e)}function UT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:G(i,e.app.options.projectId))}var VT=function(){function e(t,n,r,a,o){i(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=a,this._firebaseVersion=o,this._bucket=null,this._host=mE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=a?AE.makeFromBucketSpec(a,this._host):FT(this._host,this.app.options)}return o(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=AE.makeFromBucketSpec(this._url,e):this._bucket=FT(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){OE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){OE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=we(F().mark((function e(){var t,n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=we(F().mark((function e(){var t,n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new ST(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new NE(IE());var a=function(e,t,n,r,i,a){var o=ME(e.urlParams),u=e.url+o,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(s,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(s,r),new FE(u,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=we(F().mark((function e(t,n){var r,i,a,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=P(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),jT="@firebase/storage",qT="0.9.4",BT="storage";function zT(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new TT(e,new HE(t),n)}(e=fe(e),t,n)}function GT(e){return function(e){e._throwIfRoot("getMetadata");var t=lT(e.storage,e._location,ZE());return e.storage.makeRequestWithTokens(t,ET)}(e=fe(e))}function KT(e){return function(e){var t={prefixes:[],items:[]};return CT(e,t).then((function(){return t}))}(e=fe(e))}function WT(e,t){return MT(e=fe(e),t)}function HT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};UT(e,t,n,r)}function QT(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new VT(r,i,a,n,Xe)}Ke(new be(BT,QT,"PUBLIC").setMultipleInstances(!0)),it(jT,qT,""),it(jT,qT,"esm2017");var YT=function(){function e(t,n,r){i(this,e),this._delegate=t,this.task=n,this.ref=r}return o(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),$T=function(){function e(t,n){i(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return o(e,[{key:"snapshot",get:function(){return new YT(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new YT(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new YT(e,i,i._ref))}:{next:t.next?function(e){return t.next(new YT(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),JT=function(){function e(t,n){i(this,e),this._delegate=t,this._service=n}return o(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new XT(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new XT(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),XT=function(){function e(t,n){i(this,e),this._delegate=t,this.storage=n}return o(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return OT(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new $T(zT(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qE.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=zE(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new $T(new TT(this._delegate,new HE(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return KT(this._delegate).then((function(t){return new JT(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return NT(e=fe(e),t)}(this._delegate,e||void 0).then((function(e){return new JT(e,t.storage)}))}},{key:"getMetadata",value:function(){return GT(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return RT(e=fe(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return DT(fe(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),PT(fe(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw EE(e)}}]),e}(),ZT=function(){function e(t,n){i(this,e),this.app=t,this._delegate=n}return o(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(eS(e))throw xE("ref() expected a child path but got a URL, use refFromURL instead.");return new XT(WT(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!eS(e))throw xE("refFromURL() expected a full URL but got a child path, use ref() instead.");try{AE.makeFromUrl(e,this._delegate.host)}catch(t){throw xE("refFromUrl() expected a valid full URL but got an invalid one.")}return new XT(WT(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};HT(this._delegate,e,t,n)}}]),e}();function eS(e){return/^[A-Za-z]+:\/\//.test(e)}function tS(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new ZT(r,i)}!function(e){var t={TaskState:kT,TaskEvent:gT,StringFormat:qE,Storage:ZT,Reference:XT};e.INTERNAL.registerComponent(new be("storage-compat",tS,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.12")}(Ct);var nS=Ct.initializeApp({apiKey:"AIzaSyDkiKFWGz0AO7zMz1GdKBZkgHpv_QiDseM",authDomain:"talestory-ed61f.firebaseapp.com",projectId:"talestory-ed61f",storageBucket:"talestory-ed61f.appspot.com",messagingSenderId:"984306169505",appId:"1:984306169505:web:3aebcdfc2dc0fa331022e0",measurementId:"G-T7N5RNK022"});console.log(nS);var rS=function(e){s(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).max_content_id=3,r.state={mode:"welcome",selected_content_id:2,subject:{title:"Web",sub:"World Wide Web!"},welcome:{title:"Welcome",desc:"Hello, react"},contents:[{id:1,title:"HTML",desc:"HTML is HyperText...."},{id:2,title:"CSS",desc:"CSS is for design"},{id:3,title:"JavaScript",desc:"JavaScript is for interactive"}]},r}return o(n,[{key:"getReadContent",value:function(){for(var e=0;e<this.state.contents.length;){var t=this.state.contents[e];if(t.id===this.state.selected_content_id)return t;e+=1}}},{key:"getContent",value:function(){var e,t,n=null;if("welcome"===this.state.mode)e=this.state.welcome.title,t=this.state.welcome.desc,n=(0,v.jsx)(k,{title:e,desc:t});else if("read"===this.state.mode){var r=this.getReadContent();n=(0,v.jsx)(k,{title:r.title,desc:r.desc})}else"create"===this.state.mode?n=(0,v.jsx)(b,{onSubmit:function(e,t){this.max_content_id=this.max_content_id+1;var n=Array.from(this.state.contents);n.push({id:this.max_content_id,title:e,desc:t}),this.setState({contents:n}),console.log(e,t)}.bind(this)}):"update"===this.state.mode&&(r=this.getReadContent(),n=(0,v.jsx)(x,{data:r,onSubmit:function(e,t,n){for(var i=Array.from(this.state.contents),a=0;a<r.length;){if(i[a].id===e){i[a]={id:e,title:t,desc:n};break}a+=1}this.setState({contents:i,mode:"read"}),console.log(t,n)}.bind(this)}));return n}},{key:"render",value:function(){return console.log("App render"),(0,v.jsxs)("div",{className:"App",children:[(0,v.jsx)(E,{className:"Subject",title:this.state.subject.title,sub:this.state.subject.sub,onChangePage:function(){this.setState({mode:"welcome"})}.bind(this)}),(0,v.jsx)(m,{onChangePage:function(e){this.setState({mode:"read",selected_content_id:Number(e)})}.bind(this),data:this.state.contents}),(0,v.jsx)(S,{onChangeMode:function(e){if("delete"===e){if(window.confirm("really?")){for(var t=Array.from(this.state.contents),n=0;n<t.length;){if(t[n].id===this.state.selected_content_id){t.splice(n,1);break}n+=1}this.setState({mode:"welcome",contents:t})}}else this.setState({mode:e});this.setState({mode:e})}.bind(this)}),this.getContent()]})}}]),n}(t.Component),iS=rS,aS=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};t.Component;r.render((0,v.jsx)(t.StrictMode,{children:(0,v.jsx)(iS,{})}),document.getElementById("root")),aS()}()}();
//# sourceMappingURL=main.dde46c7c.js.map